<!DOCTYPE html>
<html>
<!--
Generated from index.ms by troff2page, v. 20201207
Copyright (C) 2003-2020 Dorai Sitaram
(running on Lua 5.3)
http://ds26gte.github.io/troff2page
-->
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width">
<title>
troff2page
</title>
<link rel="stylesheet" href="index-Z-S.css" title=default>
<link rel="stylesheet" href="default.css" title=default>
<meta name=robots content="index,follow">
</head>
<body>
<div>
<div align=right class=navigation>[Go to <span><a class=hrefinternal href="index.html"><span class=hreftext>first</span></a>, <a class=hrefinternal href="index-Z-H-7.html"><span class=hreftext>previous</span></a></span><span>, <a class=hrefinternal href="index-Z-H-9.html"><span class=hreftext>next</span></a></span> page<span>; &#xa0;&#xa0;</span><span><a class=hrefinternal href="index.html#TAG:__troff2page_toc"><span class=hreftext>contents</span></a></span><span><span>; &#xa0;&#xa0;</span><a class=hrefinternal href="index-Z-H-12.html#TAG:__troff2page_index"><span class=hreftext>index</span></a></span>]</div>
<p></p>
<h1 style="font-size: 160%"><a name="TAG:__pca_sec_21"></a>
8. Styling</h1>
<p><a name="TAG:__troff2page_index_117"></a>
<a name="TAG:__troff2page_index_118"></a>
<span style="font-family: monospace; ">.ig ##</span> can be used to specify settings that are relevant only
when troff2page is used on a document, e.g., stylesheet changes.
troff2page uses the output-stream <span style="font-family: monospace; ">Css_stream</span> to
write out its default style information.  The user can also
append to this stream. E.g.,
<a name="TAG:__troff2page_index_119"></a>
</p>
<p><div class="display verbatim" align=left>
<span style="font-family: monospace; ">&#xa0;&#xa0;&#xa0;&#xa0;.ig&#xa0;##<br>
&#xa0;&#xa0;&#xa0;&#xa0;Css_stream:write([[<br>
&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;h1,h2,h3,h4,h5,h6&#xa0;{<br>
&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;color:&#xa0;#9b3d3d;&#xa0;/*&#xa0;terracotta&#xa0;pink&#xa0;*/<br>
&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;font-family:&#xa0;sans-serif;<br>
&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;font-weight:&#xa0;normal;<br>
&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;margin-top:&#xa0;1em;<br>
&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;margin-bottom:&#xa0;0.5em;<br>
&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;}<br>
&#xa0;&#xa0;&#xa0;&#xa0;]])<br>
&#xa0;&#xa0;&#xa0;&#xa0;.##<br>
</span>
</div>
</p>
<p>This sets the HTML headers
with a foreground color
of <span style="color: #9b3d3d; ">terracotta pink</span><span style="color: previous; "><a name="TAG:__troff2page_call_footnote_2"></a><a class=hrefinternal href="#TAG:__troff2page_footnote_2"><span class=hreftext><sup><small>2</small></sup></span></a>,
along with some other changes from the default.
</span></p>
<p class=indent><a name="TAG:__troff2page_index_120"></a>
troff2page makes available many CSS classes that you can modify
in this manner to change the look of your web pages. For
instance, the HTML element for the document title has class
<span style="font-family: monospace; ">title</span>. Here&#x2019;s a way to get a more happening,
Asciidoctor-like title:
</p>
<p><div class="display verbatim" align=left>
<span style="font-family: monospace; ">&#xa0;&#xa0;&#xa0;&#xa0;.ig&#xa0;##<br>
&#xa0;&#xa0;&#xa0;&#xa0;Css_stream:write([[<br>
&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;h1.title&#xa0;{<br>
&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;color:&#xa0;#333333;<br>
&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;padding-bottom:&#xa0;10px;<br>
&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;border-bottom:&#xa0;1px&#xa0;solid&#xa0;#dddddf;<br>
&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;}<br>
&#xa0;&#xa0;&#xa0;&#xa0;]])<br>
&#xa0;&#xa0;&#xa0;&#xa0;.##<br>
</span>
</div>
</p>
<p>Of course, these CSS mods don&#x2019;t affect the groff output, but they
do affect the printed output if you choose
to print from the browser! To prevent any CSS mods
from leaking into the browser-mediated printout, wrap them inside
<span style="font-family: monospace; ">@media screen {...}</span>.
</p>
<p class=indent></p>
<p></p>
<h2 style="font-size: 130%"><a name="TAG:__pca_sec_22"></a>
Colophon</h2>
<p><a name="TAG:__troff2page_index_121"></a>
<a name="TAG:__troff2page_index_122"></a>
By default, troff2page places a colophon at the bottom right of the first
page. The colophon mentions (i) the last-modification
time of the
the document and (ii) the troff2page version used for the conversion.
Either or both can be suppressed via CSS.
</p>
<p class=indent><a name="TAG:__troff2page_index_123"></a>
<a name="TAG:__troff2page_index_124"></a>
To suppress the mention of troff2page,
</p>
<p class=indent></p>
<p><div class="display verbatim" align=left>
<span style="font-family: monospace; ">&#xa0;&#xa0;&#xa0;&#xa0;.colophon&#xa0;.advertisement&#xa0;{<br>
&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;display:&#xa0;none;<br>
&#xa0;&#xa0;&#xa0;&#xa0;}<br>
</span>
</div>
</p>
<p></p>
<p class=indent>To suppress the entire colophon,
</p>
<p class=indent></p>
<p><div class="display verbatim" align=left>
<span style="font-family: monospace; ">&#xa0;&#xa0;&#xa0;&#xa0;.colophon&#xa0;{<br>
&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;display:&#xa0;none;<br>
&#xa0;&#xa0;&#xa0;&#xa0;}<br>
</span>
</div>
</p>
<p></p>
<p class=indent>troff2page calculates the last-mod time by choosing the timestamp
of the newest of the source documents that make up the document.
Only user content is considered; macro and auxiliary files are
not.
</p>
<p class=indent><a name="TAG:__troff2page_index_125"></a>
<a name="TAG:__troff2page_index_126"></a>
To specify a document timestamp without regard to the actual mod times
of the files in it, use the -ms macros <span style="font-family: monospace; ">.ND</span> or <span style="font-family: monospace; ">.DA</span>.
troff2page doesn&#x2019;t distinguish between them, but groff does.
<span style="font-family: monospace; ">.ND</span> is probably what you want for both typesetters. (groff
doesn&#x2019;t really have any notion of the last-mod date anyway: It
simply uses the date that it was called on.
I.e., last-creation-of-printed-output date.)
</p>
<p class=indent>For web pages, note that if
either macro is called with an argument, that argument is used as the
last-mod date, overriding the value that troff2page would
have determined.
</p>
<p class=indent><a name="TAG:__troff2page_index_127"></a>
If no argument is given, the colophon doesn&#x2019;t
include the &#x201C;Last modified&#x201D; line at all, something that can also be
accomplished via the CSS fragment:
</p>
<p><div class="display verbatim" align=left>
<span style="font-family: monospace; ">&#xa0;&#xa0;&#xa0;&#xa0;.colophon&#xa0;.lastmod&#xa0;{<br>
&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;&#xa0;display:&#xa0;none;<br>
&#xa0;&#xa0;&#xa0;&#xa0;}<br>
</span>
</div>
</p>
<p></p>
<p class=indent></p>
<p></p>
<h2 style="font-size: 130%"><a name="TAG:__pca_sec_23"></a>
Glyph substition</h2>
<p>CSS isn&#x2019;t the only recourse to style your document: Interesting
glyphs offer another approach.  troff2page, like groff, allows
you to use UTF-8 characters, either directly or via escape
sequences of the form <span style="font-family: monospace; ">\[u</span><span style="font-style: italic; ">xxxx</span><span style="font-family: monospace; ">]</span>, where <span style="font-style: italic; ">xxxx</span> is
the corresponding hex number (in uppercase).
</p>
<p class=indent><a name="TAG:__troff2page_index_128"></a>
<a name="TAG:__troff2page_index_129"></a>
<a name="TAG:__troff2page_index_130"></a>
E.g., U+2621 (<span style="font-size: 83%; ">CAUTION SIGN</span>)
and
U+26A0 (<span style="font-size: 83%; ">WARNING SIGN</span>)
&#x2014; in a suitable color and size &#x2014; may be used rather than
the pedestrian &#x201C;<span style="font-weight: bold; ">CAUTION</span>&#x201D; and &#x201C;<span style="font-weight: bold; ">WARNING</span>&#x201D; for admonition titles.
</p>
<p><div class="display" align=left>
&#xa0;&#xa0;&#xa0;&#xa0;<span style="background-color: yellow; "></span><span style="background-color: yellow; font-size: 140%; "></span><span style="font-weight: bold; background-color: yellow; font-size: 140%; ">&#x2621;</span><span style="background-color: yellow; font-size: 140%; "></span><span style="background-color: yellow; "></span><span style="background-color: previous; ">&#xa0;&#xa0;&#xa0;</span><span style="background-color: red; "></span><span style="color: white; background-color: red; "></span><span style="color: white; background-color: red; font-size: 140%; "></span><span style="font-weight: bold; color: white; background-color: red; font-size: 140%; ">&#x26A0;</span><span style="color: white; background-color: red; font-size: 140%; "></span><span style="color: white; background-color: red; "></span><span style="color: previous; background-color: red; "></span><span style="color: previous; background-color: previous; "><br>
</span>
</div>
</p>
<p>Unfortunately,
while these usually work well on browsers, the fonts
used by groff for printing almost always won&#x2019;t recognize them.
(You could use fallback fonts, but often they test groff&#x2019;s
capacity, and it&#x2019;s not worth loading them only for a couple of
exotic glyphs.) A more reasonable workaround is to use
the <span style="font-family: monospace; ">.char</span> request to conditionally translate special characters into their
boring equivalents for print:
</p>
<p class=indent></p>
<p><div class="display verbatim" align=left>
<span style="font-family: monospace; ">&#xa0;&#xa0;&#xa0;&#xa0;.if&#xa0;!\n[.troff2page]&#xa0;\{\<br>
&#xa0;&#xa0;&#xa0;&#xa0;.&#xa0;&#xa0;char&#xa0;\[u2621]&#xa0;\fBCAUTION\fP<br>
&#xa0;&#xa0;&#xa0;&#xa0;.&#xa0;&#xa0;char&#xa0;\[u26A0]&#xa0;\fBWARNING\fP<br>
&#xa0;&#xa0;&#xa0;&#xa0;.\}<br>
</span>
</div>
</p>
<p></p>
<p class=indent><a name="TAG:__troff2page_index_131"></a>
<a name="TAG:__troff2page_index_132"></a>
<a name="TAG:__troff2page_index_133"></a>
The display used above brings up another use-case for glyph
translation, even when (and especially if) no exotic characters
are desired. The display shows the <span style="font-family: monospace; ">\</span> character, which
is an escape character for groff. In a display, we want to
suppress its effect. We could do this by having our display
macros
implicitly turn the escape character off when entering the display and back on when
exiting it. The requests for these actions are <span style="font-family: monospace; ">.eo</span> and
<span style="font-family: monospace; ">.ec</span> respectively.
<a name="TAG:__troff2page_index_134"></a>
<a name="TAG:__troff2page_index_135"></a>
<a name="TAG:__troff2page_index_136"></a>
<a name="TAG:__troff2page_index_137"></a>
<a name="TAG:__troff2page_index_138"></a>
</p>
<p class=indent></p>
<p><div class="display verbatim" align=left>
<span style="font-family: monospace; ">&#xa0;&#xa0;&#xa0;&#xa0;.de&#xa0;EX<br>
&#xa0;&#xa0;&#xa0;&#xa0;.&#xa0;&#xa0;LD<br>
&#xa0;&#xa0;&#xa0;&#xa0;.&#xa0;&#xa0;ft&#xa0;C<br>
&#xa0;&#xa0;&#xa0;&#xa0;.&#xa0;&#xa0;eo<br>
&#xa0;&#xa0;&#xa0;&#xa0;..<br>
&#xa0;&#xa0;&#xa0;&#xa0;.<br>
&#xa0;&#xa0;&#xa0;&#xa0;.de&#xa0;EE<br>
&#xa0;&#xa0;&#xa0;&#xa0;.&#xa0;&#xa0;ec<br>
&#xa0;&#xa0;&#xa0;&#xa0;.&#xa0;&#xa0;DE<br>
&#xa0;&#xa0;&#xa0;&#xa0;..<br>
</span>
</div>
</p>
<p></p>
<p class=indent>We then use the macros <span style="font-family: monospace; ">.EX</span> and <span style="font-family: monospace; ">.EE</span> around the code text to
display it, in mononspace font and with the escape character
temporarily disabled. (An improved version of these macros are provided
in <span style="font-family: monospace; ">pca-verb.tmac</span>.)
</p>
<p class=indent>This works for short displays that are entirely within a page
(we&#x2019;re talking printed pages via groff now, not HTML pages). The
various traps that spring into action when groff breaks at a page
rely on the escape character being active, and these will start
failing catastrophicaly when our display straddles a page
boundary.
</p>
<p class=indent><a name="TAG:__troff2page_index_139"></a>
<a name="TAG:__troff2page_index_140"></a>
<a name="TAG:__troff2page_index_141"></a>
One way out is to
<span style="font-style: italic; ">force</span> code displays to never cross a page boundary by
using groff&#x2019;s &#x201C;keep&#x201D; macros <span style="font-family: monospace; ">.KS</span> or <span style="font-family: monospace; ">.KF</span> or the keep
versions of the display macros (e.g., <span style="font-family: monospace; ">.DS L</span> rather than
<span style="font-family: monospace; ">.LD</span>). Please see the groff docs for more info about these
macros. The problem then becomes what to do with large
page-crossing displays. This is almost unavoidable in computer
technical prose.
</p>
<p class=indent><a name="TAG:__troff2page_index_142"></a>
<a name="TAG:__troff2page_index_143"></a>
<a name="TAG:__troff2page_index_144"></a>
Unicode glyph substitution offers another way out. The Unicode
characters U+29F9 (<span style="font-size: 83%; ">BIG REVERSE SOLIDUS</span>) and U+FE68 (<span style="font-size: 83%; ">SMALL REVERSE
SOLIDUS</span>) are passable replacements for the regular backslash (aka
<span style="font-size: 83%; ">REVERSE SOLIDUS</span>, U+005C). You can enter these substitute
backslashes with text-editor macros fairly easily. So now your
displayed code now has something that looks like a backslash,
at least on
browsers, but it most probably fails for print. Even in the browser,
close is no cigar: Somebody cutting and pasting your code is in
for a nasty surprise. You really do want the <span style="font-style: italic; ">real</span> backslash in
there even in the HTML page, but you don&#x2019;t want to disable
groff&#x2019;s escape character.
Glyph substitution to the rescue:
</p>
<p class=indent></p>
<p><div class="display verbatim" align=left>
<span style="font-family: monospace; ">&#xa0;&#xa0;&#xa0;&#xa0;.char&#xa0;\[u29F9]&#xa0;\[u005C]<br>
</span>
</div>
</p>
<p></p>
<p class=indent>This lets you type the exotic backslash in your source but have
groff and troff2page convert it into the regular backslash when
the it lands on the page.
Even better, there is no requirement that the font used actually
have the exotic backslash glyph at that Unicode position!
You still have to type the exotic backslash but a competent text
editors (with a Unicode font!) can help you do this.
</p>
<div class=footnote><hr align=left width="40%"><p><a name="TAG:__troff2page_footnote_2"></a><a class=hrefinternal href="#TAG:__troff2page_call_footnote_2"><span class=hreftext><sup><small>2</small></sup></span></a>
The RGB values used in this manual for
the colors
terracotta pink
and Venetian red are courtesy <a href="https://www.resene.co.nz/swatches"><span class=hreftext>Resene Paints</span></a>.
</p>
</div>
<div align=right class=navigation>[Go to <span><a class=hrefinternal href="index.html"><span class=hreftext>first</span></a>, <a class=hrefinternal href="index-Z-H-7.html"><span class=hreftext>previous</span></a></span><span>, <a class=hrefinternal href="index-Z-H-9.html"><span class=hreftext>next</span></a></span> page<span>; &#xa0;&#xa0;</span><span><a class=hrefinternal href="index.html#TAG:__troff2page_toc"><span class=hreftext>contents</span></a></span><span><span>; &#xa0;&#xa0;</span><a class=hrefinternal href="index-Z-H-12.html#TAG:__troff2page_index"><span class=hreftext>index</span></a></span>]</div>
</div>
</body>
</html>
