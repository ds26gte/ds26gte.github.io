<!doctype html>
<html lang="en">
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.8/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-sRIl4kxILFvY47J16cr9ZwB07vP4J8+LH7qKQnuqkuIAvNWLzeN8tE5YBujZqJLB" crossorigin="anonymous">
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.8/dist/js/bootstrap.bundle.min.js" integrity="sha384-FKyoEForCGlyvwx9Hj09JcYn3nv7wiPVlz7YYwJrWVcXK/BmnVDxM+D2scQbITxI" crossorigin="anonymous"></script>
  <script type="module" src="embed-api.js"></script>
  <link rel="stylesheet" href="styles.css">
  <head>
    <title>Pyret</title>
  </head>
  <body>
    <div class="container">
    <root><h1 id="Pyret" toclevel="1" tocentry="yes">Pyret</h1><p>This document has detailed information on the Pyret grammar and the behavior of its expression forms and built-in libraries, along with many examples and some longer descriptions of language design choices. If you want to do something in a program and you can’t find how in this document, feel free to post a message on the <a href="https://groups.google.com/forum/#!forum/pyret-discuss">Pyret discussion
list</a>, and we’ll be happy to help.</p><p>If you want to learn about (or teach!) programming and computer science using Pyret, check out <a href="https://dcic-world.org">A Data Centric Introduction to Computing</a>, which is a textbook on programming starting with Pyret.</p><p>Previous release notes documents have useful information on major updates over time.</p><ul class="list-group"><li class="list-group-item"><a href="https://www.pyret.org/release-notes/2025.html">Summer 2025</a></li><li class="list-group-item"><a href="https://www.pyret.org/release-notes/summer-2021.html">Summer 2021</a></li><li class="list-group-item"><a href="https://www.pyret.org/release-notes/summer-2020.html">Summer 2020</a></li><li class="list-group-item"><a href="https://groups.google.com/g/pyret-discuss/c/kUr3iIYsheE/m/Z7FTW9ZcEwAJ">Fall 2017</a></li><li class="list-group-item"><a href="https://groups.google.com/g/pyret-discuss/c/n4yAxubXHyY/m/EJr0yMlwAAAJ">Fall 2016</a></li><li class="list-group-item"><a href="https://groups.google.com/g/pyret-discuss/c/i1qMU_YP9Tw/m/j67PlQx0CQAJ">Summer 2016</a></li><li class="list-group-item"><a href="https://www.pyret.org/release-notes/v0.5.html">Summer 2014</a></li></ul><div><h1 id="Getting-Started-and-Running-Pyret" toclevel="1" tocentry="yes">Getting Started and Running Pyret</h1><p>The most direct way to Pyret is to visit <url>https://code.pyret.org</url>, which runs Pyret entirely within your browser.</p><p><span><a name="getting-started-39"></a></span></p><p>There are a few other ways to run Pyret via the command-line and via Visual Studio Code, and all of these are summarized in <a href="platforms/platforms.html#platforms">Platforms</a>.</p><p>If you’re interested in a textbook, you can try out <a href="https://dcic-world.org">A Data-Centric Introduction to Computing</a>, which gives a structured introduction to programming in Pyret.</p><ul class="toclist"><li class="indent1"><a href="#Getting-Started-and-Running-Pyret">Getting Started and Running Pyret</a></li><li class="indent1"><a href="platforms/platforms.html#platforms">Platforms</a></li><li class="indent2"><a href="platforms/platforms.html#code.pyret.org">code.pyret.org</a></li><li class="indent2"><a href="platforms/platforms.html#VScode-Extension">VScode Extension</a></li><li class="indent3"><a href="platforms/platforms.html#Installing-the-VScode-Extension">Installing the VScode Extension</a></li><li class="indent3"><a href="platforms/platforms.html#Opening-Files-in-the-VScode-Extension">Opening Files in the VScode Extension</a></li><li class="indent3"><a href="platforms/platforms.html#Use-with-github.dev">Use with github.dev</a></li><li class="indent3"><a href="platforms/platforms.html#Editing-Pyret-Files-with-the-Default-Editor">Editing Pyret Files with the Default Editor</a></li><li class="indent2"><a href="platforms/platforms.html#Command-Line">Command Line</a></li><li class="indent1"><a href="tour.html#A-Tour-of-Pyret">A Tour of Pyret</a></li><li class="indent2"><a href="tour.html#Testing-and-Assertions">Testing and Assertions</a></li><li class="indent2"><a href="tour.html#Primitive-Values-and-Operators">Primitive Values and Operators</a></li><li class="indent3"><a href="tour.html#Numbers">Numbers</a></li><li class="indent2"><a href="tour.html#Booleans">Booleans</a></li><li class="indent2"><a href="tour.html#Strings">Strings</a></li><li class="indent2"><a href="tour.html#Lists">Lists</a></li><li class="indent2"><a href="tour.html#Identifiers-and-Binding">Identifiers and Binding</a></li><li class="indent3"><a href="tour.html#Identifiers">Identifiers</a></li><li class="indent2"><a href="tour.html#Variables">Variables</a></li><li class="indent2"><a href="tour.html#functions-tour">Functions</a></li><li class="indent2"><a href="tour.html#data-tour">Data</a></li><li class="indent3"><a href="tour.html#definitions-tour">Definitions</a></li><li class="indent2"><a href="tour.html#cases-tour">Cases</a></li><li class="indent2"><a href="tour.html#annotations-tour">Annotations</a></li><li class="indent2"><a href="tour.html#Control">Control</a></li><li class="indent3"><a href="tour.html#For-loops">For loops</a></li><li class="indent2"><a href="tour.html#If">If</a></li><li class="indent3"><a href="tour.html#When-blocks">When blocks</a></li><li class="indent2"><a href="tour.html#And-more...">And more...</a></li></ul><p><span class="includesection"></span></p><p><span class="includesection"></span></p></div><div><h1 id="Language-Concepts" toclevel="1" tocentry="yes">Language Concepts</h1><p>This section documents the language forms in Pyret, as well as a number of Pyret-specific libraries and concepts, like <a href="lang/testing.html#testing"></a> and <a href="lang/equality.html#equality">Equality</a>.</p><p>—<a href="https://pyret.org/docs/latest">Original doc link</a></p><ul class="toclist"><li class="indent1"><a href="#Language-Concepts">Language Concepts</a></li><li class="indent1"><a href="lang/forms.html#s:forms">Language Constructs</a></li><li class="indent2"><a href="lang/forms.html#s:literals">Primitives and Literals</a></li><li class="indent3"><a href="lang/forms.html#Names">Names</a></li><li class="indent3"><a href="lang/forms.html#String-Literals">String Literals</a></li><li class="indent3"><a href="lang/forms.html#f:number_literals">Number Literals</a></li><li class="indent3"><a href="lang/forms.html#Boolean-Literals">Boolean Literals</a></li><li class="indent2"><a href="lang/forms.html#s:comments">Comments</a></li><li class="indent2"><a href="lang/forms.html#s:program">Programs</a></li><li class="indent2"><a href="lang/forms.html#Import-Statements">Import Statements</a></li><li class="indent2"><a href="lang/forms.html#Provide-Statements">Provide Statements</a></li><li class="indent2"><a href="lang/forms.html#Bindings">Bindings</a></li><li class="indent3"><a href="lang/forms.html#Name-bindings">Name bindings</a></li><li class="indent3"><a href="lang/forms.html#s:annotated-binding">Annotated bindings</a></li><li class="indent3"><a href="lang/forms.html#s:shadowing">Shadowing</a></li><li class="indent3"><a href="lang/forms.html#Tuple-bindings">Tuple bindings</a></li><li class="indent2"><a href="lang/forms.html#Blocks">Blocks</a></li><li class="indent3"><a href="lang/forms.html#s:blocky-blocks">Block Shorthand</a></li><li class="indent2"><a href="lang/forms.html#s:declarations">Declarations</a></li><li class="indent3"><a href="lang/forms.html#s:let-decl">Let Declarations</a></li><li class="indent3"><a href="lang/forms.html#s:rec-decl">Recursive Let Declarations</a></li><li class="indent3"><a href="lang/forms.html#s:fun-decl">Function Declaration Expressions</a></li><li class="indent4"><a href="lang/forms.html#Scope">Scope</a></li><li class="indent4"><a href="lang/forms.html#Where-blocks">Where blocks</a></li><li class="indent4"><a href="lang/forms.html#Syntactic-sugar">Syntactic sugar</a></li><li class="indent3"><a href="lang/forms.html#s:data-decl">Data Declarations</a></li><li class="indent3"><a href="lang/forms.html#s:var-decl">Variable Declarations</a></li><li class="indent3"><a href="lang/forms.html#s:type-decl">Type Declarations</a></li><li class="indent3"><a href="lang/forms.html#s:newtype-decl">Newtype Declarations</a></li><li class="indent2"><a href="lang/forms.html#s:contracts">Contracts</a></li><li class="indent2"><a href="lang/forms.html#Statements">Statements</a></li><li class="indent3"><a href="lang/forms.html#s:when-stmt">When Statements</a></li><li class="indent3"><a href="lang/forms.html#s:assign-stmt">Assignment Statements</a></li><li class="indent3"><a href="lang/forms.html#Binop-Expression-“Statements”">Binop Expression “Statements”</a></li><li class="indent2"><a href="lang/forms.html#Expressions">Expressions</a></li><li class="indent3"><a href="lang/forms.html#s:lam-expr">Lambda Expressions</a></li><li class="indent3"><a href="lang/forms.html#s:curly-lam-expr">Curly-Brace Lambda Shorthand</a></li><li class="indent3"><a href="lang/forms.html#s:method-expr">Anonymous Method Expressions</a></li><li class="indent3"><a href="lang/forms.html#s:app-expr">Application Expressions</a></li><li class="indent3"><a href="lang/forms.html#s:curried-apply-expr">Curried Application Expressions</a></li><li class="indent3"><a href="lang/forms.html#s:cannonball-expr">Chaining Application</a></li><li class="indent3"><a href="lang/forms.html#s:inst-expr">Instantiation Expressions</a></li><li class="indent3"><a href="lang/forms.html#s:binop-expr">Binary Operators</a></li><li class="indent3"><a href="lang/forms.html#s:tuple-expr">Tuple Expressions</a></li><li class="indent3"><a href="lang/forms.html#s:tuple-get-expr">Tuple Access Expressions</a></li><li class="indent3"><a href="lang/forms.html#s:obj-expr">Object Expressions</a></li><li class="indent3"><a href="lang/forms.html#s:dot-expr">Dot Expressions</a></li><li class="indent3"><a href="lang/forms.html#s:extend-expr">Extend Expressions</a></li><li class="indent3"><a href="lang/forms.html#s:if-expr">If Expressions</a></li><li class="indent3"><a href="lang/forms.html#s:ask-expr">Ask Expressions</a></li><li class="indent3"><a href="lang/forms.html#s:cases-expr">Cases Expressions</a></li><li class="indent3"><a href="lang/forms.html#s:for-expr">For Expressions</a></li><li class="indent3"><a href="lang/forms.html#s:template-expr">Template (...) Expressions</a></li><li class="indent3"><a href="lang/forms.html#s:table-exprs">Tables</a></li><li class="indent4"><a href="lang/forms.html#s:tables:order">Sorting Table Rows</a></li><li class="indent4"><a href="lang/forms.html#s:tables:transform">Transforming Table Rows</a></li><li class="indent4"><a href="lang/forms.html#s:tables:extract">Extracting Table Columns</a></li><li class="indent4"><a href="lang/forms.html#s:tables:extend">Adding Table Columns</a></li><li class="indent3"><a href="lang/forms.html#s:table-loading">Table Loading Expressions</a></li><li class="indent3"><a href="lang/forms.html#s:reactor-expr">Reactor Expressions</a></li><li class="indent3"><a href="lang/forms.html#s:reference-fields">Mutable fields</a></li><li class="indent3"><a href="lang/forms.html#s:construct-expr">Construction expressions</a></li><li class="indent3"><a href="lang/forms.html#s:binding-expressions">Expression forms of bindings</a></li><li class="indent2"><a href="lang/forms.html#s:annotations">Annotations</a></li><li class="indent3"><a href="lang/forms.html#s:name-ann">Name Annotations</a></li><li class="indent3"><a href="lang/forms.html#s:app-ann">Parametric Annotations</a></li><li class="indent3"><a href="lang/forms.html#s:arrow-ann">Arrow Annotations</a></li><li class="indent3"><a href="lang/forms.html#s:pred-ann">Predicate Annotations</a></li><li class="indent3"><a href="lang/forms.html#s:tuple-ann">Tuple Annotations</a></li><li class="indent3"><a href="lang/forms.html#s:record-ann">Record Annotations</a></li><li class="indent1"><a href="lang/testing.html#testing">Testing</a></li><li class="indent2"><a href="lang/testing.html#testing-blocks"><tt class="pyretexpr">check:</tt> and <tt class="pyretexpr">where:</tt> blocks</a></li><li class="indent3"><a href="lang/testing.html#--blocks"><tt class="pyretexpr">check:</tt> blocks</a></li><li class="indent3"><a href="lang/testing.html#--blocks"><tt class="pyretexpr">where:</tt> blocks</a></li><li class="indent2"><a href="lang/testing.html#testing-operators">Testing Operators</a></li><li class="indent3"><a href="lang/testing.html#Binary-Test-Operators">Binary Test Operators</a></li><li class="indent3"><a href="lang/testing.html#Unary-Test-Operators">Unary Test Operators</a></li><li class="indent3"><a href="lang/testing.html#Exception-Test-Operators">Exception Test Operators</a></li><li class="indent2"><a href="lang/testing.html#Reasons-for-tests:----clauses">Reasons for tests: <tt class="pyretexpr">because</tt> clauses</a></li><li class="indent3"><a href="lang/testing.html#Using----with-other-testing-operators">Using <tt class="pyretexpr">because</tt> with other testing operators</a></li><li class="indent1"><a href="lang/equality.html#equality"></a></li><li class="indent2"><a href="lang/equality.html#types-of-equality">Types of Equality</a></li><li class="indent2"><a href="lang/equality.html#eq-fun-equal-always">Equal Always</a></li><li class="indent3"><a href="lang/equality.html#s:always-equal-mutable">Equal Always and Mutable Data</a></li><li class="indent2"><a href="lang/equality.html#eq-fun-equal-now">Equal Now</a></li><li class="indent3"><a href="lang/equality.html#s:equal-now-primitives">Equal Now and Primitives</a></li><li class="indent3"><a href="lang/equality.html#s:equal-now-structural">Equal Now and Structured Data</a></li><li class="indent3"><a href="lang/equality.html#s:equal-now-mutable">Equal Now and References</a></li><li class="indent2"><a href="lang/equality.html#eq-fun-identical">Identical</a></li><li class="indent3"><a href="lang/equality.html#s:identical-primitives">Identical and Primitives</a></li><li class="indent3"><a href="lang/equality.html#s:identical-structural">Identical and Structural Equality</a></li><li class="indent3"><a href="lang/equality.html#s:identical-mutable">Identical and Mutable Data</a></li><li class="indent2"><a href="lang/equality.html#eq-func-relationship">Properties of Equality Functions</a></li><li class="indent2"><a href="lang/equality.html#s:bounded-equalities">Bounded Equalities</a></li><li class="indent2"><a href="lang/equality.html#s:undefined-equalities">Partial and Total Equality Predicates</a></li><li class="indent3"><a href="lang/equality.html#s:roughnum-equality">Roughnums and Equality</a></li><li class="indent3"><a href="lang/equality.html#s:function-equality">Functions and Equality</a></li><li class="indent2"><a href="lang/equality.html#s:total-equality-predicates">Total Equality Predicates (Avoiding Incomparability Errors)</a></li><li class="indent2"><a href="lang/equality.html#s:datatype-defined-equality">Datatype-defined Equality</a></li><li class="indent2"><a href="lang/equality.html#inequalities">Inequalities</a></li><li class="indent1"><a href="lang/op-precedence.html#op-precedence">Combining Multiple Operators</a></li><li class="indent2"><a href="lang/op-precedence.html#But-why-not-use-precedence?">But why not use precedence?</a></li><li class="indent1"><a href="lang/modules.html#modules">Modules</a></li><li class="indent2"><a href="lang/modules.html#s:modules:quick-start">Quick Start</a></li><li class="indent2"><a href="lang/modules.html#s:modules:finding-modules">Finding Modules</a></li><li class="indent2"><a href="lang/modules.html#Detailed-Control-of-Names">Detailed Control of Names</a></li><li class="indent2"><a href="lang/modules.html#s:modules:import"><tt class="pyretexpr">import</tt> and Module Identifiers</a></li><li class="indent2"><a href="lang/modules.html#s:modules:provide-fewer">Providing Fewer (and More) Names</a></li><li class="indent3"><a href="lang/modules.html#Re-exporting-values">Re-exporting values</a></li><li class="indent2"><a href="lang/modules.html#s:modules:provide-other">Providing more than just values</a></li><li class="indent3"><a href="lang/modules.html#Types">Types</a></li><li class="indent3"><a href="lang/modules.html#Modules">Modules</a></li><li class="indent3"><a href="lang/modules.html#Data-definitions">Data definitions</a></li><li class="indent2"><a href="lang/modules.html#s:modules:include-fewer">Including Fewer (and More) Names</a></li><li class="indent2"><a href="lang/modules.html#s:modules:import-other">Importing more than just values</a></li><li class="indent2"><a href="lang/modules.html#Converting-between-shorthand-and-expanded-syntax">Converting between shorthand and expanded syntax</a></li><li class="indent1"><a href="lang/use.html#use">Use</a></li><li class="indent2"><a href="lang/use.html#s:use:context">Contexts</a></li><li class="indent3"><a href="lang/use.html#s:use:compat">Backwards and Forwards Compatibility</a></li><li class="indent1"><a href="lang/brands.html#brands">Brands</a></li><li class="indent1"><a href="lang/type-check.html#type-check">Type Checking</a></li><li class="indent2"><a href="lang/type-check.html#required-annotations">Required Annotations</a></li><li class="indent2"><a href="lang/type-check.html#working-with-data-types">Working with Data Types</a></li><li class="indent2"><a href="lang/type-check.html#record-types">Record Types</a></li><li class="indent1"><a href="lang/spies.html#s:spies">Spies</a></li><li class="indent2"><a href="lang/spies.html#Examples">Examples</a></li><li class="indent2"><a href="lang/spies.html#Minor-Notes-and-Corner-Cases">Minor Notes and Corner Cases</a></li><li class="indent2"><a href="lang/spies.html#Grammar">Grammar</a></li><li class="indent2"><a href="lang/spies.html#s:spies:rationale">Rationale</a></li></ul><p><span class="includesection"></span></p><p><span class="includesection"></span></p><p><span class="includesection"></span></p><p><span class="includesection"></span></p><p><span class="includesection"></span></p><p><span class="includesection"></span></p><p><span class="includesection"></span></p><p><span class="includesection"></span></p><p><span class="includesection"></span></p></div><div><h1 id="Builtins-and-Libraries" toclevel="1" tocentry="yes">Builtins and Libraries</h1><p>This section contains information on libraries that come with Pyret.</p><ul class="toclist"><li class="indent1"><a href="#Builtins-and-Libraries">Builtins and Libraries</a></li><li class="indent1"><a href="libraries-general.html#General-Purpose-Libraries">General-Purpose Libraries</a></li><li class="indent1"><a href="libraries-archived.html#Archived-Libraries">Archived Libraries</a></li><li class="indent1"><a href="libraries-internal.html#Internal-Libraries">Internal Libraries</a></li></ul><p><span class="includesection"></span></p><p><span class="includesection"></span></p><p><span class="includesection"></span></p></div><div><h1 id="Pyret-Style-Guide" toclevel="1" tocentry="yes">Pyret Style Guide</h1><div class="author">by Frank Goodman and Shriram Krishnamurthi</div><p>Ahoy matey! Here be the style guide for Pyret. Follow me rules to find the hidden treasure, or walk the plank!</p><ul class="toclist"><li class="indent1"><a href="#Pyret-Style-Guide">Pyret Style Guide</a></li><li class="indent2"><a href="#General">General</a></li><li class="indent3"><a href="#Indentation">Indentation</a></li><li class="indent3"><a href="#Line-Length">Line Length</a></li><li class="indent3"><a href="#Variable-Naming">Variable Naming</a></li><li class="indent4"><a href="#Naming-Constants">Naming Constants</a></li><li class="indent4"><a href="#Reusing-Variable-Names">Reusing Variable Names</a></li><li class="indent3"><a href="#File-Naming">File Naming</a></li><li class="indent3"><a href="#eg-tests">Example and Tests</a></li><li class="indent2"><a href="#Functions">Functions</a></li><li class="indent3"><a href="#Naming">Naming</a></li><li class="indent3"><a href="#Documentation-Strings">Documentation Strings</a></li><li class="indent3"><a href="#Annotations">Annotations</a></li><li class="indent3"><a href="#Testing">Testing</a></li><li class="indent2"><a href="#Data">Data</a></li><li class="indent3"><a href="#Definitions">Definitions</a></li><li class="indent3"><a href="#Cases">Cases</a></li><li class="indent2"><a href="#Naming-Intermediate-Expressions">Naming Intermediate Expressions</a></li><li class="indent3"><a href="#Local-Variables">Local Variables</a></li><li class="indent3"><a href="#Beware-of---!">Beware of <code class="uncolored-code">var</code>!</a></li></ul><h2 id="General" toclevel="2" tocentry="yes">General</h2><h3 id="Indentation" toclevel="3" tocentry="yes">Indentation</h3><p>You should indent your code blocks using two spaces (not tabs).</p><h3 id="Line-Length" toclevel="3" tocentry="yes">Line Length</h3><p>Try to keep the total length of your lines under 100 characters.</p><p>For overly long lines, it’s actually really hard to figure out where to put in good line breaks. This is in every language. Look for something that tries to match the logical structure of your program.</p><p>However, there’s usually a better way to solve this problem: create extra variables to name the intermediate pieces, and use those names. E.g.: instead of worrying where to put in line breaks in</p><pre class="nothing_special">fun f(x, y, z):
  g(some-very-long-thing(x * x, y + y), other-very-long-thing((x + y + z) / (2 * 3 * 4)))
end</pre><p>it might be better to write it as</p><pre class="nothing_special">fun f(x, y, z):
  sensible-name-1 = some-very-long-thing(x * x, y + y)
  sensible-name-2 = other-very-long-thing((x + y + z) / (2 * 3 * 4))
  g(sensible-name-1, sensible-name-2)
end</pre><p>(and think about indenting/shortening those two new lines).</p><p>Not only does this shorten lines, it makes it clearer what all these pieces are doing, helping a later reader (who may be yourself!).</p><h3 id="Variable-Naming" toclevel="3" tocentry="yes">Variable Naming</h3><p>The programming language world rages about the use of <code class="uncolored-code">camelCase</code> versus <code class="uncolored-code">under_scores</code> in variable names. Pyret’s syntax supports both, but we can do better.</p><p>In Pyret, you can use dashes (<code class="uncolored-code">-</code>) inside variable names.<span class="margin-note">This is sometimes called ``kebab case’’, but it would be more accurate to call it ``shish case’’.</span> Thus, you would write <code class="uncolored-code">camel-case</code> and <code class="uncolored-code">under-scores</code>. Unlike underscores, dashes don’t need a shift key (or disappear when text is underlined by an environment). Unlike camelcase, dashes don’t create ambiguities (what if one of the words is in all-caps?). Dashes are also humanizing: they make your program look that little bit more like human prose.</p><p>Most languages can’t support dashes because the dash also stands for infix subtraction. In Pyret, subtraction must be surrounded by space. Therefore, <code class="uncolored-code">camel-case</code> is a name whereas <code class="uncolored-code">camel - case</code> is subtraction.</p><h4 id="Naming-Constants" toclevel="4" tocentry="yes">Naming Constants</h4><p>You should name constants in all-capital letters unless an external convention would dictate using some other capitalization for that particular name.  For example,</p><pre class="nothing_special">MY-COUNT = 100
e = 2.7182</pre><h4 id="Reusing-Variable-Names" toclevel="4" tocentry="yes">Reusing Variable Names</h4><p>Pyret is picky about letting you reuse variable names. This is to help you avoid confusing two different variables that have the same name and accidentally using the wrong one. Specifically, an inner scope can’t use a name that is already bound in an outer scope; but two different inner scopes can each use the same name. For instance,</p><pre class="nothing_special">fun f(x): x + 1 end
fun g(x): x + 2 end</pre><p>is legal, but</p><pre class="nothing_special">fun h(x):
  x = 4
  x + 1
end</pre><p>is not.</p><h3 id="File-Naming" toclevel="3" tocentry="yes">File Naming</h3><p>Use <code class="uncolored-code">.arr</code> as the extension for Pyret files.</p><h3 id="eg-tests" toclevel="3" tocentry="yes">Example and Tests</h3><p>We use the syntax of testing to represent two different tasks: <i>examples</i>, which help us explore a problem and take steps towards deriving a solution, and <i>tests</i>, which are designed to find errors. These are subtly different.</p><p>We write (most) examples <i>before</i> writing the corresponding code. Therefore, it makes sense to put these examples in an <code class="uncolored-code">examples</code> block:</p><pre class="nothing_special">examples:
  f(10) is 25
  f(20) is-not 2000
end</pre><p>The keyword <code class="uncolored-code">examples</code> is synonymous with <code class="uncolored-code">check</code>, so we could as well have written <code class="uncolored-code">check</code> instead. However, by convention we use <code class="uncolored-code">check</code> for tests rather than examples.</p><h2 id="Functions" toclevel="2" tocentry="yes">Functions</h2><h3 id="Naming" toclevel="3" tocentry="yes">Naming</h3><p>Give functions descriptive names. Do the same for arguments. That way, a quick scan of a function’s header will tell you what it does and what the arguments are supposed to do.</p><h3 id="Documentation-Strings" toclevel="3" tocentry="yes">Documentation Strings</h3><p>Unless the name is self-evident, write a brief documentation string for your function. For instance:</p><pre class="nothing_special">fun insert(x, l):
  doc: "consumes sorted list l; returns it with x in the right place"
  ...
end</pre><p>Try to write your documentation in functional form, i.e., describing what the function consumes and what it returns after computation.</p><p>If your comment needs to span multiple lines, use three back-ticks—</p><pre class="nothing_special">```</pre><p>—to begin and end the string. For instance:</p><pre class="nothing_special">fun f(x):
  doc: ```This is a
       multi-line
       comment here.```
  x + x
end</pre><p>This is also how you write a multi-line string in Pyret.</p><h3 id="Annotations" toclevel="3" tocentry="yes">Annotations</h3><p>Wherever possible, annotate both argument and return values. For instance,</p><pre class="nothing_special">fun str-len(str :: String) -&gt; Number:
  # ...
end</pre><p>Even though Pyret does not currently check parametric annotations, you should still write them for their value as user documentation. Thus:</p><pre class="nothing_special">fun length(lst :: List&lt;Any&gt;) -&gt; Number:
  # ...
end</pre><p>You can even write an arbitrary predicate when a built-in annotation isn’t expressive enough. For instance, suppose we want to write a function that consumes only non-negative numbers. We can define the predicate—</p><pre class="nothing_special">fun non-negative(n :: Number) -&gt; Boolean:
  n &gt;= 0
end</pre><p>and then use it as follows:</p><pre class="nothing_special">fun sqrt(n :: Number%(non-negative)) -&gt; Number:
  # ...
end</pre><h3 id="Testing" toclevel="3" tocentry="yes">Testing</h3><p>You should test every function you write for both general cases and edge cases.</p><p>As we have discussed earlier [<a href="style-guide.html#eg-tests">Example and Tests</a>], you can write these using <code class="uncolored-code">examples</code> and <code class="uncolored-code">check</code>. In addition, you can also write examples and tests of functions as part of the function declaration, using <code class="uncolored-code">where</code>:</p><pre class="nothing_special">fun double(n :: Number) -&gt; Number:
  n * 2
where:
  double(0) is 0
  double(5) is 10
  double(-5) is -10
  double(100) is 200
  double(-100) is -200
end</pre><p>Usually, the examples you create to help you think through the problem would go in an <code class="uncolored-code">examples</code> block, and a large suite of tests would end up in a separate <code class="uncolored-code">check</code> block. In a <code class="uncolored-code">where</code> block, we should have a small number of <i>illustrative</i> examples that help a reader to quickly grasp the essence of the function’s behavior. Try to keep the size of the <code class="uncolored-code">where</code> block small and manageable. In particular, a large test suite—meant to cover lots of behaviors, including potentially redundant ones, and to find bugs—should go in a separate <code class="uncolored-code">check</code> block rather than cluttering up the function definition’s <code class="uncolored-code">where</code> region.</p><h2 id="Data" toclevel="2" tocentry="yes">Data</h2><h3 id="Definitions" toclevel="3" tocentry="yes">Definitions</h3><p>Wherever possible, provide annotations in Data definitions:</p><pre class="nothing_special">data Animal:
  | snake(name :: String)
  | dillo(weight :: Number, living :: Boolean)
end</pre><h3 id="Cases" toclevel="3" tocentry="yes">Cases</h3><p>To branch on the variants of a datum, use <code class="uncolored-code">cases</code>:</p><pre class="nothing_special">cases (Animal) a:
  | snake(s) =&gt; s == "Dewey"
  | dillo(w, l) =&gt; (w &lt; 10) and l
end</pre><p>Sometimes, you won’t use all the parts of a datum. You can still name an unused part, but it is suggestive to use <code class="uncolored-code">_</code> instead; this indicates to the reader that that field won’t be used in this computation, so they can ignore it:</p><pre class="nothing_special">cases (Animal) a:
  | snake(s) =&gt; ...
  | dillo(w, _) =&gt; ...
end</pre><p>Note that <code class="uncolored-code">_</code> is different from identifier names like <code class="uncolored-code">dummy</code> because you can’t write</p><pre class="nothing_special">cases (Animal) a:
  | snake(s) =&gt; ...
  | dillo(dummy, dummy) =&gt; ...
end</pre><p>(you’ll get an error because you’re trying to bind <code class="uncolored-code">dummy</code> twice), but you can write</p><pre class="nothing_special">cases (Animal) a:
  | snake(s) =&gt; ...
  | dillo(_, _) =&gt; ...
end</pre><p>and thus ignore multiple fields.</p><p>Finally, if your conditional is not designed to handle a particular kind of datum, signal an error:</p><pre class="nothing_special">cases (Animal) a:
  | snake(s) =&gt; ...
  | dillo(_, _) =&gt; raise("Serpents only, please!")
end</pre><h2 id="Naming-Intermediate-Expressions" toclevel="2" tocentry="yes">Naming Intermediate Expressions</h2><h3 id="Local-Variables" toclevel="3" tocentry="yes">Local Variables</h3><p>You are welcome to create local names for expressions. For instance, instead of writing</p><pre class="nothing_special">fun hypo-len(a, b):
  num-sqrt((a * a) + (b * b))
end</pre><p>you are welcome to write</p><pre class="nothing_special">fun hypo-len(a, b):
  a2 = a * a
  b2 = b * b
  sum-of-other-two-sides = a2 + b2
  num-sqrt(sum-of-other-two-sides)
end</pre><p>Even though you shouldn’t have multiple <i>expressions</i> as a function body, these local definitions are not expressions in their own right, so this is perfectly legal code; the value of calling the function is that produced by its expression (which, here, is <code class="uncolored-code">num-sqrt(sum-of-other-two-sides)</code>).</p><h3 id="Beware-of---!" toclevel="3" tocentry="yes">Beware of <code class="uncolored-code">var</code>!</h3><p>You might have noticed that Pyret lets you write <code class="uncolored-code">var</code> before local names: for instance, you can write the previous example as</p><pre class="nothing_special">fun hypo-len(a, b):
  var a2 = a * a
  var b2 = b * b
  var sum-of-other-two-sides = a2 + b2
  num-sqrt(sum-of-other-two-sides)
end</pre><p>instead. In particular, if you have prior experience in a language like JavaScript, you might think this is <i>good</i> practice. It’s not: <i>don’t do this</i>! In Pyret, adding <code class="uncolored-code">var</code> turns each name into a <i>mutable variable</i>, i.e., one that you can modify using an assignment statement. Therefore, do not use <code class="uncolored-code">var</code> unless you absolutely mean to create a mutable variable.</p></div><div><h1 id="Internals" toclevel="1" tocentry="yes">Internals</h1><p>This section contains information in the internals of Pyret, including its Javascript representations and FFI.</p><ul class="toclist"><li class="indent1"><a href="#Internals">Internals</a></li><li class="indent1"><a href="internals/runtime.html#runtime">Runtime API</a></li><li class="indent2"><a href="internals/runtime.html#s:runtime-object">The Pyret Runtime</a></li><li class="indent3"><a href="internals/runtime.html#Running-Pyret-Programs">Running Pyret Programs</a></li><li class="indent3"><a href="internals/runtime.html#Creating-Values">Creating Values</a></li><li class="indent3"><a href="internals/runtime.html#Interacting-with-Objects">Interacting with Objects</a></li><li class="indent3"><a href="internals/runtime.html#Assertions">Assertions</a></li><li class="indent3"><a href="internals/runtime.html#runtime:equality">Equality</a></li><li class="indent3"><a href="internals/runtime.html#FFI-Helpers">FFI Helpers</a></li><li class="indent1"><a href="internals/ffi-helpers.html#ffi">FFI Helpers</a></li><li class="indent2"><a href="internals/ffi-helpers.html#ffi:equality">Equality</a></li><li class="indent2"><a href="internals/ffi-helpers.html#ffi:exceptions">Exceptions</a></li><li class="indent2"><a href="internals/ffi-helpers.html#ffi:lists">Lists</a></li><li class="indent2"><a href="internals/ffi-helpers.html#Other-Data-Helpers">Other Data Helpers</a></li><li class="indent1"><a href="internals/running.html#s:running">Running Code (Safely)</a></li><li class="indent2"><a href="internals/running.html#JS-Pretending-to-be-Pyret">JS Pretending to be Pyret</a></li><li class="indent2"><a href="internals/running.html#Asynchronous-JS-and-Pyret">Asynchronous JS and Pyret</a></li><li class="indent2"><a href="internals/running.html#Starting-a-New-Pyret-Stack">Starting a New Pyret Stack</a></li><li class="indent3"><a href="internals/running.html#s:synchronous">Synchronous vs. Asynchronous Execution</a></li><li class="indent3"><a href="internals/running.html#s:result-structures">Result Data Structures</a></li><li class="indent1"><a href="internals/modules.html#Module-Representation">Module Representation</a></li><li class="indent2"><a href="internals/modules.html#s:module-rep">Representation</a></li><li class="indent3"><a href="internals/modules.html#s:single-module">Single Modules</a></li><li class="indent3"><a href="internals/modules.html#s:js-interop-example">JavaScript Interop Example (node)</a></li><li class="indent3"><a href="internals/modules.html#s:complete">Complete Programs</a></li></ul><p><span class="includesection"></span> <span class="includesection"></span> <span class="includesection"></span> <span class="includesection"></span></p></div><div><h1 id="Glossary" toclevel="1" tocentry="yes">Glossary</h1><ul><li><a href="builtin/numbers.html#*-(multiplication-operator)-16">* (multiplication operator)</a></li><li><a href="builtin/numbers.html#*-(multiplication-operator)-16">* (multiplication operator)</a></li><li><a href="builtin/numbers.html#+-(addition-operator)-14">+ (addition operator)</a></li><li><a href="builtin/numbers.html#+-(addition-operator)-14">+ (addition operator)</a></li><li><a href="builtin/strings.html#+-(concatenation)-29">+ (concatenation)</a></li><li><a href="builtin/numbers.html#--(subtraction-operator)-15">- (subtraction operator)</a></li><li><a href="builtin/numbers.html#--(subtraction-operator)-15">- (subtraction operator)</a></li><li><a href="builtin/numbers.html#/-(division-operator)-17">/ (division operator)</a></li><li><a href="builtin/numbers.html#/-(division-operator)-17">/ (division operator)</a></li><li><a href="builtin/numbers.html#&lt;-(less)-18">&lt; (less)</a></li><li><a href="builtin/numbers.html#&lt;-(less)-18">&lt; (less)</a></li><li><a href="builtin/numbers.html#&lt;=-(less-or-equal)-20">&lt;= (less or equal)</a></li><li><a href="builtin/numbers.html#&lt;=-(less-or-equal)-20">&lt;= (less or equal)</a></li><li><a href="lang/modules.html#&lt;id-import&gt;-40">&lt;id-import&gt;</a></li><li><a href="builtin/numbers.html#==-(equal)-22">== (equal)</a></li><li><a href="builtin/numbers.html#==-(equal)-22">== (equal)</a></li><li><a href="builtin/numbers.html#&gt;-(greater)-19">&gt; (greater)</a></li><li><a href="builtin/numbers.html#&gt;-(greater)-19">&gt; (greater)</a></li><li><a href="builtin/numbers.html#&gt;=-(greater-or-equal)-21">&gt;= (greater or equal)</a></li><li><a href="builtin/numbers.html#&gt;=-(greater-or-equal)-21">&gt;= (greater or equal)</a></li><li><a href="trove/globals.html#Any-50">Any</a></li><li><a href="trove/arrays.html#Array&lt;&gt;-81">Array&lt;&gt;</a></li><li><a href="trove/globals.html#Boolean-51">Boolean</a></li><li><a href="builtin/booleans.html#Boolean-1">Boolean</a></li><li><a href="builtin/booleans.html#Boolean-1">Boolean</a></li><li><a href="lang/brands.html#Brand&lt;a&gt;-48">Brand&lt;a&gt;</a></li><li><a href="trove/csv.html#CSVOptions&lt;&gt;-82">CSVOptions&lt;&gt;</a></li><li><a href="builtin/numbers.html#Exactnum-5">Exactnum</a></li><li><a href="builtin/numbers.html#Exactnum-5">Exactnum</a></li><li><a href="trove/globals.html#Function-56">Function</a></li><li><a href="trove/matrices.html#Matrix&lt;&gt;-92">Matrix&lt;&gt;</a></li><li><a href="trove/globals.html#Method-57">Method</a></li><li><a href="trove/string-dict.html#MutableStringDict&lt;a&gt;-99">MutableStringDict&lt;a&gt;</a></li><li><a href="trove/matrices.html#Nat&lt;&gt;-90">Nat&lt;&gt;</a></li><li><a href="trove/matrices.html#NonZeroNat&lt;&gt;-91">NonZeroNat&lt;&gt;</a></li><li><a href="trove/globals.html#Nothing-55">Nothing</a></li><li><a href="builtin/numbers.html#NumInteger-7">NumInteger</a></li><li><a href="builtin/numbers.html#NumInteger-7">NumInteger</a></li><li><a href="builtin/numbers.html#NumNegative-10">NumNegative</a></li><li><a href="builtin/numbers.html#NumNegative-10">NumNegative</a></li><li><a href="builtin/numbers.html#NumNonNegative-12">NumNonNegative</a></li><li><a href="builtin/numbers.html#NumNonNegative-12">NumNonNegative</a></li><li><a href="builtin/numbers.html#NumNonPositive-11">NumNonPositive</a></li><li><a href="builtin/numbers.html#NumNonPositive-11">NumNonPositive</a></li><li><a href="builtin/numbers.html#NumPositive-9">NumPositive</a></li><li><a href="builtin/numbers.html#NumPositive-9">NumPositive</a></li><li><a href="builtin/numbers.html#NumRational-8">NumRational</a></li><li><a href="builtin/numbers.html#NumRational-8">NumRational</a></li><li><a href="trove/globals.html#Number-52">Number</a></li><li><a href="builtin/numbers.html#Number-4">Number</a></li><li><a href="builtin/numbers.html#Number-4">Number</a></li><li><a href="trove/globals.html#Object-58">Object</a></li><li><a href="builtin/numbers.html#PI-13">PI</a></li><li><a href="builtin/numbers.html#PI-13">PI</a></li><li><a href="trove/globals.html#RawArray-54">RawArray</a></li><li><a href="builtin/raw-arrays.html#RawArray&lt;a&gt;-23">RawArray&lt;a&gt;</a></li><li><a href="builtin/raw-arrays.html#RawArray&lt;a&gt;-23">RawArray&lt;a&gt;</a></li><li><a href="builtin/reactors.html#Reactor&lt;a&gt;-24">Reactor&lt;a&gt;</a></li><li><a href="builtin/reactors.html#Reactor&lt;a&gt;-24">Reactor&lt;a&gt;</a></li><li><a href="builtin/tables.html#Reducer&lt;Acc,-InVal,-OutVal&gt;-36">Reducer&lt;Acc, InVal, OutVal&gt;</a></li><li><a href="builtin/numbers.html#Roughnum-6">Roughnum</a></li><li><a href="builtin/numbers.html#Roughnum-6">Roughnum</a></li><li><a href="builtin/tables.html#Row&lt;&gt;-37">Row&lt;&gt;</a></li><li><a href="trove/data-source.html#Sanitizer&lt;A,-B&gt;-66">Sanitizer&lt;A, B&gt;</a></li><li><a href="trove/sets.html#Set&lt;a&gt;-95">Set&lt;a&gt;</a></li><li><a href="trove/gdrive-sheets.html#Spreadsheet&lt;&gt;-84">Spreadsheet&lt;&gt;</a></li><li><a href="trove/globals.html#String-53">String</a></li><li><a href="builtin/strings.html#String-28">String</a></li><li><a href="trove/string-dict.html#StringDict&lt;a&gt;-98">StringDict&lt;a&gt;</a></li><li><a href="trove/globals.html#Table-59">Table</a></li><li><a href="builtin/tables.html#Table&lt;&gt;-38">Table&lt;&gt;</a></li><li><a href="builtin/tables.html#TableLoader&lt;&gt;-30">TableLoader&lt;&gt;</a></li><li><a href="trove/matrices.html#Vector3D&lt;&gt;-89">Vector3D&lt;&gt;</a></li><li><a href="trove/matrices.html#Vector&lt;&gt;-88">Vector&lt;&gt;</a></li><li><a href="trove/gdrive-sheets.html#Worksheet&lt;&gt;-85">Worksheet&lt;&gt;</a></li><li><a href="trove/world.html#WorldConfig&lt;a&gt;-60">WorldConfig&lt;a&gt;</a></li><li><a href="trove/pprint.html#align-74">align</a></li><li><a href="trove/pprint.html#align-spaces-75">align-spaces</a></li><li><a href="builtin/booleans.html#and-2">and</a></li><li><a href="builtin/booleans.html#and-2">and</a></li><li><a href="trove/pprint.html#blank-70">blank</a></li><li><a href="trove/data-source.html#c-bool-64">c-bool</a></li><li><a href="trove/data-source.html#c-custom-65">c-custom</a></li><li><a href="trove/data-source.html#c-empty-61">c-empty</a></li><li><a href="trove/data-source.html#c-num-63">c-num</a></li><li><a href="trove/data-source.html#c-str-62">c-str</a></li><li><a href="trove/pprint.html#concat-71">concat</a></li><li><a href="trove/csv.html#default-options-83">default-options</a></li><li><a href="builtin/tables.html#difference-32">difference</a></li><li><a href="trove/lists.html#empty-86">empty</a></li><li><a href="trove/sets.html#empty-list-set-96">empty-list-set</a></li><li><a href="trove/sets.html#empty-tree-set-97">empty-tree-set</a></li><li><a href="lang/modules.html#file-41">file</a></li><li><a href="getting-started.html#getting-started-39">getting-started</a></li><li><a href="trove/pprint.html#group-76">group</a></li><li><a href="trove/pprint.html#hardline-69">hardline</a></li><li><a href="trove/pprint.html#if-flat-73">if-flat</a></li><li><a href="lang/modules.html#js-file-42">js-file</a></li><li><a href="builtin/reactors.html#keypress-26">keypress</a></li><li><a href="builtin/reactors.html#keypress-26">keypress</a></li><li><a href="trove/lists.html#link-87">link</a></li><li><a href="builtin/reactors.html#mouse-27">mouse</a></li><li><a href="builtin/reactors.html#mouse-27">mouse</a></li><li><a href="trove/pprint.html#mt-doc-67">mt-doc</a></li><li><a href="lang/modules.html#my-gdrive-43">my-gdrive</a></li><li><a href="trove/pprint.html#nest-72">nest</a></li><li><a href="builtin/booleans.html#or-3">or</a></li><li><a href="builtin/booleans.html#or-3">or</a></li><li><a href="trove/pick.html#pick-none-93">pick-none</a></li><li><a href="trove/pick.html#pick-some-94">pick-some</a></li><li><a href="builtin/tables.html#running-max-34">running-max</a></li><li><a href="builtin/tables.html#running-mean-33">running-mean</a></li><li><a href="builtin/tables.html#running-min-35">running-min</a></li><li><a href="builtin/tables.html#running-sum-31">running-sum</a></li><li><a href="trove/s-exp-structs.html#s-list-77">s-list</a></li><li><a href="trove/s-exp-structs.html#s-num-78">s-num</a></li><li><a href="trove/s-exp-structs.html#s-str-79">s-str</a></li><li><a href="trove/s-exp-structs.html#s-sym-80">s-sym</a></li><li><a href="lang/modules.html#shared-gdrive-44">shared-gdrive</a></li><li><a href="lang/spies.html#generated-tag-49"><tt class="pyretexpr">spy</tt></a></li><li><a href="trove/pprint.html#str-68">str</a></li><li><a href="builtin/reactors.html#time-tick-25">time-tick</a></li><li><a href="builtin/reactors.html#time-tick-25">time-tick</a></li><li><a href="lang/modules.html#url-45">url</a></li><li><a href="lang/modules.html#url-file-46">url-file</a></li><li><a href="lang/use.html#use-context-47">use context</a></li></ul></div></root>
    <hr/>
    The current page is index.html.

    The next page is <a href = "getting-started.html">getting-started.html</a>.
    </div>
  </body>
</html>