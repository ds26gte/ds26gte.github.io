<!doctype html>
<html lang="en">
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.8/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-sRIl4kxILFvY47J16cr9ZwB07vP4J8+LH7qKQnuqkuIAvNWLzeN8tE5YBujZqJLB" crossorigin="anonymous">
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.8/dist/js/bootstrap.bundle.min.js" integrity="sha384-FKyoEForCGlyvwx9Hj09JcYn3nv7wiPVlz7YYwJrWVcXK/BmnVDxM+D2scQbITxI" crossorigin="anonymous"></script>
  <script type="module" src="../embed-api.js"></script>
  <link rel="stylesheet" href="../styles.css">
  <head>
    <title>plot</title>
  </head>
  <body>
    <div class="container">
    <root><div><h1 id="plot" toclevel="1" tocentry="yes"></h1><div><p>Usage:</p><p><tt>include plot</tt></p><p><tt>import plot as ...</tt></p></div><div class="margin-note">Note that the plot library has been completely rewritten as the <a href="trove/chart.html#chart"></a> library to use Google Charts, which would allow us to support more features and more types of charts easily. The current plot library will still be here for a period of time for those who still use it, but we will not support it further.</div><p>The Pyret Plot library. It consists of plot, chart, and data visualization tools. The visualization will appear in a separate dialog window, and/or be returned as an <a href="../trove/image.html#Image"><tt class="pyretexpr">Image</tt></a>.</p><ul><li>To close the dialog, click the close button on the title bar or press <tt class="pyretexpr">esc</tt></li><li>To save a snapshot of the visualization, click the save button on the title bar and choose a location to save the image</li></ul><p>Every function in this library is available on the <tt class="pyretexpr">plot</tt> module object. For example, if you used <tt class="pyretexpr">import plot as P</tt>, you would write <tt class="pyretexpr">P.display-function</tt> to access <tt class="pyretexpr">display-function</tt> below. If you used <tt class="pyretexpr">include</tt>, then you can refer to identifiers without needing to prefix with <tt class="pyretexpr">P.</tt></p><h2 id="The-Plot-Type" toclevel="2" tocentry="yes">The Plot Type</h2><p>(If you do not wish to customize the plotting, feel free to skip this section. There will be a link referring back to this section when necessary)</p><pre class="pyret-display"><span><a name="Plot"></a></span><span>data <a href="../trove/plot.html#Plot">Plot</a></span>
<div><tt>   | <span><a href="../trove/plot.html#function-plot">function-plot</a>(<span>f :: <span><a href="../trove/globals.html#Number">Number</a> -&gt; <a href="../trove/globals.html#Number">Number</a></span></span>, <span>options :: <a href="../trove/plot.html#PlotOptions">PlotOptions</a></span>)</span></tt>
<tt>   | <span><a href="../trove/plot.html#line-plot">line-plot</a>(<span>points :: <a href="../trove/globals.html#Table">Table</a></span>, <span>options :: <a href="../trove/plot.html#PlotOptions">PlotOptions</a></span>)</span></tt>
<tt>   | <span><a href="../trove/plot.html#scatter-plot">scatter-plot</a>(<span>points :: <a href="../trove/globals.html#Table">Table</a></span>, <span>options :: <a href="../trove/plot.html#PlotOptions">PlotOptions</a></span>)</span></tt></div><tt>end</tt></pre><div class="insetpara nested"><div><p><span><a name="function-plot"></a></span></p><pre class="pyret-display"><a href="../trove/plot.html#function-plot">function-plot</a> :: (<span>f :: <span><a href="../trove/globals.html#Number">Number</a> -&gt; <a href="../trove/globals.html#Number">Number</a></span></span>, <span>options :: <a href="../trove/plot.html#PlotOptions">PlotOptions</a></span>) -&gt; <a href="../trove/plot.html#Plot">Plot</a></pre><p>A graph of a function of one variable.</p><div><pre>f</pre><p>A function to be graphed. The function doesn’t need to be total: it can yield an error for some <tt class="pyretexpr">x</tt> (such as division by zero or resulting in an imaginary number).</p></div><div><pre>options</pre></div><p></p></div><div><p><span><a name="line-plot"></a></span></p><pre class="pyret-display"><a href="../trove/plot.html#line-plot">line-plot</a> :: (<span>points :: <a href="../trove/globals.html#Table">Table</a></span>, <span>options :: <a href="../trove/plot.html#PlotOptions">PlotOptions</a></span>) -&gt; <a href="../trove/plot.html#Plot">Plot</a></pre><p>A line plot or line chart, used to display “information as a series of data points called `markers’ connected by straight line segments.” (see <url>https://en.wikipedia.org/wiki/Line_chart</url>)</p><div><pre>points</pre><p>A table of two columns: <span><tt class="pyretexpr">x</tt> :: <a href="../trove/globals.html#Number">Number</a></span> and <span><tt class="pyretexpr">y</tt> :: <a href="../trove/globals.html#Number">Number</a></span></p><p>Because two consecutive data points will be connected by a line segment as they are, the rows of the table should have been sorted by the x-value.</p></div><div><pre>options</pre></div><p></p></div><div><p><span><a name="scatter-plot"></a></span></p><pre class="pyret-display"><a href="../trove/plot.html#scatter-plot">scatter-plot</a> :: (<span>points :: <a href="../trove/globals.html#Table">Table</a></span>, <span>options :: <a href="../trove/plot.html#PlotOptions">PlotOptions</a></span>) -&gt; <a href="../trove/plot.html#Plot">Plot</a></pre><p>A scatter plot or scatter chart, used “to display values for two variables for a set of data.” (see <url>https://en.wikipedia.org/wiki/Scatter_plot</url>)</p><div><pre>points</pre><p>A table of two columns: <span><tt class="pyretexpr">x</tt> :: <a href="../trove/globals.html#Number">Number</a></span> and <span><tt class="pyretexpr">y</tt> :: <a href="../trove/globals.html#Number">Number</a></span>. The order of rows in this table does not matter.</p></div><div><pre>options</pre></div><p></p></div></div><div><p><b>Examples:</b></p><pre>my-plot = function-plot(lam(x): num-sqrt(x + 1) end, default-options)</pre></div><h2 id="Plot-Functions" toclevel="2" tocentry="yes">Plot Functions</h2><p>All plot functions will populate a dialog with controllers (textboxes and buttons) on the right which can be used to change the window boundaries and number of sample points. To zoom in at a specific region, you can click and drag on the plotting region. To zoom out, press <tt class="pyretexpr">shift</tt> and click on the plotting region. To reset to the initial window boundaries, simply click on the plotting region.</p><p>All changes by the controllers will not take an effect until the redraw button is pressed.</p><p>The window boundaries could be any kind of real number (e.g., fraction, roughnum). However, when processing, it will be converted to a decimal number. For example, <tt class="pyretexpr">1/3</tt> will be converted to <tt class="pyretexpr">0.3333...33</tt> which is actually <tt class="pyretexpr">3333...33/10000...00</tt>. This incurs the numerical imprecision, but allows us to read the number easily.</p><p>For function plot, we make a deliberate decision to show points (the tendency of the function) instead of connecting lines between them. This is to avoid the problem of inaccurate plotting causing from, for example, discontinuity of the function, or a function which oscillates infinitely.</p><div><p><span><a name="display-multi-plot"></a></span></p><pre class="pyret-display"><a href="../trove/plot.html#display-multi-plot">display-multi-plot</a> :: <span><span><a href="../trove/lists.html#List">List</a>&lt;<span><a href="../trove/plot.html#Plot">Plot</a></span>&gt;</span>, <a href="../trove/plot.html#PlotWindowOptions">PlotWindowOptions</a> -&gt; <a href="../trove/image.html#Image">Image</a></span></pre><p>Display all <a href="../trove/plot.html#Plot"><tt class="pyretexpr">Plot</tt></a>s in <tt class="pyretexpr">lst</tt> on a window with the configuration from <tt class="pyretexpr">options</tt>.</p><div><p><b>Examples:</b></p><pre>import color as C
p1 = function-plot(lam(x): x * x end, _.{color: C.red})
p2 = line-plot(table: x :: Number, y :: Number
    row: 1, 1
    row: 2, 4
    row: 3, 9
    row: 4, 16
  end, _.{color: C.green})
display-multi-plot(
  [list: p1, p2],
  _.{
    title: 'quadratic function and a scatter plot',
    x-min: 0,
    x-max: 20,
    y-min: 0,
    y-max: 20
  })</pre></div><p>The above example will plot a function <tt class="pyretexpr">y = x^2</tt> using red color, and show a line chart connecting points in the table using green color. The left, right, top, bottom window boundary are 0, 20, 0, 20 respectively.</p></div><div><p><span><a name="display-function"></a></span></p><pre class="pyret-display"><a href="../trove/plot.html#display-function">display-function</a> :: <span><a href="../trove/globals.html#String">String</a>, <span><a href="../trove/globals.html#Number">Number</a> -&gt; <a href="../trove/globals.html#Number">Number</a></span> -&gt; <a href="../trove/image.html#Image">Image</a></span></pre><p>A shorthand to construct an <a href="../trove/plot.html#function-plot">function-plot</a> with default options and then display it. See <a href="../trove/plot.html#function-plot">function-plot</a> for more information.</p><div><p><b>Examples:</b></p><pre>NUM_E = ~2.71828
display-function('converge to 1', lam(x): 1 - num-expt(NUM_E, 0 - x) end)</pre></div></div><div><p><span><a name="display-line"></a></span></p><pre class="pyret-display"><a href="../trove/plot.html#display-line">display-line</a> :: <span><a href="../trove/globals.html#String">String</a>, <a href="../trove/globals.html#Table">Table</a> -&gt; <a href="../trove/image.html#Image">Image</a></span></pre><p>A shorthand to construct a <a href="../trove/plot.html#line-plot">line-plot</a> with default options and then display it. See <a href="../trove/plot.html#line-plot">line-plot</a> for more information.</p><div><p><b>Examples:</b></p><pre>display-line('My line', table: x, y
  row: 1, 2
  row: 2, 10
  row: 2.1, 3
  row: 2.4, 5
  row: 5, 1
end)</pre></div></div><div><p><span><a name="display-scatter"></a></span></p><pre class="pyret-display"><a href="../trove/plot.html#display-scatter">display-scatter</a> :: <span><a href="../trove/globals.html#String">String</a>, <a href="../trove/globals.html#Table">Table</a> -&gt; <a href="../trove/image.html#Image">Image</a></span></pre><p>A shorthand to construct a <a href="../trove/plot.html#scatter-plot">scatter-plot</a> with default options and then display it. See <a href="../trove/plot.html#scatter-plot">scatter-plot</a> for more information.</p><div><p><b>Examples:</b></p><pre>display-scatter('My scatter plot', table: x, y
  row: 1, 2
  row: 1, 3.1
  row: 4, 1
  row: 7, 3
  row: 4, 6
  row: 2, 5
end)</pre></div></div><h2 id="Visualization-Functions" toclevel="2" tocentry="yes">Visualization Functions</h2><div><p><span><a name="histogram"></a></span></p><pre class="pyret-display"><a href="../trove/plot.html#histogram">histogram</a> :: <span><a href="../trove/globals.html#Table">Table</a>, <a href="../trove/globals.html#Number">Number</a>, <a href="../trove/plot.html#PlotWindowOptions">PlotWindowOptions</a> -&gt; <a href="../trove/image.html#Image">Image</a></span></pre><p>Display a histogram with <tt class="pyretexpr">n</tt> bins using data from <tt class="pyretexpr">tab</tt> which is a table with one column: <span><tt class="pyretexpr">value</tt> :: <a href="../trove/globals.html#Number">Number</a></span>. The range of the histogram is automatically inferred from the data.</p><div><p><b>Examples:</b></p><pre>histogram(table: value :: Number
  row: 1
  row: 1.2
  row: 2
  row: 3
  row: 10
  row: 3
  row: 6
  row: -1
end, 4, _.{title: "A histogram with 4 bins"})</pre></div></div><div><p><span><a name="pie-chart"></a></span></p><pre class="pyret-display"><a href="../trove/plot.html#pie-chart">pie-chart</a> :: <span><a href="../trove/globals.html#Table">Table</a>, <a href="../trove/plot.html#PlotWindowOptions">PlotWindowOptions</a> -&gt; <a href="../trove/image.html#Image">Image</a></span></pre><p>Display a pie chart using data from <tt class="pyretexpr">tab</tt> which is a table with two columns: <span><tt class="pyretexpr">label</tt> :: <a href="../trove/globals.html#String">String</a></span> and <span><tt class="pyretexpr">value</tt> :: <a href="../trove/globals.html#Number">Number</a></span>.</p><div><p><b>Examples:</b></p><pre>pie-chart(table: label, value
  row: 'EU', 10.12
  row: 'Asia', 93.1
  row: 'America', 56.33
  row: 'Africa', 101.1
end, _.{title: "A pie chart"})</pre></div></div><div><p><span><a name="bar-chart"></a></span></p><pre class="pyret-display"><a href="../trove/plot.html#bar-chart">bar-chart</a> :: <span><a href="../trove/globals.html#Table">Table</a>, <a href="../trove/plot.html#PlotWindowOptions">PlotWindowOptions</a> -&gt; <a href="../trove/image.html#Image">Image</a></span></pre><p>Display a bar chart using data from <tt class="pyretexpr">tab</tt> which is a table with two columns: <span><tt class="pyretexpr">label</tt> :: <a href="../trove/globals.html#String">String</a></span> and <span><tt class="pyretexpr">value</tt> :: <a href="../trove/globals.html#Number">Number</a></span>.</p><div><p><b>Examples:</b></p><pre>bar-chart(
  table: label, value
    row: 'A', 11
    row: 'B', 1
    row: 'C', 3
    row: 'D', 4
    row: 'E', 9
    row: 'F', 3
  end, _.{title: 'Frequency of letters'})</pre></div></div><div><p><span><a name="grouped-bar-chart"></a></span></p><pre class="pyret-display"><a href="../trove/plot.html#grouped-bar-chart">grouped-bar-chart</a> :: <span><a href="../trove/globals.html#Table">Table</a>, <span><a href="../trove/lists.html#List">List</a>&lt;<span><a href="../trove/globals.html#String">String</a></span>&gt;</span>, <a href="../trove/plot.html#PlotWindowOptions">PlotWindowOptions</a> -&gt; <a href="../trove/image.html#Image">Image</a></span></pre><p>Display a bar chart using data from <tt class="pyretexpr">tab</tt> which is a table with two columns: <span><tt class="pyretexpr">label</tt> :: <a href="../trove/globals.html#String">String</a></span> and <span><tt class="pyretexpr">values</tt> :: <span><a href="../trove/lists.html#List">List</a>&lt;<span><a href="../trove/globals.html#Number">Number</a></span>&gt;</span></span>. <tt class="pyretexpr">legends</tt> indicates the legends of the data where the first value of the table column <tt class="pyretexpr">values</tt> corresponds to the first legend in <tt class="pyretexpr">legends</tt>, and so on.</p></div><div><p><b>Examples:</b></p><pre>grouped-bar-chart(
  table: label, values
    row: 'CA', [list: 2704659, 4499890, 2159981, 3853788, 10604510, 8819342, 4114496]
    row: 'TX', [list: 2027307, 3277946, 1420518, 2454721, 7017731, 5656528, 2472223]
    row: 'NY', [list: 1208495, 2141490, 1058031, 1999120, 5355235, 5120254, 2607672]
    row: 'FL', [list: 1140516, 1938695, 925060, 1607297, 4782119, 4746856, 3187797]
    row: 'IL', [list: 894368, 1558919, 725973, 1311479, 3596343, 3239173, 1575308]
    row: 'PA', [list: 737462, 1345341, 679201, 1203944, 3157759, 3414001, 1910571]
  end, [list:
    'Under 5 Years',
    '5 to 13 Years',
    '14 to 17 Years',
    '18 to 24 Years',
    '25 to 44 Years',
    '45 to 64 Years',
    '65 Years and Over'],
  _.{title: 'Populations of different states by age group'})</pre></div><h2 id="The-Options-Types-and-Default-Values" toclevel="2" tocentry="yes">The Options Types and Default Values</h2><p>The <tt class="pyretexpr">PlotOptions</tt> and <tt class="pyretexpr">PlotWindowOptions</tt> type is actually a function type which consumes a default config and produces a desired config.</p><p>To use a default config, you could construct</p><pre class="nothing_special">lam(default-configs): default-configs end</pre><p>which consumes a default config and merely returns it. We provide a value <tt class="pyretexpr">default-options</tt> which is the polymorphic identity function for convenience, which has both type <tt class="pyretexpr">PlotOptions</tt> and <tt class="pyretexpr">PlotWindowOptions</tt></p><p>A new Options can be constructed by the using <a href="lang/forms.html#s:extend-expr">Extend Expressions</a> on the default config.</p><pre class="nothing_special">new-options = lam(default-configs): default-configs.{val1: ..., val2: ...} end</pre><p>Combining the <a href="lang/forms.html#s:extend-expr">Extend Expressions</a> with the <a href="lang/forms.html#s:curried-apply-expr">Curried Application Expressions</a>, the above can be rewritten as:</p><pre class="nothing_special">new-options = _.{val1: ..., val2: ...}</pre><div><p><span><a name="PlotOptions"></a></span></p><pre class="pyret-display">PlotOptions</pre><p>A config associated with <a href="../trove/plot.html#PlotOptions"><tt class="pyretexpr">PlotOptions</tt></a> consists of the following fields: <span>{<span><tt class="pyretexpr">color</tt> :: <a href="../trove/color.html#Color">Color</a></span>}</span></p><p>The default config is <span>{<tt class="pyretexpr">color: blue</tt>}</span></p><div><p><b>Examples:</b></p><pre>import color as C
my-plot-options-1 = _.{color: C.red}
my-plot-options-2 = default-options</pre></div></div><div><p><span><a name="PlotWindowOptions"></a></span></p><pre class="pyret-display">PlotWindowOptions</pre><p>A config associated with <a href="../trove/plot.html#PlotWindowOptions"><tt class="pyretexpr">PlotWindowOptions</tt></a> consists of the following fields: <span>{<span><tt class="pyretexpr">x-min</tt> :: <a href="../trove/globals.html#Number">Number</a></span>, <span><tt class="pyretexpr">x-max</tt> :: <a href="../trove/globals.html#Number">Number</a></span>, <span><tt class="pyretexpr">y-min</tt> :: <a href="../trove/globals.html#Number">Number</a></span>, <span><tt class="pyretexpr">y-max</tt> :: <a href="../trove/globals.html#Number">Number</a></span>, <span><tt class="pyretexpr">num-samples</tt> :: <a href="../trove/globals.html#Number">Number</a></span>, <span><tt class="pyretexpr">infer-bounds</tt> :: <a href="../trove/globals.html#Boolean">Boolean</a></span>, <span><tt class="pyretexpr">interact</tt> :: <a href="../trove/globals.html#Boolean">Boolean</a></span>, <span><tt class="pyretexpr">title</tt> :: <a href="../trove/globals.html#String">String</a></span>}</span></p><p>The default config is <span>{<tt class="pyretexpr">x-min: -10</tt>, <tt class="pyretexpr">x-max: 10</tt>, <tt class="pyretexpr">y-min: -10</tt>, <tt class="pyretexpr">y-max: 10</tt>, <tt class="pyretexpr">num-samples: 1000</tt>, <tt class="pyretexpr">infer-bounds: false</tt>, <tt class="pyretexpr">interact: true</tt>, <tt class="pyretexpr">title: “”</tt>}</span></p><p>If <tt class="pyretexpr">infer-bounds</tt> is true, <tt class="pyretexpr">x-min</tt>, <tt class="pyretexpr">x-max</tt>, <tt class="pyretexpr">y-min</tt>, <tt class="pyretexpr">y-max</tt> will be inferred, and old values will be overwritten.</p><p><tt class="pyretexpr">num-samples</tt> is to control the number of sample points for <a href="../trove/plot.html#function-plot">function-plot</a>s.</p><p><tt class="pyretexpr">title</tt> is displayed at the top of the plot window.</p><p><tt class="pyretexpr">interact</tt>, when <tt class="pyretexpr">true</tt> (the default) shows a separate window containing the plot.  When <tt class="pyretexpr">false</tt>, the window does not appear; this is useful for simply getting an <a href="../trove/image.html#Image"><tt class="pyretexpr">Image</tt></a> from the plot.</p></div></div></root>
    <hr/>
    The current page is trove/plot.html.
    The previous page is <a href = "../trove/chart.html">../trove/chart.html</a>.
    The next page is <a href = "../trove/statistics.html">../trove/statistics.html</a>.
    </div>
  </body>
</html>