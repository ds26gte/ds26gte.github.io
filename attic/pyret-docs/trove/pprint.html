<!doctype html>
<html lang="en">
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.8/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-sRIl4kxILFvY47J16cr9ZwB07vP4J8+LH7qKQnuqkuIAvNWLzeN8tE5YBujZqJLB" crossorigin="anonymous">
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.8/dist/js/bootstrap.bundle.min.js" integrity="sha384-FKyoEForCGlyvwx9Hj09JcYn3nv7wiPVlz7YYwJrWVcXK/BmnVDxM+D2scQbITxI" crossorigin="anonymous"></script>
  <script type="module" src="../embed-api.js"></script>
  <link rel="stylesheet" href="../styles.css">
  <head>
    <title>Untitled</title>
  </head>
  <body>
    <div class="container">
    <root><div><h1 id="pprint" toclevel="1" tocentry="yes"></h1><p>        </p><h2 id="The-PPrintDoc-Datatype" toclevel="2" tocentry="yes">The PPrintDoc Datatype</h2><p>  This datatype is <i>not</i> exported directly to users; there are   <a href="trove/pprint.html#Functions">easier-to-use   helper functions</a> that are exported instead.   </p><pre class="pyret-display"><span>data PPrintDoc:</span>
<div><tt>   | <span>mt-doc(<span>flat-width :: Number</span>, <span>has-hardline :: Boolean</span>)</span></tt>
<tt>   | <span>str(<span>s :: String</span>, <span>flat-width :: Number</span>, <span>has-hardline :: Boolean</span>)</span></tt>
<tt>   | <span>hardline(<span>has-hardline :: Boolean</span>)</span></tt>
<tt>   | <span>blank(<span>n :: Number</span>, <span>flat-width :: Number</span>, <span>has-hardline :: Boolean</span>)</span></tt>
<tt>   | <span>concat(<span>fst :: PPrintDoc</span>, <span>snd :: PPrintDoc</span>, <span>flat-width :: Number</span>, <span>has-hardline :: Boolean</span>)</span></tt>
<tt>   | <span>nest(<span>indent :: Number</span>, <span>d :: PPrintDoc</span>, <span>flat-width :: Number</span>, <span>has-hardline :: Boolean</span>)</span></tt>
<tt>   | <span>if-flat(<span>flat :: PPrintDoc</span>, <span>vert :: PPrintDoc</span>, <span>flat-width :: Number</span>, <span>has-hardline :: Boolean</span>)</span></tt>
<tt>   | <span>align(<span>d :: PPrintDoc</span>, <span>flat-width :: Number</span>, <span>has-hardline :: Boolean</span>)</span></tt>
<tt>   | <span>align-spaces(<span>n :: Number</span>, <span>flat-width :: Number</span>, <span>has-hardline :: Boolean</span>)</span></tt>
<tt>   | <span>group(<span>D :: PPrintDoc</span>, <span>flat-width :: Number</span>, <span>has-hardline :: Boolean</span>)</span></tt></div><tt>end</tt></pre><p>  </p><div class="insetpara"><p>Each of the raw constructors for <tt class="pyretexpr">PPrintDoc</tt> contains two      fields that memoize how wide the document is when printed      flat, and whether the document contains a hard linebreak.</p><div><p><span><a name="mt-doc-85"></a></span></p><div class="pyret-display">mt-doc :: <span>(flat-width :: Number)</span> -&gt; PPrintDoc</div><p>Represents an empty document.</p><p></p></div><div><p><span><a name="str-86"></a></span></p><div class="pyret-display">str :: <span>(s :: String)</span> -&gt; PPrintDoc</div><p>Represents a simple string, that cannot be broken into smaller pieces.  Any whitespace in this string is treated as a normal, unbreakable character.</p><p></p></div><div><p><span><a name="hardline-87"></a></span></p><div class="pyret-display">hardline :: <span>(has-hardline :: Boolean)</span> -&gt; PPrintDoc</div><p>Forces a line break: no group containing this document can print flat.</p><p></p></div><div><p><span><a name="blank-88"></a></span></p><div class="pyret-display">blank :: <span>(n :: Number)</span> -&gt; PPrintDoc</div><p>Represents <math>n</math> spaces.  (This is simply a memory optimization over storing a <tt class="pyretexpr">str</tt> of the actual whitespace string.)</p><p></p></div><div><p><span><a name="concat-89"></a></span></p><div class="pyret-display">concat :: <span>(fst :: PPrintDoc)</span> -&gt; PPrintDoc</div><p>Represents printing two documents, one after another.  PPrintDoc both documents will be printed in flat mode, or neither will.</p><p></p></div><div><p><span><a name="nest-90"></a></span></p><div class="pyret-display">nest :: <span>(indent :: Number)</span> -&gt; PPrintDoc</div><p>Adds <math>n</math> spaces to any line breaks that result from printing the given document in vertical mode.  This forms an indented paragraph.</p><p></p></div><div><p><span><a name="if-flat-91"></a></span></p><div class="pyret-display">if-flat :: <span>(flat :: PPrintDoc)</span> -&gt; PPrintDoc</div><p>Allows choosing between two documents, depending on whether the document is being printed flat or not.  This can be used to implement soft line breaks, which turn into whitespace when flat.</p><p></p></div><div><p><span><a name="align-92"></a></span></p><div class="pyret-display">align :: <span>(d :: PPrintDoc)</span> -&gt; PPrintDoc</div><p>This aligns its nested content to the current column.  (Unlike <tt class="pyretexpr">nest</tt>, which adds or removes indentation relative to the current indentation, this aligns to the current position regardless of current indentation.)</p><p></p></div><div><p><span><a name="align-spaces-93"></a></span></p><div class="pyret-display">align-spaces :: <span>(n :: Number)</span> -&gt; PPrintDoc</div><p>In flat mode, this vanishes, but in vertical mode it adds a linebreak and a given number of spaces to the next line.</p><p></p></div><div><p><span><a name="group-94"></a></span></p><div class="pyret-display">group :: <span>(D :: PPrintDoc)</span> -&gt; PPrintDoc</div><p>This applies ``scoping’’ to the current nesting level or flatness mode.  If a group can be typeset  in flat mode, it will, regardless of the surrounding mode.</p><p></p></div></div><h2 id="PPrintDoc-Methods" toclevel="2" tocentry="yes">PPrintDoc Methods</h2><p>These methods are available on all <tt class="pyretexpr">PPrintDoc</tt>s.</p><div class="pyret-display"><tt>._plus :: contract</tt></div><p>Combines two <tt class="pyretexpr">PPrintDoc</tt>s into a single document.</p><div class="pyret-display"><tt>._output :: contract</tt></div><p>Internal method for displaying the structure of this <tt class="pyretexpr">PPrintDoc</tt>.</p><div class="pyret-display"><tt>.pretty :: contract</tt></div><p>Renders this <tt class="pyretexpr">PPrintDoc</tt> at the desired line width.  Returns a list of the individual lines of output.</p><p>  </p><h2 id="Functions" toclevel="2" tocentry="yes">Functions</h2><p>  </p><div><pre class="pyret-display">str :: </pre><p>Constructs a document containing the given string.  Any whitespace in this string is considered unbreakable.</p></div><p>  </p><div><pre class="pyret-display">number :: </pre><p>Constructs a document containing the number <math>n</math> printed as a string.  This is merely a convenient shorthand for <tt class="pyretexpr">str</tt><tt class="pyretexpr">(</tt><tt class="pyretexpr">tostring&lt;global&gt;</tt><tt class="pyretexpr">(n))</tt>.</p></div><p>  </p><div><pre class="pyret-display">blank :: </pre><p>Produces the requested number of non-breaking spaces.</p></div><p>  </p><div><pre class="pyret-display">sbreak :: </pre><p>When typeset in flat mode, this produces the requested number of non-breaking spaces.  When typeset in vertical mode, produces a single linebreak.</p></div><p>  </p><div><pre class="pyret-display">concat :: </pre><p>Combines two documents into one, consecutively.</p></div><p>  </p><div><pre class="pyret-display">nest :: </pre><p>Adds <math>n</math> to the current indentation level while typesetting the given document.</p></div><p>  </p><div><pre class="pyret-display">if-flat :: </pre><p>Allows choosing between two documents, depending on whether this combined document is typeset in flat mode or not.</p></div><p>  </p><div><pre class="pyret-display">group :: </pre><p>Wraps the given document in a group, so that it can be typeset in flat mode (if possible) even if the surrounding document is in vertical mode.  This helps ensure that linebreaks happen at the ``outer’’ layers of the document, and nested groups stay intact whenever possible.</p></div><p>  </p><div><pre class="pyret-display">flow :: </pre><p>Combines a given list of documents with soft line breaks. When given a list of words, for example, this produces a paragraph that automatially line-wraps to fit the available space.</p></div><p>  </p><div><pre class="pyret-display">vert :: </pre><p>Combines a given list of documents with hard line breaks. Note that unless the individual items are <tt class="pyretexpr">group</tt>ed, this will cause them all to be typeset vertically as well.</p></div><p>  </p><div><pre class="pyret-display">flow-map :: </pre><p>A shorthand to <tt class="pyretexpr">maplists</tt> a given list of values into a list of documents, then combine them with some separator via <tt class="pyretexpr">separate</tt>.</p></div><p>  </p><div><pre class="pyret-display">parens :: </pre><p>Surrounds the given document in parentheses, and surrounds them all in a <tt class="pyretexpr">group</tt>.</p></div><p>  </p><div><pre class="pyret-display">braces :: </pre><p>Surrounds the given document in curly braces, and surrounds them all in a <tt class="pyretexpr">group</tt>.</p></div><p>  </p><div><pre class="pyret-display">brackets :: </pre><p>Surrounds the given document in square brackets, and surrounds them all in a <tt class="pyretexpr">group</tt>.</p></div><p>  </p><div><pre class="pyret-display">dquote :: </pre><p>Surrounds the given document in double-quotes, and surrounds them all in a <tt class="pyretexpr">group</tt>.</p></div><p>  </p><div><pre class="pyret-display">squote :: </pre><p>Surrounds the given document in single-quotes, and surrounds them all in a <tt class="pyretexpr">group</tt>.</p></div><p>  </p><div><pre class="pyret-display">align :: </pre><p>Aligns the given document to the current column, wherever it might be.</p></div><p>  </p><div><pre class="pyret-display">hang :: </pre><p>Typesets the given document with a hanging indent of the given length.  The first line is typeset at the current position, and the remaining lines are all indented.</p></div><p>  </p><div><pre class="pyret-display">prefix :: </pre><p>Takes two documents and typesets them together as a pyret-id{group}.  If they can fit on one line, this is equivalent to concatenating them.  Otherwise, this increases the <tt class="pyretexpr">nest</tt>ing level of the second document by <math>n</math>.</p></div><p>  </p><div><pre class="pyret-display">infix :: </pre><p>Typesets infix operators as a <tt class="pyretexpr">group</tt>, preferring to break lines after the operator.  Surrounds the operator with <math>b</math> blank spaces on either side, and indents any new lines by <math>n</math> spaces.</p></div><p>  </p><div><pre class="pyret-display">infix-break :: </pre><p>Typesets infix operators as a <tt class="pyretexpr">group</tt>, preferring to break lines before the operator.  Surrounds the operator with <math>b</math> blank spaces on either side, and indents any new lines by <math>n</math> spaces.</p></div><p>  </p><div><pre class="pyret-display">separate :: </pre><p>Interleaves each document of the provided list with the given separator document.</p></div><p>  </p><div><pre class="pyret-display">surround :: </pre><p>Given a document with many potential line breaks, and an opening and a closing document to surround it with, this function produces a document that either typesets everything on one line with <math>b</math> spaces between the contents and the enclosing documents, or typesets the opening, closing and contents on separate lines and indents the contents by <math>n</math>. Useful for typesetting things like data definitions, where each variant goes on its own line, as does the <tt class="pyretexpr">data</tt> and <tt class="pyretexpr">end</tt> keywords.</p></div><p>  </p><div><pre class="pyret-display">soft-surround :: </pre><p>Like <tt class="pyretexpr">surround</tt>, but tries to keep the closing document on the same line as the last line of the contents.  Useful for typesetting things like s-expressions, where the closing parentheses look better on the last line of the content.</p></div><p>  </p><div><pre class="pyret-display">surround-separate :: </pre><p>A combination of <tt class="pyretexpr">surround</tt> and <tt class="pyretexpr">separate</tt>.  Useful for typesetting delimited, comma-separated lists of items, or similar other other output.</p></div><p>  </p><div><pre class="pyret-display">label-align-surround :: </pre><p>Similar to <tt class="pyretexpr">soft-surround</tt>, but with different alignment.</p></div></div></root>
    <hr/>
    The current page is trove/pprint.html.
    The previous page is <a href = "../trove/srcloc.html">../trove/srcloc.html</a>.
    The next page is <a href = "../trove/s-exp.html">../trove/s-exp.html</a>.
    </div>
  </body>
</html>