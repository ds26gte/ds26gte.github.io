<!doctype html>
<html lang="en">
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.8/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-sRIl4kxILFvY47J16cr9ZwB07vP4J8+LH7qKQnuqkuIAvNWLzeN8tE5YBujZqJLB" crossorigin="anonymous">
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.8/dist/js/bootstrap.bundle.min.js" integrity="sha384-FKyoEForCGlyvwx9Hj09JcYn3nv7wiPVlz7YYwJrWVcXK/BmnVDxM+D2scQbITxI" crossorigin="anonymous"></script>
  <script type="module" src="../embed-api.js"></script>
  <link rel="stylesheet" href="../styles.css">
  <head>
    <title>Untitled</title>
  </head>
  <body>
    <div class="container">
    <root><div><h1 id="s-exp" toclevel="1" tocentry="yes"></h1><p>  </p><p>This module re-exports the constructors from S-Exp, which defines the result of parsing an s-exp.</p><p>  </p><div><pre class="pyret-display">read-s-exp :: (<span>sexp-str :: </span>) -&gt; return</pre><p>    Reads an <i>s-expression</i> as a string, and returns it as a Pyret value.</p><p>    An s-expression is a string that satisfies the following grammar:</p><p>    </p><pre class="nothing_special">s-exp = "(" s-exp ... ")"
      | &lt;number&gt;
      | &lt;string&gt;
      | &lt;id&gt;</pre><p>    The first form parses to a s-list containing the nested     sub-expression results.  Numbers become s-nums, strings become     s-strs, and all other names not inside quotes     become s-syms.</p><pre>import s-exp as S

p = S.read-s-exp
s-list = S.s-list
s-num = S.s-num
s-str = S.s-str
s-sym = S.s-sym

check:
  p("()") is s-list(empty)
  p("(5)") is s-list([list: s-num(5)])
  p("(5 4)") is s-list([list: s-num(5), s-num(4)])
  p("(a 5)") is s-list([list: s-sym("a"), s-num(5)])
  p("a") is s-sym("a")
  p("\"a\"") is s-str("a")
  p("(a (b c))") is
    s-list([list:
      s-sym("a"),
      s-list([list: s-sym("b"), s-sym("c")])
    ])
  p("(\"a\" (5 (4) ()) \"b\")") is
    s-list([list:
      s-str("a"),
      s-list([list:
        s-num(5),
        s-list([list: s-num(4)]),
        s-list(empty)
      ]),
      s-str("b")
    ])

  p("-5") is s-num(-5)
  p("-4.4") is s-num(-4.4)
  p("-3.") is s-num(-3.0)
  # Make sure bignums parse correctly
  p(num-tostring(num-expt(100, 100))) is
    s-num(num-expt(100, 100))
  p("-abc3.3") is s-sym("-abc3.3")

  p("())") raises "Invalid"
  p("('a' 5)") raises "'quote'"
  p("(a") raises "Invalid"
  p(")") raises "Invalid"
  p("('a)") raises "Invalid"
  p("(()") raises "Invalid"
  p("(a')") raises "Invalid"

end</pre></div></div></root>
    <hr/>
    The current page is trove/s-exp.html.
    The previous page is <a href = "../trove/pprint.html">../trove/pprint.html</a>.
    The next page is <a href = "../trove/s-exp-structs.html">../trove/s-exp-structs.html</a>.
    </div>
  </body>
</html>