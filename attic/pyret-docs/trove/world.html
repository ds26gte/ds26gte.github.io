<!doctype html>
<html lang="en">
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.8/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-sRIl4kxILFvY47J16cr9ZwB07vP4J8+LH7qKQnuqkuIAvNWLzeN8tE5YBujZqJLB" crossorigin="anonymous">
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.8/dist/js/bootstrap.bundle.min.js" integrity="sha384-FKyoEForCGlyvwx9Hj09JcYn3nv7wiPVlz7YYwJrWVcXK/BmnVDxM+D2scQbITxI" crossorigin="anonymous"></script>
  <script type="module" src="../embed-api.js"></script>
  <link rel="stylesheet" href="../styles.css">
  <head>
    <title>Untitled</title>
  </head>
  <body>
    <div class="container">
    <root><div><h1 id="world" toclevel="1" tocentry="yes"></h1><p><centered><p><bold>This library is archived.</bold></p><p><i>The <a href="builtin/reactors.html#reactors"></a> library provides a significantly improved version of this library. We recommend that you use that instead.</i></p></centered></p><p>Pyret’s world library facilitates creating animated time-based simulation and interactive programs.</p><p>Handler functions written for <tt class="pyretexpr">big-bang</tt> are compatible with <tt class="pyretexpr">reactors</tt>, so it is easy to start with <tt class="pyretexpr">big-bang</tt> and move to <tt class="pyretexpr">reactors</tt> if you need their advanced features.</p><p>  <margin-note><p>The world model is based on the universe teachpack in HtDP. You can find documentation for the teachpack here:</p><p><url>https://docs.racket-lang.org/teachpack/2htdpuniverse.html</url></p></margin-note></p><h2 id="Starting-a-big-bang" toclevel="2" tocentry="yes">Starting a big-bang</h2><p> </p><div><pre class="pyret-display">big-bang :: <span>(<span>init :: </span>, <span>handlers :: </span>)</span></pre></div><p><tt class="pyretexpr">big-bang</tt> is called with an <tt class="pyretexpr">init</tt> state and a list of handler functions.  It immediately creates an interactive window based on <tt class="pyretexpr">init</tt> and optionally begins drawing graphics and text as defined by the <tt class="pyretexpr">to-draw</tt> function, running handler functions scheduled by <tt class="pyretexpr">on-tick</tt> and <tt class="pyretexpr">on-tick-n</tt> as well as those triggered by <tt class="pyretexpr">on-mouse</tt> and <tt class="pyretexpr">on-key</tt>.</p><pre class="nothing_special">big-bang(init,
  [list:
    on-tick(<py-prod>expr</py-prod>),
    on-tick-n(<py-prod>expr</py-prod>),
    on-mouse(<py-prod>expr</py-prod>),
    on-key(<py-prod>expr</py-prod>),
    to-draw(<py-prod>expr</py-prod>),
    stop-when(<py-prod>expr</py-prod>)
  ]
)</pre><p>All of the handlers for <tt class="pyretexpr">big-bang</tt> (in the list argument) are optional.  They can also appear in any order—the order displayed above is not required.  Each option can only appear once.  So, for example, these are valid <tt class="pyretexpr">big-bang</tt>s:</p><pre class="good-ex">include world
big-bang('inert', [list: ])

fun increment(x):
  x + 1
end

big-bang(10, [list: on-tick(increment)])
big-bang(10, [list: on-tick-n(increment, 3)])</pre><p>These are not allowed:</p><pre class="bad-ex">big-bang(10, 11)</pre><pre class="bad-ex">big-bang([list: on-tick(increment)])</pre><pre class="bad-ex">big-bang(10, [list: not-a-handler(increment)])</pre><pre class="bad-ex">big-bang(10, on-tick(increment))</pre><p>  </p><h2 id="functions-world" toclevel="2" tocentry="yes">Functions</h2><p>  </p><div><pre class="pyret-display">on-tick :: <span>(<span>handler :: </span>)</span></pre><p>Consumes a function and returns a handler that, when passed to <a href="UnDeFiNeD">UnDeFiNeD</a>, will be called each program tick with the current world state.</p></div><p>  </p><div><pre class="pyret-display">on-tick-n :: <span>(<span>handler :: </span>, <span>n :: </span>)</span></pre><p>Consumes a function and returns a handler that, when passed to <a href="UnDeFiNeD">UnDeFiNeD</a>, will be called every <tt class="pyretexpr">n</tt> program ticks with the current world state.</p></div><p>  </p><div><pre class="pyret-display">to-draw :: <span>(<span>drawer :: </span>)</span></pre><p>Consumes a function and returns a handler that, when passed to <a href="UnDeFiNeD">UnDeFiNeD</a>, will inform the world program what to draw.</p></div><p>  </p><div><pre class="pyret-display">on-key :: <span>(<span>onKey :: </span>)</span></pre><p>Consumes a function and returns a handler that, when passed to <a href="UnDeFiNeD">UnDeFiNeD</a>, will be called every time a key is pressed. The function is called with the current world state and a <a href="UnDeFiNeD">UnDeFiNeD</a> representing the pressed key. For most keys, this is just the corresponding single character.</p><p>The special keys are:</p><p><itemlist><item>Backspace key: <tt class="pyretexpr">“backspace”</tt></item><item>Tab key: <tt class="pyretexpr">“tab”</tt></item><item>Enter key: <tt class="pyretexpr">“enter”</tt></item><item>Shift key: <tt class="pyretexpr">“shift”</tt></item><item>Control key: <tt class="pyretexpr">“control”</tt></item><item>Pause key: <tt class="pyretexpr">“pause”</tt></item><item>Escape key: <tt class="pyretexpr">“escape”</tt></item><item>Prior key: <tt class="pyretexpr">“prior”</tt></item><item>Next key: <tt class="pyretexpr">“next”</tt></item><item>End key: <tt class="pyretexpr">“end”</tt></item><item>Home key: <tt class="pyretexpr">“home”</tt></item><item>Left arrow: <tt class="pyretexpr">“left”</tt></item><item>Up arrow: <tt class="pyretexpr">“up”</tt></item><item>Right arrow: <tt class="pyretexpr">“right”</tt></item><item>Down arrow: <tt class="pyretexpr">“down”</tt></item><item>Print key: <tt class="pyretexpr">“print”</tt></item><item>Insert key: <tt class="pyretexpr">“insert”</tt></item><item>Delete key: <tt class="pyretexpr">“delete”</tt></item><item>Backspace key: <tt class="pyretexpr">“backspace”</tt></item><item>Num lock key: <tt class="pyretexpr">“numlock”</tt></item><item>Scroll key: <tt class="pyretexpr">“scroll”</tt></item></itemlist></p></div><p>  </p><div><pre class="pyret-display">on-mouse :: <span>(<span>mouse-handler :: </span>)</span></pre><p>Consumes a function and returns a handler that, when passed to <a href="UnDeFiNeD">UnDeFiNeD</a>, will be called on every sampled mouse movement. The function will receive the world state, the current <tt class="pyretexpr">x</tt> and <tt class="pyretexpr">y</tt> positions of the mouse, and a <a href="UnDeFiNeD">UnDeFiNeD</a> representing a mouse event. Possible mouse events are:</p><p><itemlist><item><tt class="pyretexpr">“button-down”</tt> signals that the computer user has pushed a mouse button down;</item><item><tt class="pyretexpr">“button-up”</tt> signals that the computer user has let go of a mouse button;</item><item><tt class="pyretexpr">“drag”</tt> signals that the computer user is dragging the mouse. A dragging event occurs when the mouse moves while a mouse button is pressed.</item><item><tt class="pyretexpr">“move”</tt> signals that the computer user has moved the mouse;</item><item><tt class="pyretexpr">“enter”</tt> signals that the computer user has moved the mouse into the canvas area; and</item><item><tt class="pyretexpr">“leave”</tt> signals that the computer user has moved the mouse out of the canvas area.</item></itemlist></p></div><p>  </p><div><pre class="pyret-display">stop-when :: <span>(<span>stopper :: </span>)</span></pre><p>Consumes a function and returns a handler that, when passed to <a href="UnDeFiNeD">UnDeFiNeD</a>, will be called to determine if the world should stop running. If the function returns <tt class="pyretexpr">true</tt>, then no other handlers will be called. The <a href="UnDeFiNeD">UnDeFiNeD</a> function will return this last world state.</p></div><p>  </p><div><pre class="pyret-display">is-world-config :: <span>(<span>v :: </span>)</span></pre><p>Tests if the input is of type <a href="UnDeFiNeD">UnDeFiNeD</a>.</p></div><p>  </p><div><pre class="pyret-display">is-key-equal :: <span>(<span>key1 :: </span>, <span>key2 :: </span>)</span></pre><p>Tests if two key events are equals to each other.</p></div><p>    </p><h2 id="world_DataTypes" toclevel="2" tocentry="yes">Data Types</h2><p>  </p><div><div class="pyret-display">WorldConfig&lt;a&gt;</div><p><span><a name="WorldConfig&lt;a&gt;-78"></a></span> This type includes the values that can be passed to <tt class="pyretexpr">big-bang</tt> as event handlers (e.g. <tt class="pyretexpr">on-tick</tt> and <tt class="pyretexpr">on-key</tt>), renderers (e.g. <tt class="pyretexpr">to-draw</tt>), and other configuration options (e.g. <tt class="pyretexpr">stop-when</tt>).</p></div></div></root>
    <hr/>
    The current page is trove/world.html.
    The previous page is <a href = "../trove/image-structs.html">../trove/image-structs.html</a>.
    The next page is <a href = "../libraries-internal.html">../libraries-internal.html</a>.
    </div>
  </body>
</html>