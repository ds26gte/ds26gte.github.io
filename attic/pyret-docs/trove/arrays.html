<!doctype html>
<html lang="en">
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.8/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-sRIl4kxILFvY47J16cr9ZwB07vP4J8+LH7qKQnuqkuIAvNWLzeN8tE5YBujZqJLB" crossorigin="anonymous">
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.8/dist/js/bootstrap.bundle.min.js" integrity="sha384-FKyoEForCGlyvwx9Hj09JcYn3nv7wiPVlz7YYwJrWVcXK/BmnVDxM+D2scQbITxI" crossorigin="anonymous"></script>
  <script type="module" src="../embed-api.js"></script>
  <link rel="stylesheet" href="../styles.css">
  <head>
    <title>arrays</title>
  </head>
  <body>
    <div class="container">
    <root><div><h1 id="arrays" toclevel="1" tocentry="yes"></h1><p><span></span></p><h2 id="The-Array-Type" toclevel="2" tocentry="yes">The Array Type</h2><div><p><span><a name="Array"></a></span></p><pre class="pyret-display"><a href="../trove/arrays.html#Array">Array</a></pre><p>A <tt class="pyretexpr">array</tt> is a mutable, fixed-length collection indexed by non-negative intgers. Accessing and mutating a <tt class="pyretexpr">array</tt> takes constant time in the size of the array.</p><p>By default, Pyret users should use this library. If, however, you need a higher-performant but potentially less ergonomic array library, look at <a href="builtin/raw-arrays.html#raw-arrays"></a> instead, which is primarily reserved for internal use and for building other libraries. However, do not use that library unless you really cannot get what you need out of this one.</p><p>Because arrays are <i>mutable</i>, equality is not straightforward. Learn more at <a href="lang/equality.html#equality"></a>.</p></div><h2 id="Using-Arrays-in-Programs" toclevel="2" tocentry="yes">Using Arrays in Programs</h2><p>Some of the names provided for arrays inevitably overlap with those provided for other data. Therefore, using the <tt class="pyretexpr">include</tt> form is likely to cause name-clashes. It is wiser to import arrays using a prefix name and use the names below through that prefix.</p><div><p><b>Examples:</b></p><pre>import arrays as A

check:
  a = A.array-of("a", 3)
  a is=~ [A.array: "a", "a", "a"]
  A.array-length(a) is 3
end</pre><p><a class="show-embed" code="import arrays as A 

 check: 
    a = A.array-of(&quot;a&quot;, 3) 
    a is=~ [A.array: &quot;a&quot;, &quot;a&quot;, &quot;a&quot;] 
    A.array-length(a) is 3 
 end">(Try it!)</a></p></div><h2 id="Constructing-Arrays" toclevel="2" tocentry="yes">Constructing Arrays</h2><pre class="pyret-display">[array: <span class="pyret-content">value :: a</span>, ...] -&gt; <span><a href="../trove/arrays.html#Array">Array</a>&lt;<span>a</span>&gt;</span></pre><p>Constructs an <a href="../trove/arrays.html#Array"><tt class="pyretexpr">Array</tt></a> with the given elements.</p><p>Note that <a href="../trove/arrays.html#Array"><tt class="pyretexpr">Array</tt></a>s are mutable, so comparisons using <a href="lang/equality.html#eq-fun-equal-always">Equal Always</a> will only return <tt class="pyretexpr">true</tt> on <a href="../trove/arrays.html#Array"><tt class="pyretexpr">Array</tt></a>s when they are also <a href="lang/equality.html#eq-fun-identical">Identical</a>, regardless of their contents. Usually, the most appropriate comparison is <a href="lang/equality.html#eq-fun-equal-now">Equal Now</a>. Tests should correspondingly use <a href="../lang/testing.html#is=~"><tt class="pyretexpr">is=~</tt></a>.</p><div><p><b>Examples:</b></p><pre>import arrays as A

check:
  a = [A.array: 1, 2, 3]

  a is a
  a is== a

  [A.array: 1, 2, 3] is-not a
  [A.array: 1, 2, 3] is-not [A.array: 1, 2, 3]
  [A.array: 1, 2, 3] is-not== a

  [A.array: 1, 2, 3] is=~ a
  [A.array: 1, 2, 3] is=~ [A.array: 1, 2, 3]
end</pre><p><a class="show-embed" code="import arrays as A 

 check: 
    a = [A.array: 1, 2, 3] 

    a is a 
    a is== a 

    [A.array: 1, 2, 3] is-not a 
    [A.array: 1, 2, 3] is-not [A.array: 1, 2, 3] 
    [A.array: 1, 2, 3] is-not== a 

    [A.array: 1, 2, 3] is=~ a 
    [A.array: 1, 2, 3] is=~ [A.array: 1, 2, 3] 
 end">(Try it!)</a></p></div><div><p><span><a name="array-of"></a></span></p><pre class="pyret-display"><a href="../trove/arrays.html#array-of">array-of</a> :: <span>(<span>value :: <span class="pyret-content">value :: a</span></span>, <span>count :: <span class="pyret-content">value :: a</span></span>)</span></pre></div><p>Constructs an <tt class="pyretexpr">Array</tt> of length <tt class="pyretexpr">count</tt>, where every element is the value given as <tt class="pyretexpr">value</tt>.</p><p>Note that <tt class="pyretexpr">value</tt> is not <i>copied</i>, so, the elements of <tt class="pyretexpr">Array</tt>s created with <a href="../trove/arrays.html#array-of"><tt class="pyretexpr">array-of</tt></a> will always be <a href="lang/equality.html#eq-fun-identical">Identical</a>.</p><p>To create an array of arrays where each sub-array is independent of the other, use <a href="../trove/arrays.html#build-array"><tt class="pyretexpr">build-array</tt></a>.</p><p>Similar to <a href="../builtin/raw-arrays.html#raw-array-of"><tt class="pyretexpr">raw-array-of</tt></a>.</p><div><p><b>Examples:</b></p><pre>import arrays as A

check:
  arr = A.array-of(true, 2)
  arr is=~ [A.array: true, true]
  arr is-not [A.array: true, true]
  A.array-get-now(arr, 0) is&lt;=&gt; A.array-get-now(arr, 1)

  A.array-set-now(arr, 1, false)
  arr is=~ [A.array: true, false]

  arr-of-arrs = A.array-of(arr, 3)
  arr-of-arrs is=~
  [A.array:
    [A.array: true, false], [A.array: true, false], [A.array: true, false]]

  A.array-set-now(arr, 0, false)
  arr-of-arrs is=~
  [A.array:
    [A.array: false, false], [A.array: false, false], [A.array: false, false]]
end</pre><p><a class="show-embed" code="import arrays as A 

 check: 
    arr = A.array-of(true, 2) 
    arr is=~ [A.array: true, true] 
    arr is-not [A.array: true, true] 
    A.array-get-now(arr, 0) is&lt;=&gt; A.array-get-now(arr, 1) 

    A.array-set-now(arr, 1, false) 
    arr is=~ [A.array: true, false] 

    arr-of-arrs = A.array-of(arr, 3) 
    arr-of-arrs is=~ 
    [A.array: 
      [A.array: true, false], [A.array: true, false], [A.array: true, false]] 

    A.array-set-now(arr, 0, false) 
    arr-of-arrs is=~ 
    [A.array: 
      [A.array: false, false], [A.array: false, false], [A.array: false, false]] 
 end">(Try it!)</a></p></div><div><p><span><a name="build-array"></a></span></p><pre class="pyret-display"><a href="../trove/arrays.html#build-array">build-array</a> :: <span>(<span><span class="pyret-content">f :: <span><a href="../trove/globals.html#Number">Number</a> -&gt; a</span></span>, <span class="pyret-content">size :: <a href="../trove/globals.html#Number">Number</a></span></span>) -&gt; <span><a href="../trove/arrays.html#Array">Array</a>&lt;<span>a</span>&gt;</span></span></pre></div><p>Constructs an array of length <tt class="pyretexpr">size</tt>, and fills it with the result of calling the function <tt class="pyretexpr">f</tt> with each index from <tt class="pyretexpr">0</tt> to <tt class="pyretexpr">size - 1</tt>.</p><p>Similar to <a href="../trove/lists.html#build-list"><tt class="pyretexpr">build-list</tt></a> and <a href="../builtin/raw-arrays.html#raw-array-build"><tt class="pyretexpr">raw-array-build</tt></a>.</p><div><p><b>Examples:</b></p><pre>import arrays as A

check:
  fun sq(x): x * x end
  A.build-array(sq, 4) is=~ [A.array: sq(0), sq(1), sq(2), sq(3)]
end

check:
  fun build(n :: Number) -&gt; Array&lt;String&gt;:
    A.array-of("_", 3)
  end
  a = A.build-array(build, 3)

  a is=~ [A.array:
    [A.array: "_", "_", "_"],
    [A.array: "_", "_", "_"],
    [A.array: "_", "_", "_"]]

  a.get-now(0).set-now(0, "X")
  a.get-now(1).set-now(1, "O")

  a is=~ [A.array:
    [A.array: "X", "_", "_"],
    [A.array: "_", "O", "_"],
    [A.array: "_", "_", "_"]]
end</pre><p><a class="show-embed" code="import arrays as A 

 check: 
    fun sq(x): x * x end 
    A.build-array(sq, 4) is=~ [A.array: sq(0), sq(1), sq(2), sq(3)] 
 end 

 check: 
    fun build(n :: Number) -&gt; Array&lt;String&gt;: 
      A.array-of(&quot;_&quot;, 3) 
    end 
    a = A.build-array(build, 3) 

    a is=~ [A.array: 
      [A.array: &quot;_&quot;, &quot;_&quot;, &quot;_&quot;], 
      [A.array: &quot;_&quot;, &quot;_&quot;, &quot;_&quot;], 
      [A.array: &quot;_&quot;, &quot;_&quot;, &quot;_&quot;]] 

    a.get-now(0).set-now(0, &quot;X&quot;) 
    a.get-now(1).set-now(1, &quot;O&quot;) 

    a is=~ [A.array: 
      [A.array: &quot;X&quot;, &quot;_&quot;, &quot;_&quot;], 
      [A.array: &quot;_&quot;, &quot;O&quot;, &quot;_&quot;], 
      [A.array: &quot;_&quot;, &quot;_&quot;, &quot;_&quot;]] 
 end">(Try it!)</a></p></div><div><p><span><a name="array-from-list"></a></span></p><pre class="pyret-display"><a href="../trove/arrays.html#array-from-list">array-from-list</a> :: <span>(<span>l :: <span class="pyret-content">l :: <span><a href="../trove/lists.html#List">List</a>&lt;<span>a</span>&gt;</span></span></span>)</span></pre></div><p>Converts a <a href="../trove/lists.html#List"><tt class="pyretexpr">List</tt></a> to an <a href="../trove/arrays.html#Array"><tt class="pyretexpr">Array</tt></a> containing the same elements in the same order.</p><p>Similar to <a href="../builtin/raw-arrays.html#raw-array-from-list"><tt class="pyretexpr">raw-array-from-list</tt></a>.</p><div><p><b>Examples:</b></p><pre>import arrays as A
import lists as L

check:
  A.array-from-list([L.list: 1, 2, 3]) is=~ [A.array: 1, 2, 3]
end</pre><p><a class="show-embed" code="import arrays as A 
 import lists as L 

 check: 
    A.array-from-list([L.list: 1, 2, 3]) is=~ [A.array: 1, 2, 3] 
 end">(Try it!)</a></p></div><h2 id="Array-Methods" toclevel="2" tocentry="yes">Array Methods</h2><div class="pyret-display"><tt>.get-now :: <span><span class="pyret-content">(index :: <a href="../trove/globals.html#Number">Number</a>)</span> -&gt; a</span></tt></div><p>Returns the value at the given <tt class="pyretexpr">index</tt>.</p><p>This method has a <tt class="pyretexpr">-now</tt> suffix because its answer can change from one call to the next if, for example, <tt>.set-now</tt> is used.</p><p>Using an index too large, negative, or not a whole number raises an error.</p><p>Similar to <a href="../trove/lists.html#get"><tt class="pyretexpr">get</tt></a> and <a href="../builtin/raw-arrays.html#raw-array-get"><tt class="pyretexpr">raw-array-get</tt></a>.</p><div><p><b>Examples:</b></p><pre>import arrays as A

check:
  a = [A.array: "a", "b", "c"]
  a.get-now(0) is "a"
  a.get-now(1) is "b"

  a.get-now(4) raises "index"
  a.get-now(-1) raises "index"
  a.get-now(1.2) raises "index"
end</pre><p><a class="show-embed" code="import arrays as A 

 check: 
    a = [A.array: &quot;a&quot;, &quot;b&quot;, &quot;c&quot;] 
    a.get-now(0) is &quot;a&quot; 
    a.get-now(1) is &quot;b&quot; 

    a.get-now(4) raises &quot;index&quot; 
    a.get-now(-1) raises &quot;index&quot; 
    a.get-now(1.2) raises &quot;index&quot; 
 end">(Try it!)</a></p></div><div class="pyret-display"><tt>.set-now :: <span>(<span><span class="pyret-content">index :: <a href="../trove/globals.html#Number">Number</a></span>, <span class="pyret-content">value :: a</span></span>) -&gt; <a href="../trove/globals.html#Nothing">Nothing</a></span></tt></div><p>Updates the value at the given <tt class="pyretexpr">index</tt>, returning <a href="../trove/globals.html#Nothing"><tt class="pyretexpr">Nothing</tt></a>.</p><p>The update is stateful, so all references to the array see the update.  Hence the <tt class="pyretexpr">-now</tt> suffix; in the example below, calling <tt class="pyretexpr">a.get-now()</tt> at two different points in the program produces two different results.</p><p>Using an index too large, negative, or not a whole number raises an error.</p><p>Similar to <a href="../builtin/raw-arrays.html#raw-array-set"><tt class="pyretexpr">raw-array-set</tt></a>.</p><div><p><b>Examples:</b></p><pre>import arrays as A

check:
  a = [A.array: "a", "b", "c"]
  a.get-now(0) is "a"

  a.set-now(0, "d")
  a.get-now(0) is "d"

  b = a
  a.set-now(0, "f")
  a is=~ [A.array: "f", "b", "c"]
  b is=~ [A.array: "f", "b", "c"]

  c = b.set-now(0, 'z')
  c is nothing

  b.set-now(4, "hi") raises "index"
end</pre><p><a class="show-embed" code="import arrays as A 

 check: 
    a = [A.array: &quot;a&quot;, &quot;b&quot;, &quot;c&quot;] 
    a.get-now(0) is &quot;a&quot; 

    a.set-now(0, &quot;d&quot;) 
    a.get-now(0) is &quot;d&quot; 

    b = a 
    a.set-now(0, &quot;f&quot;) 
    a is=~ [A.array: &quot;f&quot;, &quot;b&quot;, &quot;c&quot;] 
    b is=~ [A.array: &quot;f&quot;, &quot;b&quot;, &quot;c&quot;] 

    c = b.set-now(0, 'z') 
    c is nothing 

    b.set-now(4, &quot;hi&quot;) raises &quot;index&quot; 
 end">(Try it!)</a></p></div><div class="pyret-display"><tt>.length :: <span>(<span></span>) -&gt; <a href="../trove/globals.html#Number">Number</a></span></tt></div><p>Returns the length of the array.  The length of an array is set when it is created and cannot be changed.</p><p>Similar to <a href="../trove/lists.html#length"><tt class="pyretexpr">length</tt></a> and <a href="../builtin/raw-arrays.html#raw-array-length"><tt class="pyretexpr">raw-array-length</tt></a>.</p><div><p><b>Examples:</b></p><pre>import arrays as A

check:
  a = [A.array: "a", "b"]
  a.length() is 2
  b = [A.array: ]
  b.length() is 0
end</pre><p><a class="show-embed" code="import arrays as A 

 check: 
    a = [A.array: &quot;a&quot;, &quot;b&quot;] 
    a.length() is 2 
    b = [A.array: ] 
    b.length() is 0 
 end">(Try it!)</a></p></div><div class="pyret-display"><tt>.filter :: <span>(<span><span class="pyret-content">f :: <span>(<span>(<span>a</span>) -&gt; <a href="../trove/globals.html#Boolean">Boolean</a></span>)</span></span></span>) -&gt; <span><a href="../trove/arrays.html#Array">Array</a>&lt;<span>a</span>&gt;</span></span></tt></div><p>  Applies function <tt class="pyretexpr">f</tt> to each element of <tt class="pyretexpr">self</tt> from left to right,   constructing a new <tt class="pyretexpr">Array</tt> out of the elements for which <tt class="pyretexpr">f</tt>   returned <tt class="pyretexpr">true</tt>.</p><p>Similar to <a href="../trove/lists.html#filter"><tt class="pyretexpr">filter</tt></a> and <a href="../builtin/raw-arrays.html#raw-array-filter"><tt class="pyretexpr">raw-array-filter</tt></a>.</p><p>  </p><div><p><b>Examples:</b></p><pre>import arrays as A

check:
  a = [A.array: "apple", "banana", "plum"]
  p-words = a.filter({(s): string-contains(s, "p")})
  p-words is=~ [A.array: "apple", "plum"]
end</pre><p><a class="show-embed" code="import arrays as A 

 check: 
    a = [A.array: &quot;apple&quot;, &quot;banana&quot;, &quot;plum&quot;] 
    p-words = a.filter({(s): string-contains(s, &quot;p&quot;)}) 
    p-words is=~ [A.array: &quot;apple&quot;, &quot;plum&quot;] 
 end">(Try it!)</a></p></div><div class="pyret-display"><tt>.map :: <span>(<span><span class="pyret-content">f :: <span>(<span>(<span>a</span>) -&gt; b</span>)</span></span></span>) -&gt; <span><a href="../trove/arrays.html#Array">Array</a>&lt;<span>b</span>&gt;</span></span></tt></div><p>Applies function <tt class="pyretexpr">f</tt> to each element of the arrays from left to right, and constructs a new <tt class="pyretexpr">Array</tt> out of the return values in the corresponding order. The original array remains unchanged.</p><p><tt class="pyretexpr">a</tt> represents the type of the elements in the original <tt class="pyretexpr">Array</tt>, <tt class="pyretexpr">b</tt> is the type of the elements in the new <tt class="pyretexpr">Array</tt>.</p><p>Similar to <a href="../trove/lists.html#map"><tt class="pyretexpr">map</tt></a> and <a href="../builtin/raw-arrays.html#raw-array-map"><tt class="pyretexpr">raw-array-map</tt></a>.</p><p>  </p><div><p><b>Examples:</b></p><pre>import arrays as A

check:
  a = [A.array: "apple", "banana", "plum"]
  lengths = a.map(string-length)
  lengths is=~ [A.array: 5, 6, 4]
  a is=~ [A.array: "apple", "banana", "plum"]
end</pre><p><a class="show-embed" code="import arrays as A 

 check: 
    a = [A.array: &quot;apple&quot;, &quot;banana&quot;, &quot;plum&quot;] 
    lengths = a.map(string-length) 
    lengths is=~ [A.array: 5, 6, 4] 
    a is=~ [A.array: &quot;apple&quot;, &quot;banana&quot;, &quot;plum&quot;] 
 end">(Try it!)</a></p></div><div class="pyret-display"><tt>.fold :: <span>(<span><span class="pyret-content">f :: <span>(<span>b, a, <a href="../trove/globals.html#Number">Number</a></span>) -&gt; b</span></span>, <span class="pyret-content">init :: b</span>, <span class="pyret-content">start-index :: <a href="../trove/globals.html#Number">Number</a></span></span>) -&gt; b</span></tt></div><p>Combines the elements in the array with a function that accumulates each element with an intermediate result. Has an argument order that works with <tt class="pyretexpr">for</tt>. The numeric argument to the accumulator is the index of the current element.</p><p>Similar to <a href="../trove/lists.html#fold"><tt class="pyretexpr">fold</tt></a> and <a href="../builtin/raw-arrays.html#raw-array-fold"><tt class="pyretexpr">raw-array-fold</tt></a>.</p><p>  </p><div><p><b>Examples:</b></p><pre>import arrays as A

fun sum-even-minus-odd(a :: Array&lt;Number&gt;):
  fun is-even(n): (n / 2) == num-floor(n / 2) end

  fun sum-ith(sum-so-far :: Number, new-n :: Number, idx :: Number):
    if is-even(idx):
      sum-so-far + new-n
    else:
      sum-so-far - new-n
    end
  end

  a.fold(sum-ith, 0, 0)
end

check:
  sum-even-minus-odd([A.array: ]) is 0
  sum-even-minus-odd([A.array: 1]) is 1
  sum-even-minus-odd([A.array: 1, 2])
    is -1 because (1 - 2)
  sum-even-minus-odd([A.array: 1, 2, 3])
    is 2 because (1 + 3) - 2
  sum-even-minus-odd([A.array: 1, 2, 3, 4])
    is -2 because ((1 + 3) - (2 + 4))
end</pre><p><a class="show-embed" code="import arrays as A 

 fun sum-even-minus-odd(a :: Array&lt;Number&gt;): 
    fun is-even(n): (n / 2) == num-floor(n / 2) end 

    fun sum-ith(sum-so-far :: Number, new-n :: Number, idx :: Number): 
      if is-even(idx): 
        sum-so-far + new-n 
      else: 
        sum-so-far - new-n 
      end 
    end 

    a.fold(sum-ith, 0, 0) 
 end 

 check: 
    sum-even-minus-odd([A.array: ]) is 0 
    sum-even-minus-odd([A.array: 1]) is 1 
    sum-even-minus-odd([A.array: 1, 2]) 
      is -1 because (1 - 2) 
    sum-even-minus-odd([A.array: 1, 2, 3]) 
      is 2 because (1 + 3) - 2 
    sum-even-minus-odd([A.array: 1, 2, 3, 4]) 
      is -2 because ((1 + 3) - (2 + 4)) 
 end">(Try it!)</a></p></div><div class="pyret-display"><tt>.concat :: <span>(<span><span class="pyret-content">other :: <span><a href="../trove/arrays.html#Array">Array</a>&lt;<span>a</span>&gt;</span></span></span>) -&gt; <span><a href="../trove/arrays.html#Array">Array</a>&lt;<span>a</span>&gt;</span></span></tt></div><p>  Creates a new array with all the elements of the current array   followed by all the elements of <tt class="pyretexpr">other</tt>.</p><p>Similar to <a href="../trove/lists.html#append"><tt class="pyretexpr">append</tt></a> and <a href="../builtin/raw-arrays.html#raw-array-concat"><tt class="pyretexpr">raw-array-concat</tt></a>.</p><div><p><b>Examples:</b></p><pre>import arrays as A

check:
  a = [A.array: "To", "be", "or"]
  a.concat([A.array: "not", "to", "be"])
    is=~ [A.array: "To", "be", "or", "not", "to", "be"]

  a is=~ [A.array: "To", "be", "or"]

  a is-not=~ [A.array: "To", "be", "or", "not", "to", "be"]
end
</pre><p><a class="show-embed" code="import arrays as A 

 check: 
    a = [A.array: &quot;To&quot;, &quot;be&quot;, &quot;or&quot;] 
    a.concat([A.array: &quot;not&quot;, &quot;to&quot;, &quot;be&quot;]) 
      is=~ [A.array: &quot;To&quot;, &quot;be&quot;, &quot;or&quot;, &quot;not&quot;, &quot;to&quot;, &quot;be&quot;] 

    a is=~ [A.array: &quot;To&quot;, &quot;be&quot;, &quot;or&quot;] 

    a is-not=~ [A.array: &quot;To&quot;, &quot;be&quot;, &quot;or&quot;, &quot;not&quot;, &quot;to&quot;, &quot;be&quot;] 
 end 
">(Try it!)</a></p></div><div class="pyret-display"><tt>.duplicate :: <span>() -&gt; <span><a href="../trove/arrays.html#Array">Array</a>&lt;<span>a</span>&gt;</span></span></tt></div><p>  Returns a copy of the given array, such that corresponding elements in the   result are <a href="lang/equality.html#eq-fun-identical">Identical</a> to those in the source array.</p><p>Similar to <a href="../builtin/raw-arrays.html#raw-array-duplicate"><tt class="pyretexpr">raw-array-duplicate</tt></a>.</p><div><p><b>Examples:</b></p><pre>import arrays as A

data Person: p(ref name :: String, ref age :: Number) end

check:
  ps1 = [A.array: p("Alice", 30), p("Bob", 40)]

  ps2 = ps1.duplicate()

  ps2.get-now(0) is ps1.get-now(0)

  ps2.get-now(1)!{age: 57}
  ps1.get-now(1)!age is 57
end
</pre><p><a class="show-embed" code="import arrays as A 

 data Person: p(ref name :: String, ref age :: Number) end 

 check: 
    ps1 = [A.array: p(&quot;Alice&quot;, 30), p(&quot;Bob&quot;, 40)] 

    ps2 = ps1.duplicate() 

    ps2.get-now(0) is ps1.get-now(0) 

    ps2.get-now(1)!{age: 57} 
    ps1.get-now(1)!age is 57 
 end 
">(Try it!)</a></p></div><div class="pyret-display"><tt>.sort-nums :: <span>(<span><span class="pyret-content">asc :: <a href="../trove/globals.html#Boolean">Boolean</a></span></span>) -&gt; <span><a href="../trove/arrays.html#Array">Array</a>&lt;<span>a</span>&gt;</span></span></tt></div><p>  Sorts the given array <i>in-place</i> in ascending or descending order   according to the <tt class="pyretexpr">asc</tt> parameter. Returns a reference to the   original array, which will have its contents mutably updated.</p><p>Similar to <a href="../builtin/raw-arrays.html#raw-array-sort-nums"><tt class="pyretexpr">raw-array-sort-nums</tt></a>.</p><div><p><b>Examples:</b></p><pre>import arrays as A

check:
  a = [A.array: 3, 1, 4, 1, 5, 9, 2]

  asc = a.sort-nums(true)
  asc is&lt;=&gt; a
  a is=~ [A.array: 1, 1, 2, 3, 4, 5, 9]

  a.sort-nums(false)
  a is=~ [A.array: 9, 5, 4, 3, 2, 1, 1]
end</pre><p><a class="show-embed" code="import arrays as A 

 check: 
    a = [A.array: 3, 1, 4, 1, 5, 9, 2] 

    asc = a.sort-nums(true) 
    asc is&lt;=&gt; a 
    a is=~ [A.array: 1, 1, 2, 3, 4, 5, 9] 

    a.sort-nums(false) 
    a is=~ [A.array: 9, 5, 4, 3, 2, 1, 1] 
 end">(Try it!)</a></p></div><div class="pyret-display"><tt>.sort-by :: <span>(<span><span class="pyret-content">key :: <span>a -&gt; <a href="../trove/globals.html#Number">Number</a></span></span>, <span class="pyret-content">asc :: <a href="../trove/globals.html#Boolean">Boolean</a></span></span>) -&gt; <span><a href="../trove/arrays.html#Array">Array</a>&lt;<span>a</span>&gt;</span></span></tt></div><p>  Creates a new array containing the sorted contents of the given array. The sort   order is determined by calling the <tt class="pyretexpr">key</tt> function on each element to   get a number, and sorting the elements by their key value (in increasing key   order if <tt class="pyretexpr">asc</tt> is <tt class="pyretexpr">true</tt>, decreasing if <tt class="pyretexpr">false</tt>). Ties are   broken by the order in which the element is present in the initial array.</p><p>Similar to <a href="../builtin/raw-arrays.html#raw-array-sort-by"><tt class="pyretexpr">raw-array-sort-by</tt></a>.</p><div><p><b>Examples:</b></p><pre>import arrays as A

check:
  a = [A.array: "let", "us", "go", "then", "you", "and", "i"]

  asc = a.sort-by(string-length, true)
  asc is=~ [A.array: "i", "us", "go", "let", "you", "and", "then"]
  asc is-not=~ a

  desc = a.sort-by(string-length, false)
  desc is=~ [A.array: "then", "let", "you", "and", "us", "go", "i"]

  a is=~ [A.array: "let", "us", "go", "then", "you", "and", "i"]
end</pre><p><a class="show-embed" code="import arrays as A 

 check: 
    a = [A.array: &quot;let&quot;, &quot;us&quot;, &quot;go&quot;, &quot;then&quot;, &quot;you&quot;, &quot;and&quot;, &quot;i&quot;] 

    asc = a.sort-by(string-length, true) 
    asc is=~ [A.array: &quot;i&quot;, &quot;us&quot;, &quot;go&quot;, &quot;let&quot;, &quot;you&quot;, &quot;and&quot;, &quot;then&quot;] 
    asc is-not=~ a 

    desc = a.sort-by(string-length, false) 
    desc is=~ [A.array: &quot;then&quot;, &quot;let&quot;, &quot;you&quot;, &quot;and&quot;, &quot;us&quot;, &quot;go&quot;, &quot;i&quot;] 

    a is=~ [A.array: &quot;let&quot;, &quot;us&quot;, &quot;go&quot;, &quot;then&quot;, &quot;you&quot;, &quot;and&quot;, &quot;i&quot;] 
 end">(Try it!)</a></p></div><div class="pyret-display"><tt>.to-list-now :: <span>() -&gt; <span><a href="../trove/lists.html#List">List</a>&lt;<span>a</span>&gt;</span></span></tt></div><p>    Converts a <a href="../trove/arrays.html#Array"><tt class="pyretexpr">Array</tt></a> to a <a href="../trove/lists.html#List"><tt class="pyretexpr">List</tt></a> containing     the same elements in the same order. This method has a <tt class="pyretexpr">-now</tt> suffix because its answer can change from one call to the next if, for example, <tt>.set-now</tt> is subsequently used.</p><p>    Note that it does <i>not</i> recursively convert <a href="../trove/arrays.html#Array"><tt class="pyretexpr">Array</tt></a>s;     only the top-level is converted.</p><p>Similar to <a href="../builtin/raw-arrays.html#raw-array-to-list"><tt class="pyretexpr">raw-array-to-list</tt></a>.</p><div><p><b>Examples:</b></p><pre>import arrays as A
import lists as L

check:
  a = [A.array: 1, 2, 3]
  a.to-list-now() is [L.list: 1, 2, 3]

  a2 = array-of([A.array: ], 3)
  a2.to-list-now() is=~ [L.list: [A.array: ], [A.array: ], [A.array: ]]
  a2.to-list-now() is-not=~ [L.list: [L.list: ], [L.list: ], [L.list: ]]

  a.set-now(0, 5)
  a.to-list-now() is [L.list: 5, 2, 3]
end</pre><p><a class="show-embed" code="import arrays as A 
 import lists as L 

 check: 
    a = [A.array: 1, 2, 3] 
    a.to-list-now() is [L.list: 1, 2, 3] 

    a2 = array-of([A.array: ], 3) 
    a2.to-list-now() is=~ [L.list: [A.array: ], [A.array: ], [A.array: ]] 
    a2.to-list-now() is-not=~ [L.list: [L.list: ], [L.list: ], [L.list: ]] 

    a.set-now(0, 5) 
    a.to-list-now() is [L.list: 5, 2, 3] 
 end">(Try it!)</a></p></div><h2 id="Array-Functions" toclevel="2" tocentry="yes">Array Functions</h2><div><p><span><a name="array-get-now"></a></span></p><pre class="pyret-display"><a href="../trove/arrays.html#array-get-now">array-get-now</a> :: <span>(<span><span class="pyret-content">array :: <span><a href="../trove/arrays.html#Array">Array</a>&lt;<span>a</span>&gt;</span></span>, <span class="pyret-content">index :: <a href="../trove/globals.html#Number">Number</a></span></span>) -&gt; a</span></pre></div><p>Equivalent to <tt class="pyretexpr">array</tt><tt>.get-now</tt><tt class="pyretexpr">(index)</tt>.</p><div><p><b>Examples:</b></p><pre>import arrays as A

check:
  a = [A.array: 0, 1, 2]
  A.array-get-now(a, 1) is 1
end</pre><p><a class="show-embed" code="import arrays as A 

 check: 
    a = [A.array: 0, 1, 2] 
    A.array-get-now(a, 1) is 1 
 end">(Try it!)</a></p></div><div><p><span><a name="array-set-now"></a></span></p><pre class="pyret-display"><a href="../trove/arrays.html#array-set-now">array-set-now</a> :: <span>(<span><span class="pyret-content">array :: <span><a href="../trove/arrays.html#Array">Array</a>&lt;<span>a</span>&gt;</span></span>, <span class="pyret-content">index :: <a href="../trove/globals.html#Number">Number</a></span>, <span class="pyret-content">value :: a</span></span>) -&gt; <a href="../trove/globals.html#Nothing">Nothing</a></span></pre></div><p>Equivalent to <tt class="pyretexpr">array</tt><tt>.set-now</tt><tt class="pyretexpr">(index, value)</tt>.</p><div><p><b>Examples:</b></p><pre>import arrays as A

check:
  a = A.array-of("a", 3)
  a is=~ [A.array: "a", "a", "a"]

  A.array-set-now(a, 1, "b")
  a is=~ [A.array: "a", "b", "a"]
end</pre><p><a class="show-embed" code="import arrays as A 

 check: 
    a = A.array-of(&quot;a&quot;, 3) 
    a is=~ [A.array: &quot;a&quot;, &quot;a&quot;, &quot;a&quot;] 

    A.array-set-now(a, 1, &quot;b&quot;) 
    a is=~ [A.array: &quot;a&quot;, &quot;b&quot;, &quot;a&quot;] 
 end">(Try it!)</a></p></div><div><p><span><a name="array-length"></a></span></p><pre class="pyret-display"><a href="../trove/arrays.html#array-length">array-length</a> :: <span>(<span><span class="pyret-content">array :: <span><a href="../trove/arrays.html#Array">Array</a>&lt;<span>a</span>&gt;</span></span></span>) -&gt; <a href="../trove/globals.html#Number">Number</a></span></pre></div><p>Equivalent to <tt class="pyretexpr">array</tt><tt>.length</tt><tt class="pyretexpr">()</tt>.</p><div><p><b>Examples:</b></p><pre>import arrays as A

check:
  a = A.array-of("a", 3)
  a is=~ [A.array: "a", "a", "a"]
  A.array-length(a) is 3
end</pre><p><a class="show-embed" code="import arrays as A 

 check: 
    a = A.array-of(&quot;a&quot;, 3) 
    a is=~ [A.array: &quot;a&quot;, &quot;a&quot;, &quot;a&quot;] 
    A.array-length(a) is 3 
 end">(Try it!)</a></p></div><div><p><span><a name="array-filter"></a></span></p><pre class="pyret-display"><a href="../trove/arrays.html#array-filter">array-filter</a> :: <span>(<span><span class="pyret-content">f :: <span>(<span>(<span>a</span>) -&gt; <a href="../trove/globals.html#Boolean">Boolean</a></span>)</span></span>, <span class="pyret-content">array :: <span><a href="../trove/arrays.html#Array">Array</a>&lt;<span>a</span>&gt;</span></span></span>) -&gt; <span><a href="../trove/arrays.html#Array">Array</a>&lt;<span>a</span>&gt;</span></span></pre></div><p>Equivalent to <tt class="pyretexpr">array</tt><tt>.filter</tt><tt class="pyretexpr">(f)</tt>, with an argument order designed for <tt class="pyretexpr">for</tt>.</p><div><p><span><a name="array-map"></a></span></p><pre class="pyret-display"><a href="../trove/arrays.html#array-map">array-map</a> :: <span>(<span><span class="pyret-content">f :: <span>(<span>(<span>a</span>) -&gt; b</span>)</span></span>, <span class="pyret-content">array :: <span><a href="../trove/arrays.html#Array">Array</a>&lt;<span>a</span>&gt;</span></span></span>) -&gt; <span><a href="../trove/arrays.html#Array">Array</a>&lt;<span>a</span>&gt;</span></span></pre></div><p>Equivalent to <tt class="pyretexpr">array</tt><tt>.map</tt><tt class="pyretexpr">(f)</tt>, with an argument order designed for <tt class="pyretexpr">for</tt>.</p><div><p><span><a name="array-fold"></a></span></p><pre class="pyret-display"><a href="../trove/arrays.html#array-fold">array-fold</a> :: <span>(<span><span class="pyret-content">f :: <span>(<span>(<span>b, a</span>) -&gt; <a href="../trove/globals.html#Number">Number</a></span>)</span></span>, <span class="pyret-content">init :: b</span>, <span class="pyret-content">array :: <span><a href="../trove/arrays.html#Array">Array</a>&lt;<span>a</span>&gt;</span></span></span>) -&gt; <a href="../trove/globals.html#Number">Number</a></span></pre></div><p>Equivalent to <tt class="pyretexpr">array</tt><tt>.fold</tt><tt class="pyretexpr">(f, init, start-index)</tt>, with an argument order designed for <tt class="pyretexpr">for</tt>.</p><div><p><span><a name="array-concat"></a></span></p><pre class="pyret-display"><a href="../trove/arrays.html#array-concat">array-concat</a> :: <span>(<span><span class="pyret-content">array1 :: <span><a href="../trove/arrays.html#Array">Array</a>&lt;<span>a</span>&gt;</span></span>, <span class="pyret-content">array2 :: <span><a href="../trove/arrays.html#Array">Array</a>&lt;<span>a</span>&gt;</span></span></span>) -&gt; <span><a href="../trove/arrays.html#Array">Array</a>&lt;<span>a</span>&gt;</span></span></pre></div><p>Equivalent to <tt class="pyretexpr">array1</tt><tt>.concat</tt><tt class="pyretexpr">(array2)</tt>.</p><div><p><span><a name="array-duplicate"></a></span></p><pre class="pyret-display"><a href="../trove/arrays.html#array-duplicate">array-duplicate</a> :: <span>(<span><span class="pyret-content">array :: <span><a href="../trove/arrays.html#Array">Array</a>&lt;<span>a</span>&gt;</span></span></span>) -&gt; <span><a href="../trove/arrays.html#Array">Array</a>&lt;<span>a</span>&gt;</span></span></pre></div><p>Equivalent to <tt class="pyretexpr">array</tt><tt>.duplicate</tt><tt class="pyretexpr">()</tt>.</p><div><p><span><a name="array-sort-nums"></a></span></p><pre class="pyret-display"><a href="../trove/arrays.html#array-sort-nums">array-sort-nums</a> :: <span>(<span><span class="pyret-content">array :: <span><a href="../trove/arrays.html#Array">Array</a>&lt;<span>a</span>&gt;</span></span>, <span class="pyret-content">asc :: <a href="../trove/globals.html#Boolean">Boolean</a></span></span>) -&gt; <span><a href="../trove/arrays.html#Array">Array</a>&lt;<span>a</span>&gt;</span></span></pre></div><p>Equivalent to <tt class="pyretexpr">array</tt><tt>.sort-nums</tt><tt class="pyretexpr">(asc)</tt>.</p><div><p><b>Examples:</b></p><pre>import arrays as A

check:
  a = [A.array: 3, 1, 4, 1, 5, 9, 2]

  asc = A.array-sort-nums(a, true)
  asc is&lt;=&gt; a
  a is=~ [A.array: 1, 1, 2, 3, 4, 5, 9]

  A.array-sort-nums(a, false)
  a is=~ [A.array: 9, 5, 4, 3, 2, 1, 1]
end</pre><p><a class="show-embed" code="import arrays as A 

 check: 
    a = [A.array: 3, 1, 4, 1, 5, 9, 2] 

    asc = A.array-sort-nums(a, true) 
    asc is&lt;=&gt; a 
    a is=~ [A.array: 1, 1, 2, 3, 4, 5, 9] 

    A.array-sort-nums(a, false) 
    a is=~ [A.array: 9, 5, 4, 3, 2, 1, 1] 
 end">(Try it!)</a></p></div><div><p><span><a name="array-sort-by"></a></span></p><pre class="pyret-display"><a href="../trove/arrays.html#array-sort-by">array-sort-by</a> :: <span>(<span><span class="pyret-content">array :: <span><a href="../trove/arrays.html#Array">Array</a>&lt;<span>a</span>&gt;</span></span>, <span class="pyret-content">key :: <span>(<span>(<span>a</span>) -&gt; <a href="../trove/globals.html#Number">Number</a></span>)</span></span>, <span class="pyret-content">asc :: <a href="../trove/globals.html#Boolean">Boolean</a></span></span>) -&gt; <span><a href="../trove/arrays.html#Array">Array</a>&lt;<span>a</span>&gt;</span></span></pre></div><p>Equivalent to <tt class="pyretexpr">array</tt><tt>.sort-by</tt><tt class="pyretexpr">(key, asc)</tt>.</p><div><p><b>Examples:</b></p><pre>import arrays as A

check:
  a = [A.array: "let", "us", "go", "then", "you", "and", "i"]

  asc = A.array-sort-by(a, string-length, true)
  asc is=~ [A.array: "i", "us", "go", "let", "you", "and", "then"]
  asc is-not=~ a

  desc = A.array-sort-by(a, string-length, false)
  desc is=~ [A.array: "then", "let", "you", "and", "us", "go", "i"]

  a is=~ [A.array: "let", "us", "go", "then", "you", "and", "i"]
end</pre><p><a class="show-embed" code="import arrays as A 

 check: 
    a = [A.array: &quot;let&quot;, &quot;us&quot;, &quot;go&quot;, &quot;then&quot;, &quot;you&quot;, &quot;and&quot;, &quot;i&quot;] 

    asc = A.array-sort-by(a, string-length, true) 
    asc is=~ [A.array: &quot;i&quot;, &quot;us&quot;, &quot;go&quot;, &quot;let&quot;, &quot;you&quot;, &quot;and&quot;, &quot;then&quot;] 
    asc is-not=~ a 

    desc = A.array-sort-by(a, string-length, false) 
    desc is=~ [A.array: &quot;then&quot;, &quot;let&quot;, &quot;you&quot;, &quot;and&quot;, &quot;us&quot;, &quot;go&quot;, &quot;i&quot;] 

    a is=~ [A.array: &quot;let&quot;, &quot;us&quot;, &quot;go&quot;, &quot;then&quot;, &quot;you&quot;, &quot;and&quot;, &quot;i&quot;] 
 end">(Try it!)</a></p></div><div><p><span><a name="array-to-list-now"></a></span></p><pre class="pyret-display"><a href="../trove/arrays.html#array-to-list-now">array-to-list-now</a> :: <span>(<span>array :: <span><a href="../trove/arrays.html#Array">Array</a>&lt;<span>a</span>&gt;</span></span>)</span></pre></div><p>Equivalent to <tt class="pyretexpr">array</tt><tt>.to-list-now</tt><tt class="pyretexpr">()</tt>.</p><div><p><b>Examples:</b></p><pre>import arrays as A
import lists as L

check:
  a = A.array-of("a", 3)
  a is=~ [A.array: "a", "a", "a"]

  A.array-set-now(a, 1, "b")
  a is=~ [A.array: "a", "b", "a"]

  l = A.array-to-list-now(a)
  l is [L.list: "a", "b", "a"]
end</pre><p><a class="show-embed" code="import arrays as A 
 import lists as L 

 check: 
    a = A.array-of(&quot;a&quot;, 3) 
    a is=~ [A.array: &quot;a&quot;, &quot;a&quot;, &quot;a&quot;] 

    A.array-set-now(a, 1, &quot;b&quot;) 
    a is=~ [A.array: &quot;a&quot;, &quot;b&quot;, &quot;a&quot;] 

    l = A.array-to-list-now(a) 
    l is [L.list: &quot;a&quot;, &quot;b&quot;, &quot;a&quot;] 
 end">(Try it!)</a></p></div></div></root>
    <hr/>
    The current page is trove/arrays.html.
    The previous page is <a href = "../trove/sets.html">../trove/sets.html</a>.
    The next page is <a href = "../trove/string-dict.html">../trove/string-dict.html</a>.
    </div>
  </body>
</html>