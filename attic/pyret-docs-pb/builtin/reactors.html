<!doctype html>
<html lang="en">
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.8/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-sRIl4kxILFvY47J16cr9ZwB07vP4J8+LH7qKQnuqkuIAvNWLzeN8tE5YBujZqJLB" crossorigin="anonymous">
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.1/jquery.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.8/dist/js/bootstrap.bundle.min.js" integrity="sha384-FKyoEForCGlyvwx9Hj09JcYn3nv7wiPVlz7YYwJrWVcXK/BmnVDxM+D2scQbITxI" crossorigin="anonymous"></script>
  <script type="module" src="../embed-api.js"></script>
  <script src="../codemirror.js"></script>
  <script src="../runmode.js"></script>
  <script src="../pyret.js"></script>
  <script src="../hilite.js"></script>
  <link rel="stylesheet" type="text/css" href="../codemirror.css" title="default"/>
  <link rel="stylesheet" type="text/css" href="../pyret.css" title="default"/>
  <link rel="stylesheet" type="text/css" href="../styles.css" title="default"/>
  <head>
    <title>reactors</title>
  </head>
  <body>
    <div class="container">
    <root><div><h1 id="reactors" toclevel="1" tocentry="yes">reactors</h1><div><p>Usage:</p><pre class="pyret-highlight">include reactors</pre><pre class="pyret-highlight">import reactors as ...</pre></div><p>Pyret’s reactors help create reactive programs: ones that respond to the passage of time, user interactions, or other stimuli. Reactors also update any visual output. Combining these lets us write games, animations, simulations, and more. They are also designed well to support various forms of testing. Reactors are inspired by the <a href="https://docs.racket-lang.org/teachpack/2htdpuniverse.html">universe</a> package in Racket. For more on their design, <a href="https://cs.brown.edu/~sk/Publications/Papers/Published/plpk-reactor-design/">read this paper</a>.</p><h2 id="s:reactors" toclevel="2" tocentry="yes">Creating Reactors</h2><div><p><span><a name="Reactor"></a></span></p><pre class="pyret-display"><span><a href="../../../../../..//Users/ds26gte/src/pyret-docs-pb/builtin/reactors.html#Reactor">Reactor</a>&lt;a&gt;</span></pre><p>Reactors are values enabling the creation of games, animations, simulations, and other interactive programs.</p></div><p><span class="pyret-highlight"><tt class="pyretexpr">reactor</tt></span>s are created with special syntax:</p><pre class="nothing_special">reactor:
  init: <ref-gloss>‹expr›</ref-gloss>,

  on-tick: <ref-gloss>‹expr›</ref-gloss>,
  seconds-per-tick: <ref-gloss>‹expr›</ref-gloss>

  on-mouse: <ref-gloss>‹expr›</ref-gloss>,
  on-key: <ref-gloss>‹expr›</ref-gloss>,

  to-draw: <ref-gloss>‹expr›</ref-gloss>,

  stop-when: <ref-gloss>‹expr›</ref-gloss>,
  close-when-stop: <ref-gloss>‹expr›</ref-gloss>,

  title: <ref-gloss>‹expr›</ref-gloss>
end</pre><p>Syntactically, all of the components of a <span class="pyret-highlight"><tt class="pyretexpr">reactor</tt></span> are optional, with the exception of <span class="pyret-highlight"><tt class="pyretexpr">init:</tt></span>.  They can also appear in any order—the order displayed above is not required.  Each option can only appear once.  So, for example, these are valid reactors:</p><pre class="good-ex pyret-highlight">reactor:
  init: "inert"
end</pre><pre class="good-ex pyret-highlight">fun increment(x): x + 1 end

reactor:
  on-tick: increment,
  init: 10,
end</pre><pre class="good-ex pyret-highlight">fun tencrement(x): x + 10 end

reactor:
  seconds-per-tick: 0.1,
  title: "Count by 10",
  on-tick: tencrement,
  init: 10,
end</pre><p>These are not allowed:</p><pre class="bad-ex pyret-highlight">reactor:
  init: 10,
  init: 11,
end</pre><pre class="bad-ex pyret-highlight">reactor:
  title: "No init",
  seconds-per-tick: 0.1,
end</pre><pre class="bad-ex pyret-highlight">reactor:
  init: 10,
  not-a-handler: "not allowed"
end</pre><h2 id="Configuring-and-Running-a-Reactor" toclevel="2" tocentry="yes">Configuring and Running a Reactor</h2><div><p><span><a name="interact"></a></span></p><pre class="pyret-display"><a href="../../../../../..//Users/ds26gte/src/pyret-docs-pb/builtin/reactors.html#interact">interact</a> :: <span>(<span><span class="pyret-content">r :: <span><a href="../../../../../..//Users/ds26gte/src/pyret-docs-pb/builtin/reactors.html#Reactor">Reactor</a>&lt;<span>a</span>&gt;</span></span></span>) -&gt; <span><a href="../../../../../..//Users/ds26gte/src/pyret-docs-pb/builtin/reactors.html#Reactor">Reactor</a>&lt;<span>a</span>&gt;</span></span></pre><p>While there are a number of useful operations on a reactor, the most central is interacting with one.  The <a href="../../../../../..//Users/ds26gte/src/pyret-docs-pb/builtin/reactors.html#interact"><span class="pyret-highlight"><tt class="pyretexpr">interact</tt></span></a> function takes a reactor as an argument starts an interactive event loop as described by the reactor’s configuration.  In <url>https://code.pyret.org</url>, for a very simple reactor with just an initial value, the reactor’s display looks like:</p><p><img src="inert-reactor.png"/></p><p>Any value can be used for <span class="pyret-highlight"><tt class="pyretexpr">init</tt></span>, and that value will be shown by default by <a href="../../../../../..//Users/ds26gte/src/pyret-docs-pb/builtin/reactors.html#interact"><span class="pyret-highlight"><tt class="pyretexpr">interact</tt></span></a>.</p><p>Each of the options below adds or configures some interactive option in the reactor.</p></div><h3 id="--init" toclevel="3" tocentry="yes"><span class="pyret-highlight"><tt class="pyretexpr">init</tt></span></h3><p>Specifies the initial value for the reactor.  This is the beginning state of the values that change throughout the simulation or game.</p><h3 id="--on-tick" toclevel="3" tocentry="yes"><span class="pyret-highlight"><tt class="pyretexpr">on-tick</tt></span></h3><p>The <span class="pyret-highlight"><tt class="pyretexpr">on-tick</tt></span> option expects to be given a function of one argument.  The argument should be of the same type as the value given to <span class="pyret-highlight"><tt class="pyretexpr">init</tt></span>, and the function should return the same type.  So for a <span><a href="../../../../../..//Users/ds26gte/src/pyret-docs-pb/builtin/reactors.html#Reactor">Reactor</a>&lt;<span>a</span>&gt;</span>, the type of the on-tick handler is:</p><p><span class="pyret-highlight"><tt class="pyretexpr">on-tick :: <span>(<span>a -&gt; a</span>)</span></tt></span></p><p>This function is called every time the reactor’s clock ticks, which happens by default 28 times per second, this can be configured with <a href="/Users/ds26gte/src/pyret-docs-pb/builtin/reactors.html#s:seconds-per-tick"><span class="pyret-highlight"><tt class="pyretexpr">seconds-per-tick</tt></span></a>.  The value returned by the function becomes the new value of the reactor.</p><p><img src="on-tick.gif"/></p><h3 id="s:seconds-per-tick" toclevel="3" tocentry="yes"><span class="pyret-highlight"><tt class="pyretexpr">seconds-per-tick</tt></span></h3><p>The <span class="pyret-highlight"><tt class="pyretexpr">seconds-per-tick</tt></span> option expects to be given a <a href="../../../../../..//Users/ds26gte/src/pyret-docs-pb/trove/globals.html#Number">Number</a>.</p><p><span class="pyret-highlight"><tt class="pyretexpr">seconds-per-tick :: <a href="../../../../../..//Users/ds26gte/src/pyret-docs-pb/trove/globals.html#Number">Number</a></tt></span></p><p>If it is provided, the delay between two successive calls to the <span class="pyret-highlight"><tt class="pyretexpr">on-tick</tt></span> handler is equal to the provided number in seconds (up to the granularity of tick events on the underlying machine).  If not provided, the default delay is 1/28 seconds.</p><h3 id="--to-draw" toclevel="3" tocentry="yes"><span class="pyret-highlight"><tt class="pyretexpr">to-draw</tt></span></h3><p>The <span class="pyret-highlight"><tt class="pyretexpr">to-draw</tt></span> option expects to be given a function of one argument.  The argument should be of the same type as the value given to <span class="pyret-highlight"><tt class="pyretexpr">init</tt></span>, and the function should return a <a href="../../../../../..//Users/ds26gte/src/pyret-docs-pb/trove/image.html#Image"><span class="pyret-highlight"><tt class="pyretexpr">Image</tt></span></a>.  So for a <span><a href="../../../../../..//Users/ds26gte/src/pyret-docs-pb/builtin/reactors.html#Reactor">Reactor</a>&lt;<span>a</span>&gt;</span>, the type of the to-draw handler is:</p><p><img src="to-draw.gif"/></p><p><span class="pyret-highlight"><tt class="pyretexpr">to-draw :: <span>(<span>a -&gt; <a href="../../../../../..//Users/ds26gte/src/pyret-docs-pb/trove/image.html#Image">Image</a></span>)</span></tt></span></p><p>This function is called each time the reactor’s value changes, and is displayed instead of the reactor’s value.</p><h3 id="--on-key" toclevel="3" tocentry="yes"><span class="pyret-highlight"><tt class="pyretexpr">on-key</tt></span></h3><p>The <span class="pyret-highlight"><tt class="pyretexpr">on-key</tt></span> handler expects to be given a function of two arguments, which describe the current reactor state and a key event:</p><p><span class="pyret-highlight"><tt class="pyretexpr">on-key :: <span>(<span>a, <a href="../../../../../..//Users/ds26gte/src/pyret-docs-pb/trove/globals.html#String">String</a></span>) -&gt; a</span></tt></span></p><p>The string describes a single keypress.  Most keys map directly to single-character strings (striking the A key produces <span class="pyret-highlight"><tt class="pyretexpr">“a”</tt></span>, for instance).  A number of special keys are encoded as longer words for ease of use:</p><ul><li>Backspace key: <span class="pyret-highlight"><tt class="pyretexpr">“backspace”</tt></span></li><li>Tab key: <span class="pyret-highlight"><tt class="pyretexpr">“tab”</tt></span></li><li>Enter key: <span class="pyret-highlight"><tt class="pyretexpr">“enter”</tt></span></li><li>Shift key: <span class="pyret-highlight"><tt class="pyretexpr">“shift”</tt></span></li><li>Control key: <span class="pyret-highlight"><tt class="pyretexpr">“control”</tt></span></li><li>Pause key: <span class="pyret-highlight"><tt class="pyretexpr">“pause”</tt></span></li><li>Escape key: <span class="pyret-highlight"><tt class="pyretexpr">“escape”</tt></span></li><li>Prior key: <span class="pyret-highlight"><tt class="pyretexpr">“prior”</tt></span></li><li>Next key: <span class="pyret-highlight"><tt class="pyretexpr">“next”</tt></span></li><li>End key: <span class="pyret-highlight"><tt class="pyretexpr">“end”</tt></span></li><li>Home key: <span class="pyret-highlight"><tt class="pyretexpr">“home”</tt></span></li><li>Left arrow: <span class="pyret-highlight"><tt class="pyretexpr">“left”</tt></span></li><li>Up arrow: <span class="pyret-highlight"><tt class="pyretexpr">“up”</tt></span></li><li>Right arrow: <span class="pyret-highlight"><tt class="pyretexpr">“right”</tt></span></li><li>Down arrow: <span class="pyret-highlight"><tt class="pyretexpr">“down”</tt></span></li><li>Print key: <span class="pyret-highlight"><tt class="pyretexpr">“print”</tt></span></li><li>Insert key: <span class="pyret-highlight"><tt class="pyretexpr">“insert”</tt></span></li><li>Delete key: <span class="pyret-highlight"><tt class="pyretexpr">“delete”</tt></span></li><li>Backspace key: <span class="pyret-highlight"><tt class="pyretexpr">“backspace”</tt></span></li><li>Num lock key: <span class="pyret-highlight"><tt class="pyretexpr">“numlock”</tt></span></li><li>Scroll key: <span class="pyret-highlight"><tt class="pyretexpr">“scroll”</tt></span></li></ul><h3 id="--on-mouse" toclevel="3" tocentry="yes"><span class="pyret-highlight"><tt class="pyretexpr">on-mouse</tt></span></h3><p>The <span class="pyret-highlight"><tt class="pyretexpr">on-mouse</tt></span> handler expects to be given a function of four arguments, which describe the current reactor state and a mouse event:</p><p><span class="pyret-highlight"><tt class="pyretexpr">on-mouse :: <span>(<span>a, <a href="../../../../../..//Users/ds26gte/src/pyret-docs-pb/trove/globals.html#Number">Number</a>, <a href="../../../../../..//Users/ds26gte/src/pyret-docs-pb/trove/globals.html#Number">Number</a>, <a href="../../../../../..//Users/ds26gte/src/pyret-docs-pb/trove/globals.html#String">String</a> -&gt; a</span>)</span></tt></span></p><p>The two numbers indicate the x and y coordinates of the mouse, and the string indicates the type of mouse event, which is one of:</p><ul><li><span class="pyret-highlight"><tt class="pyretexpr">“button-down”</tt></span> signals that the computer user has pushed a mouse button down;</li><li><span class="pyret-highlight"><tt class="pyretexpr">“button-up”</tt></span> signals that the computer user has let go of a mouse button;</li><li><span class="pyret-highlight"><tt class="pyretexpr">“drag”</tt></span> signals that the computer user is dragging the mouse. A dragging event occurs when the mouse moves while a mouse button is pressed.</li><li><span class="pyret-highlight"><tt class="pyretexpr">“move”</tt></span> signals that the computer user has moved the mouse;</li><li><span class="pyret-highlight"><tt class="pyretexpr">“enter”</tt></span> signals that the computer user has moved the mouse into the canvas area; and</li><li><span class="pyret-highlight"><tt class="pyretexpr">“leave”</tt></span> signals that the computer user has moved the mouse out of the canvas area.</li></ul><h3 id="s:stop-when" toclevel="3" tocentry="yes"><span class="pyret-highlight"><tt class="pyretexpr">stop-when</tt></span></h3><p>The <span class="pyret-highlight"><tt class="pyretexpr">stop-when</tt></span> handler expects to be given a function of one argument. The argument is the reactor state, and it should return a <a href="../../../../../..//Users/ds26gte/src/pyret-docs-pb/trove/globals.html#Boolean">Boolean</a>:</p><p><span class="pyret-highlight"><tt class="pyretexpr">stop-when :: <span>(<span>a -&gt; <a href="../../../../../..//Users/ds26gte/src/pyret-docs-pb/trove/globals.html#Boolean">Boolean</a></span>)</span></tt></span></p><p>This function is called each time the reactor changes its state.  If it returns <span class="pyret-highlight"><tt class="pyretexpr">true</tt></span>, then the reactor stays in that state and no longer responds to stimuli like clock ticks, key presses, or mouse events.  If <a href="/Users/ds26gte/src/pyret-docs-pb/builtin/reactors.html#s:close-when-stop"><span class="pyret-highlight"><tt class="pyretexpr">close-when-stop</tt></span></a> is <span class="pyret-highlight"><tt class="pyretexpr">true</tt></span>, the window closes immediately and evaluation continues.</p><h3 id="s:close-when-stop" toclevel="3" tocentry="yes"><span class="pyret-highlight"><tt class="pyretexpr">close-when-stop</tt></span></h3><p>The <span class="pyret-highlight"><tt class="pyretexpr">close-when-stop</tt></span> option expects to be given a <a href="../../../../../..//Users/ds26gte/src/pyret-docs-pb/trove/globals.html#Boolean">Boolean</a>.</p><p><span class="pyret-highlight"><tt class="pyretexpr">close-when-stop :: <a href="../../../../../..//Users/ds26gte/src/pyret-docs-pb/trove/globals.html#Boolean">Boolean</a></tt></span></p><p>If it is <span class="pyret-highlight"><tt class="pyretexpr">false</tt></span> or not provided, the window stays open when <span class="pyret-highlight"><tt class="pyretexpr">stop-when</tt></span> is triggered, showing the last drawn frame.  If it is <span class="pyret-highlight"><tt class="pyretexpr">true</tt></span>, the window is immediately closed.</p><h3 id="s:title" toclevel="3" tocentry="yes"><span class="pyret-highlight"><tt class="pyretexpr">title</tt></span></h3><p>The <span class="pyret-highlight"><tt class="pyretexpr">title</tt></span> option expects to be given a <a href="../../../../../..//Users/ds26gte/src/pyret-docs-pb/trove/globals.html#String">String</a>.</p><p><span class="pyret-highlight"><tt class="pyretexpr">title :: <a href="../../../../../..//Users/ds26gte/src/pyret-docs-pb/trove/globals.html#String">String</a></tt></span></p><p>The string is used instead of “reactor” in the title bar of the interaction window.</p><h2 id="s:manual-events" toclevel="2" tocentry="yes">Reacting to Events Programmatically</h2><p>Several functions are provided to programmatically trigger the various handlers of a reactor.  This can be used to simulate an interaction for testing or exploration.</p><div><p><span><a name="get-value"></a></span></p><pre class="pyret-display"><a href="../../../../../..//Users/ds26gte/src/pyret-docs-pb/builtin/reactors.html#get-value">get-value</a> :: <span>(<span><span class="pyret-content">r :: <span><a href="../../../../../..//Users/ds26gte/src/pyret-docs-pb/builtin/reactors.html#Reactor">Reactor</a>&lt;<span>a</span>&gt;</span></span></span>) -&gt; a</span></pre><p>  Given a reactor, returns the current value of its state.</p><div><p><b>Examples:</b></p><pre class="pyret-highlight">include reactors

r = reactor:
  init: 0,
end

check:
  get-value(r) is 0
end</pre></div></div><div><p><span><a name="react"></a></span></p><pre class="pyret-display"><a href="../../../../../..//Users/ds26gte/src/pyret-docs-pb/builtin/reactors.html#react">react</a> :: <span>(<span><span class="pyret-content">r :: <span><a href="../../../../../..//Users/ds26gte/src/pyret-docs-pb/builtin/reactors.html#Reactor">Reactor</a>&lt;<span>a</span>&gt;</span></span>, <span class="pyret-content">event :: <a href="../../../../../..//Users/ds26gte/src/pyret-docs-pb/builtin/reactors.html#Event">Event</a></span></span>) -&gt; <span><a href="../../../../../..//Users/ds26gte/src/pyret-docs-pb/builtin/reactors.html#Reactor">Reactor</a>&lt;<span>a</span>&gt;</span></span></pre><p>  Given a reactor and a single <a href="../../../../../..//Users/ds26gte/src/pyret-docs-pb/builtin/reactors.html#Event"><span class="pyret-highlight"><tt class="pyretexpr">Event</tt></span></a>, produce a new reactor that   results from calling the appropriate handler.  Note that it does not change   the state of the input reactor; a <i>new</i> reactor is created.</p><div><p><b>Examples:</b></p><pre class="pyret-highlight">include reactors

fun increment(x): x + 1 end

r = reactor:
  init: 0,
  on-tick: increment,
end

check:
  get-value(r) is 0
  r2 = react(r, time-tick)
  get-value(r2) is 1
  get-value(r) is 0
end</pre></div></div><div><p><span><a name="draw"></a></span></p><pre class="pyret-display"><a href="../../../../../..//Users/ds26gte/src/pyret-docs-pb/builtin/reactors.html#draw">draw</a> :: <span>(<span><span class="pyret-content">r :: <span><a href="../../../../../..//Users/ds26gte/src/pyret-docs-pb/builtin/reactors.html#Reactor">Reactor</a>&lt;<span>a</span>&gt;</span></span></span>) -&gt; <a href="../../../../../..//Users/ds26gte/src/pyret-docs-pb/trove/image.html#Image">Image</a></span></pre><p>Produces the result of calling the <span class="pyret-highlight"><tt class="pyretexpr">to-draw</tt></span> handler on the given reactor with its current state.</p></div><div><p><span><a name="is-stopped"></a></span></p><pre class="pyret-display"><a href="../../../../../..//Users/ds26gte/src/pyret-docs-pb/builtin/reactors.html#is-stopped">is-stopped</a> :: <span>(<span><span class="pyret-content">r :: <span><a href="../../../../../..//Users/ds26gte/src/pyret-docs-pb/builtin/reactors.html#Reactor">Reactor</a>&lt;<span>a</span>&gt;</span></span></span>) -&gt; <a href="../../../../../..//Users/ds26gte/src/pyret-docs-pb/trove/globals.html#Boolean">Boolean</a></span></pre><p>Produces the result of calling the <span class="pyret-highlight"><tt class="pyretexpr">stop-when</tt></span> handler on the given reactor with its current state.</p></div><pre class="pyret-display"><span><a name="Event"></a></span><span>data <a href="../../../../../..//Users/ds26gte/src/pyret-docs-pb/builtin/reactors.html#Event">Event</a></span>
<div><tt>   | <span>time-tick</span></tt>
<tt>   | <span><a href="../../../../../..//Users/ds26gte/src/pyret-docs-pb/builtin/reactors.html#keypress">keypress</a>(<span>key :: <a href="../../../../../..//Users/ds26gte/src/pyret-docs-pb/trove/globals.html#String">String</a></span>)</span></tt>
<tt>   | <span><a href="../../../../../..//Users/ds26gte/src/pyret-docs-pb/builtin/reactors.html#mouse">mouse</a>(<span>x :: <a href="../../../../../..//Users/ds26gte/src/pyret-docs-pb/trove/globals.html#Number">Number</a></span>, <span>y :: <a href="../../../../../..//Users/ds26gte/src/pyret-docs-pb/trove/globals.html#Number">Number</a></span>, <span>kind :: <a href="../../../../../..//Users/ds26gte/src/pyret-docs-pb/trove/globals.html#String">String</a></span>)</span></tt></div><tt>end</tt></pre><div class="insetpara nested"><div><p><span><a name="time-tick"></a></span></p><pre class="pyret-display">time-tick :: <a href="../../../../../..//Users/ds26gte/src/pyret-docs-pb/builtin/reactors.html#Event">Event</a></pre><p>Represents a single tick of the clock</p></div><div><p><span><a name="keypress"></a></span></p><pre class="pyret-display"><a href="../../../../../..//Users/ds26gte/src/pyret-docs-pb/builtin/reactors.html#keypress">keypress</a> :: (<span>key :: <a href="../../../../../..//Users/ds26gte/src/pyret-docs-pb/trove/globals.html#String">String</a></span>) -&gt; <a href="../../../../../..//Users/ds26gte/src/pyret-docs-pb/builtin/reactors.html#Event">Event</a></pre><p>Represents a key press of the given key.</p><p></p></div><div><p><span><a name="mouse"></a></span></p><pre class="pyret-display"><a href="../../../../../..//Users/ds26gte/src/pyret-docs-pb/builtin/reactors.html#mouse">mouse</a> :: (<span>x :: <a href="../../../../../..//Users/ds26gte/src/pyret-docs-pb/trove/globals.html#Number">Number</a></span>, <span>y :: <a href="../../../../../..//Users/ds26gte/src/pyret-docs-pb/trove/globals.html#Number">Number</a></span>, <span>kind :: <a href="../../../../../..//Users/ds26gte/src/pyret-docs-pb/trove/globals.html#String">String</a></span>) -&gt; <a href="../../../../../..//Users/ds26gte/src/pyret-docs-pb/builtin/reactors.html#Event">Event</a></pre><p>Represents a mouse event at the given location of the given kind.</p><p></p></div></div><h2 id="Tracing" toclevel="2" tocentry="yes">Tracing</h2><p>Several functions control <i>tracing</i> the evaluation of a reactor to provide the history of states as data.</p><div><p><span><a name="interact-trace"></a></span></p><pre class="pyret-display"><a href="../../../../../..//Users/ds26gte/src/pyret-docs-pb/builtin/reactors.html#interact-trace">interact-trace</a> :: <span>(<span><span class="pyret-content">r :: <span><a href="../../../../../..//Users/ds26gte/src/pyret-docs-pb/builtin/reactors.html#Reactor">Reactor</a>&lt;<span>a</span>&gt;</span></span></span>) -&gt; <a href="../../../../../..//Users/ds26gte/src/pyret-docs-pb/trove/globals.html#Table">Table</a></span></pre><p>Evaluates the same as <a href="../../../../../..//Users/ds26gte/src/pyret-docs-pb/builtin/reactors.html#interact"><span class="pyret-highlight"><tt class="pyretexpr">interact</tt></span></a>, but instead of returning the final reactor, return a <a href="../../../../../..//Users/ds26gte/src/pyret-docs-pb/trove/globals.html#Table">Table</a> of two columns, <span class="pyret-highlight"><tt class="pyretexpr">tick</tt></span> and <span class="pyret-highlight"><tt class="pyretexpr">state</tt></span>.  The <span class="pyret-highlight"><tt class="pyretexpr">state</tt></span> column holds the values of all the states that the reactor held during the interaction, and the <span class="pyret-highlight"><tt class="pyretexpr">tick</tt></span> column numbers them.</p><p>This is equivalent to <span class="pyret-highlight"><tt class="pyretexpr">get-trace-as-table(interact(start-trace(r)))</tt></span>.</p></div><div><p><span><a name="simulate-trace"></a></span></p><pre class="pyret-display"><a href="../../../../../..//Users/ds26gte/src/pyret-docs-pb/builtin/reactors.html#simulate-trace">simulate-trace</a> :: <span>(<span><span class="pyret-content">r :: <span><a href="../../../../../..//Users/ds26gte/src/pyret-docs-pb/builtin/reactors.html#Reactor">Reactor</a>&lt;<span>a</span>&gt;</span></span>, <span class="pyret-content">limit :: <a href="../../../../../..//Users/ds26gte/src/pyret-docs-pb/trove/globals.html#Number">Number</a></span></span>) -&gt; <a href="../../../../../..//Users/ds26gte/src/pyret-docs-pb/trove/globals.html#Table">Table</a></span></pre><p>Similar to <a href="../../../../../..//Users/ds26gte/src/pyret-docs-pb/builtin/reactors.html#interact-trace"><span class="pyret-highlight"><tt class="pyretexpr">interact-trace</tt></span></a>, but instead of opening an interaction window, simply supplies tick events to the reactor until either the <a href="/Users/ds26gte/src/pyret-docs-pb/builtin/reactors.html#s:stop-when"><span class="pyret-highlight"><tt class="pyretexpr">stop-when</tt></span></a> condition becomes true, or <span class="pyret-highlight"><tt class="pyretexpr">limit</tt></span> ticks have been processed.  Useful for driving simulations without waiting for delayed tick intervals.</p></div><div><p><span><a name="start-trace"></a></span></p><pre class="pyret-display"><a href="../../../../../..//Users/ds26gte/src/pyret-docs-pb/builtin/reactors.html#start-trace">start-trace</a> :: <span>(<span><span class="pyret-content">r :: <span><a href="../../../../../..//Users/ds26gte/src/pyret-docs-pb/builtin/reactors.html#Reactor">Reactor</a>&lt;<span>a</span>&gt;</span></span></span>) -&gt; <span><a href="../../../../../..//Users/ds26gte/src/pyret-docs-pb/builtin/reactors.html#Reactor">Reactor</a>&lt;<span>a</span>&gt;</span></span></pre><p>Returns a new reactor that is just like the input reactor, but has tracing enabled.  This means on each interaction, or call to <a href="../../../../../..//Users/ds26gte/src/pyret-docs-pb/builtin/reactors.html#react"><span class="pyret-highlight"><tt class="pyretexpr">react</tt></span></a>, the current state will be saved to a list in the reactor, for later extraction with <a href="../../../../../..//Users/ds26gte/src/pyret-docs-pb/builtin/reactors.html#get-trace"><span class="pyret-highlight"><tt class="pyretexpr">get-trace</tt></span></a> or <a href="../../../../../..//Users/ds26gte/src/pyret-docs-pb/builtin/reactors.html#get-trace-as-table"><span class="pyret-highlight"><tt class="pyretexpr">get-trace-as-table</tt></span></a>.</p></div><div><p><span><a name="stop-trace"></a></span></p><pre class="pyret-display"><a href="../../../../../..//Users/ds26gte/src/pyret-docs-pb/builtin/reactors.html#stop-trace">stop-trace</a> :: <span>(<span><span class="pyret-content">r :: <span><a href="../../../../../..//Users/ds26gte/src/pyret-docs-pb/builtin/reactors.html#Reactor">Reactor</a>&lt;<span>a</span>&gt;</span></span></span>) -&gt; <span><a href="../../../../../..//Users/ds26gte/src/pyret-docs-pb/builtin/reactors.html#Reactor">Reactor</a>&lt;<span>a</span>&gt;</span></span></pre><p>Returns a new reactor with tracing disabled.  This is useful for toggling a reactor back and forth between modes, since storing traces can take up lots of memory for if states are large or an interaction is long-running.</p></div><div><p><span><a name="get-trace"></a></span></p><pre class="pyret-display"><a href="../../../../../..//Users/ds26gte/src/pyret-docs-pb/builtin/reactors.html#get-trace">get-trace</a> :: <span>(<span><span class="pyret-content">r :: <span><a href="../../../../../..//Users/ds26gte/src/pyret-docs-pb/builtin/reactors.html#Reactor">Reactor</a>&lt;<span>a</span>&gt;</span></span></span>) -&gt; <span><a href="../../../../../..//Users/ds26gte/src/pyret-docs-pb/trove/lists.html#List">List</a>&lt;<span>a</span>&gt;</span></span></pre><p>Returns a <a href="../../../../../..//Users/ds26gte/src/pyret-docs-pb/trove/lists.html#List">List</a> of the traced states of the reactor.</p></div><div><p><span><a name="get-trace-as-table"></a></span></p><pre class="pyret-display"><a href="../../../../../..//Users/ds26gte/src/pyret-docs-pb/builtin/reactors.html#get-trace-as-table">get-trace-as-table</a> :: <span>(<span><span class="pyret-content">r :: <span><a href="../../../../../..//Users/ds26gte/src/pyret-docs-pb/builtin/reactors.html#Reactor">Reactor</a>&lt;<span>a</span>&gt;</span></span></span>) -&gt; <a href="../../../../../..//Users/ds26gte/src/pyret-docs-pb/trove/globals.html#Table">Table</a></span></pre><p>Returns a <a href="../../../../../..//Users/ds26gte/src/pyret-docs-pb/trove/globals.html#Table">Table</a> of the traced states of the reactor, in two columns, <span class="pyret-highlight"><tt class="pyretexpr">tick</tt></span> and <span class="pyret-highlight"><tt class="pyretexpr">state</tt></span>.</p></div></div></root>
    <hr/>
    <!-- The current page is builtin/reactors.html. -->
    <a class="floatleft" href="../trove/image.html">⏴⏴⏴</a>
    <a class="floatright" href="../trove/chart.html">⏵⏵⏵</a>
    </div>
  </body>
</html>