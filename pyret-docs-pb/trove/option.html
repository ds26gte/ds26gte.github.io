<!doctype html>
<html lang="en">
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.8/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-sRIl4kxILFvY47J16cr9ZwB07vP4J8+LH7qKQnuqkuIAvNWLzeN8tE5YBujZqJLB" crossorigin="anonymous">
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.1/jquery.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.8/dist/js/bootstrap.bundle.min.js" integrity="sha384-FKyoEForCGlyvwx9Hj09JcYn3nv7wiPVlz7YYwJrWVcXK/BmnVDxM+D2scQbITxI" crossorigin="anonymous"></script>
  <script type="module" src="../pollenboots/embed-api.js"></script>
  <script src="../pollenboots/codemirror.js"></script>
  <script src="../pollenboots/runmode.js"></script>
  <script src="../pollenboots/pyret.js"></script>
  <script src="../pollenboots/hilite.js"></script>
  <link rel="stylesheet" type="text/css" href="../pollenboots/codemirror.css" title="default"/>
  <link rel="stylesheet" type="text/css" href="../pollenboots/pyret.css" title="default"/>
  <link rel="stylesheet" type="text/css" href="../pollenboots/styles.css" title="default"/>
  <head>
    <title>option</title>
  </head>
  <body>
    <div class="container">
    <root><div><h1 id="option" toclevel="1" tocentry="yes">option</h1><div><p>Usage:</p><pre class="pyret-highlight">include option</pre><pre class="pyret-highlight">import option as ...</pre></div><p>  </p><h2 id="The-Option-Datatype" toclevel="2" tocentry="yes">The Option Datatype</h2><p>  </p><pre class="pyret-display"><span><a name="Option"></a></span><span>data <a href="../trove/option.html#Option">Option</a>&lt;a&gt;</span>
<div><tt>   | <span><a href="../trove/option.html#none">none</a></span></tt>
<tt>   | <span><a href="../trove/option.html#some">some</a>(<span>value :: a</span>)</span></tt></div><tt>end</tt></pre><p>  </p><div class="insetpara nested"><div><p><span><a name="none"></a></span></p><pre class="pyret-display"><a href="../trove/option.html#none">none</a> :: <span><a href="../trove/option.html#Option">Option</a>&lt;<span>a</span>&gt;</span></pre></div><div><p><span><a name="some"></a></span></p><pre class="pyret-display"><a href="../trove/option.html#some">some</a> :: (<span>value :: a</span>) -&gt; <span><a href="../trove/option.html#Option">Option</a>&lt;<span>a</span>&gt;</span></pre><p></p></div><div><p><span><a name="is-none"></a></span></p><pre class="pyret-display"><a href="../trove/option.html#is-none">is-none</a> :: <span><span class="pyret-content">(val :: <a href="../trove/globals.html#Any">Any</a>)</span> -&gt; <a href="../trove/globals.html#Boolean">Boolean</a></span></pre></div><div><p><span><a name="is-some"></a></span></p><pre class="pyret-display"><a href="../trove/option.html#is-some">is-some</a> :: <span><span class="pyret-content">(val :: <a href="../trove/globals.html#Any">Any</a>)</span> -&gt; <a href="../trove/globals.html#Boolean">Boolean</a></span></pre></div></div><p><tt class="pyret-highlight">Option</tt> implements a functional programming idiom that is often used when a function may or may not return a valid or meaningful value.  If there is no return value, the function returns <tt class="pyret-highlight">none</tt>.  If there is a meaningful return value, it returns that value wrapped in the <tt class="pyret-highlight">some</tt> variant.</p><p>Some Pyret library functions return <tt class="pyret-highlight">Option</tt> values, such as <tt class="pyret-highlight">string-to-number</tt>.  When the string is not a valid numeric value, it returns <tt class="pyret-highlight">none</tt>; otherwise, it returns the numeric value wrapped in <tt class="pyret-highlight">some</tt>.  A <tt class="pyret-highlight">cases</tt> expression can be used to evaluate both <tt class="pyret-highlight">Option</tt> response variants.</p><div><p><b>Examples:</b></p><pre class="pyret-highlight">fun set-angle(s :: String) -&gt; Number:
  doc: "If s is not a numeric string, default to 0."
  cases(Option) string-to-number(s):
    | some(a) =&gt; a
    | none =&gt; 0
  end
where:
  set-angle("90") is 90
  set-angle("") is 0
  set-angle("x") is 0
end</pre><p><a class="show-embed" code="fun set-angle(s :: String) -&gt; Number: 
    doc: &quot;If s is not a numeric string, default to 0.&quot; 
    cases(Option) string-to-number(s): 
      | some(a) =&gt; a 
      | none =&gt; 0 
    end 
 where: 
    set-angle(&quot;90&quot;) is 90 
    set-angle(&quot;&quot;) is 0 
    set-angle(&quot;x&quot;) is 0 
 end">(Try it!)</a></p></div><p>In contrast, <tt class="pyret-highlight">string-index-of</tt> does <italic>not</italic> return an <tt class="pyret-highlight">Option</tt> return value.Instead , it returns a <tt class="pyret-highlight">Number</tt> that is either a valid index <tt class="pyret-highlight">Number</tt> or <tt>-1</tt> if the string is not found:</p><div><p><b>Examples:</b></p><pre class="pyret-highlight">fun find-smiley(s :: String) -&gt; String:
  i = string-index-of(s, "üòä")
  ask:
    | i == -1 then: "No smiley!"
    | otherwise: string-append("Smiley at ", num-to-string(i))
  end
where:
  find-smiley("abcd") is "No smiley!"
  find-smiley("aüòäcd") is "Smiley at 1"
end</pre><p><a class="show-embed" code="fun find-smiley(s :: String) -&gt; String: 
    i = string-index-of(s, &quot;üòä&quot;) 
    ask: 
      | i == -1 then: &quot;No smiley!&quot; 
      | otherwise: string-append(&quot;Smiley at &quot;, num-to-string(i)) 
    end 
 where: 
    find-smiley(&quot;abcd&quot;) is &quot;No smiley!&quot; 
    find-smiley(&quot;aüòäcd&quot;) is &quot;Smiley at 1&quot; 
 end">(Try it!)</a></p></div><p>We can create a version of <tt>find-smiley</tt> that returns an <tt class="pyret-highlight">Option</tt> value, such as this:</p><div><p><b>Examples:</b></p><pre class="pyret-highlight">fun option-smiley(s :: String) -&gt; Option&lt;Number&gt;:
  i = string-index-of(s, "üòä")
  ask:
    | i == -1 then: none
    | otherwise: some(i)
  end
where:
  option-smiley("abcd") is none
  option-smiley("aüòäcd") is some(1)
end</pre><p><a class="show-embed" code="fun option-smiley(s :: String) -&gt; Option&lt;Number&gt;: 
    i = string-index-of(s, &quot;üòä&quot;) 
    ask: 
      | i == -1 then: none 
      | otherwise: some(i) 
    end 
 where: 
    option-smiley(&quot;abcd&quot;) is none 
    option-smiley(&quot;aüòäcd&quot;) is some(1) 
 end">(Try it!)</a></p></div><h2 id="Option-Methods" toclevel="2" tocentry="yes">Option Methods</h2><p>  </p><div><p><span><a name=".and-then"></a></span></p><pre class="pyret-display">.and-then :: <span><span class="pyret-content">(f :: <span class="pyret-content">(a :: b)</span>)</span> -&gt; <span><a href="../trove/option.html#Option">Option</a>&lt;<span>b</span>&gt;</span></span></pre></div><p>  For <a href="../trove/option.html#none"><tt class="pyret-highlight">none</tt></a>, returns <a href="../trove/option.html#none"><tt class="pyret-highlight">none</tt></a>.  For <a href="../trove/option.html#some"><tt class="pyret-highlight">some</tt></a>, applies   <tt class="pyret-highlight">f</tt> to the <tt class="pyret-highlight">value</tt> field and returns a new <a href="../trove/option.html#some"><tt class="pyret-highlight">some</tt></a> with the   updated value.</p><div><p><b>Examples:</b></p><pre class="pyret-highlight">check:
  add1 = lam(n): n + 1 end
  n = none
  n.and-then(add1) is none
  s = some(5)
  s.and-then(add1) is some(6)
end</pre><p><a class="show-embed" code="check: 
    add1 = lam(n): n + 1 end 
    n = none 
    n.and-then(add1) is none 
    s = some(5) 
    s.and-then(add1) is some(6) 
 end">(Try it!)</a></p></div><p>  </p><div><p><span><a name=".or-else"></a></span></p><pre class="pyret-display">.or-else :: <span><span class="pyret-content">(v :: a)</span> -&gt; a</span></pre></div><p>  For <a href="../trove/option.html#none"><tt class="pyret-highlight">none</tt></a>, returns <tt class="pyret-highlight">v</tt>.  For <a href="../trove/option.html#some"><tt class="pyret-highlight">some</tt></a>, returns the   <tt class="pyret-highlight">value</tt> field.  Useful for providing default values.</p><div><p><b>Examples:</b></p><pre class="pyret-highlight">check:
  n = none
  n.or-else(42) is 42

  s = some(5)
  s.or-else(10) is 5
end</pre><p><a class="show-embed" code="check: 
    n = none 
    n.or-else(42) is 42 

    s = some(5) 
    s.or-else(10) is 5 
 end">(Try it!)</a></p></div><p>Therefore, our example above of <tt>set-angle</tt>, which defaults to <tt>0</tt>, could be written this way:</p><div><p><b>Examples:</b></p><pre class="pyret-highlight">fun set-angle(s :: String) -&gt; Number:
  doc: "If s is not a numeric string, default to 0."
  string-to-number(s).or-else(0)
where:
  set-angle("90") is 90
  set-angle("") is 0
  set-angle("x") is 0
end</pre><p><a class="show-embed" code="fun set-angle(s :: String) -&gt; Number: 
    doc: &quot;If s is not a numeric string, default to 0.&quot; 
    string-to-number(s).or-else(0) 
 where: 
    set-angle(&quot;90&quot;) is 90 
    set-angle(&quot;&quot;) is 0 
    set-angle(&quot;x&quot;) is 0 
 end">(Try it!)</a></p></div></div></root>
    <hr/>
    <!-- The current page is trove/option.html. -->
    <a class="floatleft" href="../builtin/booleans.html">‚è¥‚è¥‚è¥</a>
    <a class="floatright" href="../trove/either.html">‚èµ‚èµ‚èµ</a>
    </div>
  </body>
</html>