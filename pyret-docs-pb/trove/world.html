<!doctype html>
<html lang="en">
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.8/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-sRIl4kxILFvY47J16cr9ZwB07vP4J8+LH7qKQnuqkuIAvNWLzeN8tE5YBujZqJLB" crossorigin="anonymous">
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.1/jquery.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.8/dist/js/bootstrap.bundle.min.js" integrity="sha384-FKyoEForCGlyvwx9Hj09JcYn3nv7wiPVlz7YYwJrWVcXK/BmnVDxM+D2scQbITxI" crossorigin="anonymous"></script>
  <script type="module" src="../pollenboots/embed-api.js"></script>
  <script src="../pollenboots/codemirror.js"></script>
  <script src="../pollenboots/runmode.js"></script>
  <script src="../pollenboots/pyret.js"></script>
  <script src="../pollenboots/hilite.js"></script>
  <link rel="stylesheet" type="text/css" href="../pollenboots/codemirror.css" title="default"/>
  <link rel="stylesheet" type="text/css" href="../pollenboots/pyret.css" title="default"/>
  <link rel="stylesheet" type="text/css" href="../pollenboots/styles.css" title="default"/>
  <head>
    <title>world</title>
  </head>
  <body>
    <div class="container">
    <root><div><h1 id="world" toclevel="1" tocentry="yes">world</h1><div><p>Usage:</p><pre class="pyret-highlight">include world</pre><pre class="pyret-highlight">import world as ...</pre></div><div align="center"><p><b>This library is archived.</b></p><p><i>The <a href="../builtin/reactors.html#reactors"></a> library provides a significantly improved version of this library. We recommend that you use that instead.</i></p></div><p>Pyret’s world library facilitates creating animated time-based simulation and interactive programs.</p><p>Handler functions written for <tt class="pyret-highlight">big-bang</tt> are compatible with <tt class="pyret-highlight">reactors</tt>, so it is easy to start with <tt class="pyret-highlight">big-bang</tt> and move to <tt class="pyret-highlight">reactors</tt> if you need their advanced features.</p><p>  </p><div class="margin-note"><p>The world model is based on the universe teachpack in HtDP. You can find documentation for the teachpack here:</p><p><url>https://docs.racket-lang.org/teachpack/2htdpuniverse.html</url></p></div><h2 id="Starting-a-big-bang" toclevel="2" tocentry="yes">Starting a big-bang</h2><p> </p><div><p><span><a name="big-bang"></a></span></p><pre class="pyret-display"><a href="../trove/world.html#big-bang">big-bang</a> :: <span>(<span><span class="pyret-content">init :: a</span>, <span class="pyret-content">handlers :: <span><a href="../trove/lists.html#List">List</a>&lt;<span><span><a href="../trove/world.html#WorldConfig">WorldConfig</a>&lt;<span>a</span>&gt;</span></span>&gt;</span></span></span>) -&gt; a</span></pre></div><p><tt class="pyret-highlight">big-bang</tt> is called with an <tt>init</tt> state and a list of handler functions.  It immediately creates an interactive window based on <tt>init</tt> and optionally begins drawing graphics and text as defined by the <tt class="pyret-highlight">to-draw</tt> function, running handler functions scheduled by <tt class="pyret-highlight">on-tick</tt> and <tt class="pyret-highlight">on-tick-n</tt> as well as those triggered by <tt class="pyret-highlight">on-mouse</tt> and <tt class="pyret-highlight">on-key</tt>.</p><pre class="nothing_special">big-bang(init,
  [list:
    on-tick(<span><a href="../lang/forms.html#Pyret-expr">‹expr›</a></span>),
    on-tick-n(<span><a href="../lang/forms.html#Pyret-expr">‹expr›</a></span>),
    on-mouse(<span><a href="../lang/forms.html#Pyret-expr">‹expr›</a></span>),
    on-key(<span><a href="../lang/forms.html#Pyret-expr">‹expr›</a></span>),
    to-draw(<span><a href="../lang/forms.html#Pyret-expr">‹expr›</a></span>),
    stop-when(<span><a href="../lang/forms.html#Pyret-expr">‹expr›</a></span>)
  ]
)</pre><p>All of the handlers for <tt class="pyret-highlight">big-bang</tt> (in the list argument) are optional.  They can also appear in any order—the order displayed above is not required.  Each option can only appear once.  So, for example, these are valid <tt class="pyret-highlight">big-bang</tt>s:</p><pre class="good-ex pyret-highlight">include world
big-bang('inert', [list: ])

fun increment(x):
  x + 1
end

big-bang(10, [list: on-tick(increment)])
big-bang(10, [list: on-tick-n(increment, 3)])</pre><p>These are not allowed:</p><pre class="bad-ex pyret-highlight">big-bang(10, 11)</pre><pre class="bad-ex pyret-highlight">big-bang([list: on-tick(increment)])</pre><pre class="bad-ex pyret-highlight">big-bang(10, [list: not-a-handler(increment)])</pre><pre class="bad-ex pyret-highlight">big-bang(10, on-tick(increment))</pre><p>  </p><h2 id="functions-world" toclevel="2" tocentry="yes">Functions</h2><p>  </p><div><p><span><a name="on-tick"></a></span></p><pre class="pyret-display"><a href="../trove/world.html#on-tick">on-tick</a> :: <span>(<span><span class="pyret-content">handler :: <span>(<span>a -&gt; a</span>)</span></span></span>) -&gt; <span><a href="../trove/world.html#WorldConfig">WorldConfig</a>&lt;<span>a</span>&gt;</span></span></pre><p>Consumes a function and returns a handler that, when passed to <a href="../trove/world.html#big-bang"><tt class="pyret-highlight">big-bang</tt></a>, will be called each program tick with the current world state.</p></div><p>  </p><div><p><span><a name="on-tick-n"></a></span></p><pre class="pyret-display"><a href="../trove/world.html#on-tick-n">on-tick-n</a> :: <span>(<span><span class="pyret-content">handler :: <span>(<span>a -&gt; a</span>)</span></span>, <span class="pyret-content">n :: <a href="../trove/globals.html#Number">Number</a></span></span>) -&gt; <span><a href="../trove/world.html#WorldConfig">WorldConfig</a>&lt;<span>a</span>&gt;</span></span></pre><p>Consumes a function and returns a handler that, when passed to <a href="../trove/world.html#big-bang"><tt class="pyret-highlight">big-bang</tt></a>, will be called every <tt class="pyret-highlight">n</tt> program ticks with the current world state.</p></div><p>  </p><div><p><span><a name="to-draw"></a></span></p><pre class="pyret-display"><a href="../trove/world.html#to-draw">to-draw</a> :: <span>(<span><span class="pyret-content">drawer :: <span>(<span>a -&gt; <a href="../trove/image.html#Scene">Scene</a></span>)</span></span></span>) -&gt; <span><a href="../trove/world.html#WorldConfig">WorldConfig</a>&lt;<span>a</span>&gt;</span></span></pre><p>Consumes a function and returns a handler that, when passed to <a href="../trove/world.html#big-bang"><tt class="pyret-highlight">big-bang</tt></a>, will inform the world program what to draw.</p></div><p>  </p><div><p><span><a name="on-key"></a></span></p><pre class="pyret-display"><a href="../trove/world.html#on-key">on-key</a> :: <span>(<span><span class="pyret-content">onKey :: <span>(<span>a, <a href="../trove/globals.html#String">String</a> -&gt; a</span>)</span></span></span>) -&gt; <span><a href="../trove/world.html#WorldConfig">WorldConfig</a>&lt;<span>a</span>&gt;</span></span></pre><p>Consumes a function and returns a handler that, when passed to <a href="../trove/world.html#big-bang"><tt class="pyret-highlight">big-bang</tt></a>, will be called every time a key is pressed. The function is called with the current world state and a <a href="../trove/globals.html#String"><tt class="pyret-highlight">String</tt></a> representing the pressed key. For most keys, this is just the corresponding single character.</p><p>The special keys are:</p><ul><li>Backspace key: <tt class="pyret-highlight">“backspace”</tt></li><li>Tab key: <tt class="pyret-highlight">“tab”</tt></li><li>Enter key: <tt class="pyret-highlight">“enter”</tt></li><li>Shift key: <tt class="pyret-highlight">“shift”</tt></li><li>Control key: <tt class="pyret-highlight">“control”</tt></li><li>Pause key: <tt class="pyret-highlight">“pause”</tt></li><li>Escape key: <tt class="pyret-highlight">“escape”</tt></li><li>Prior key: <tt class="pyret-highlight">“prior”</tt></li><li>Next key: <tt class="pyret-highlight">“next”</tt></li><li>End key: <tt class="pyret-highlight">“end”</tt></li><li>Home key: <tt class="pyret-highlight">“home”</tt></li><li>Left arrow: <tt class="pyret-highlight">“left”</tt></li><li>Up arrow: <tt class="pyret-highlight">“up”</tt></li><li>Right arrow: <tt class="pyret-highlight">“right”</tt></li><li>Down arrow: <tt class="pyret-highlight">“down”</tt></li><li>Print key: <tt class="pyret-highlight">“print”</tt></li><li>Insert key: <tt class="pyret-highlight">“insert”</tt></li><li>Delete key: <tt class="pyret-highlight">“delete”</tt></li><li>Backspace key: <tt class="pyret-highlight">“backspace”</tt></li><li>Num lock key: <tt class="pyret-highlight">“numlock”</tt></li><li>Scroll key: <tt class="pyret-highlight">“scroll”</tt></li></ul></div><p>  </p><div><p><span><a name="on-mouse"></a></span></p><pre class="pyret-display"><a href="../trove/world.html#on-mouse">on-mouse</a> :: <span>(<span><span class="pyret-content">mouse-handler :: <span>a, <a href="../trove/globals.html#Number">Number</a>, <a href="../trove/globals.html#Number">Number</a>, <a href="../trove/globals.html#String">String</a> -&gt; a</span></span></span>) -&gt; <span><a href="../trove/world.html#WorldConfig">WorldConfig</a>&lt;<span>a</span>&gt;</span></span></pre><p>Consumes a function and returns a handler that, when passed to <a href="../trove/world.html#big-bang"><tt class="pyret-highlight">big-bang</tt></a>, will be called on every sampled mouse movement. The function will receive the world state, the current <tt class="pyret-highlight">x</tt> and <tt class="pyret-highlight">y</tt> positions of the mouse, and a <a href="../trove/globals.html#String"><tt class="pyret-highlight">String</tt></a> representing a mouse event. Possible mouse events are:</p><ul><li><tt class="pyret-highlight">“button-down”</tt> signals that the computer user has pushed a mouse button down;</li><li><tt class="pyret-highlight">“button-up”</tt> signals that the computer user has let go of a mouse button;</li><li><tt class="pyret-highlight">“drag”</tt> signals that the computer user is dragging the mouse. A dragging event occurs when the mouse moves while a mouse button is pressed.</li><li><tt class="pyret-highlight">“move”</tt> signals that the computer user has moved the mouse;</li><li><tt class="pyret-highlight">“enter”</tt> signals that the computer user has moved the mouse into the canvas area; and</li><li><tt class="pyret-highlight">“leave”</tt> signals that the computer user has moved the mouse out of the canvas area.</li></ul></div><p>  </p><div><p><span><a name="stop-when"></a></span></p><pre class="pyret-display"><a href="../trove/world.html#stop-when">stop-when</a> :: <span>(<span><span class="pyret-content">stopper :: <span>(<span>a -&gt; <a href="../trove/globals.html#Boolean">Boolean</a></span>)</span></span></span>) -&gt; <span><a href="../trove/world.html#WorldConfig">WorldConfig</a>&lt;<span>a</span>&gt;</span></span></pre><p>Consumes a function and returns a handler that, when passed to <a href="../trove/world.html#big-bang"><tt class="pyret-highlight">big-bang</tt></a>, will be called to determine if the world should stop running. If the function returns <tt class="pyret-highlight">true</tt>, then no other handlers will be called. The <a href="../trove/world.html#big-bang"><tt class="pyret-highlight">big-bang</tt></a> function will return this last world state.</p></div><p>  </p><div><p><span><a name="is-world-config"></a></span></p><pre class="pyret-display"><a href="../trove/world.html#is-world-config">is-world-config</a> :: <span>(<span><span class="pyret-content">v :: <a href="../trove/globals.html#Any">Any</a></span></span>) -&gt; <a href="../trove/globals.html#Boolean">Boolean</a></span></pre><p>Tests if the input is of type <a href="../trove/world.html#WorldConfig"><tt class="pyret-highlight">WorldConfig</tt></a>.</p></div><p>  </p><div><p><span><a name="is-key-equal"></a></span></p><pre class="pyret-display"><a href="../trove/world.html#is-key-equal">is-key-equal</a> :: <span>(<span><span class="pyret-content">key1 :: <a href="../trove/globals.html#String">String</a></span>, <span class="pyret-content">key2 :: <a href="../trove/globals.html#String">String</a></span></span>) -&gt; <a href="../trove/globals.html#Boolean">Boolean</a></span></pre><p>Tests if two key events are equals to each other.</p></div><p>    </p><h2 id="world_DataTypes" toclevel="2" tocentry="yes">Data Types</h2><p>  </p><div><p><span><a name="WorldConfig"></a></span></p><pre class="pyret-display"><span><a href="../trove/world.html#WorldConfig">WorldConfig</a>&lt;a&gt;</span></pre><p>This type includes the values that can be passed to <a href="../trove/world.html#big-bang"><tt class="pyret-highlight">big-bang</tt></a> as event handlers (e.g. <a href="../trove/world.html#on-tick"><tt class="pyret-highlight">on-tick</tt></a> and <a href="../trove/world.html#on-key"><tt class="pyret-highlight">on-key</tt></a>), renderers (e.g. <a href="../trove/world.html#to-draw"><tt class="pyret-highlight">to-draw</tt></a>), and other configuration options (e.g. <a href="../trove/world.html#stop-when"><tt class="pyret-highlight">stop-when</tt></a>).</p></div></div></root>
    <hr/>
    <!-- The current page is trove/world.html. -->
    <a class="floatleft" href="../trove/image-structs.html">⏴⏴⏴</a>
    <a class="floatright" href="../libraries-internal.html">⏵⏵⏵</a>
    </div>
  </body>
</html>