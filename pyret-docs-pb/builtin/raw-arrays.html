<!doctype html>
<html lang="en">
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.8/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-sRIl4kxILFvY47J16cr9ZwB07vP4J8+LH7qKQnuqkuIAvNWLzeN8tE5YBujZqJLB" crossorigin="anonymous">
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.1/jquery.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.8/dist/js/bootstrap.bundle.min.js" integrity="sha384-FKyoEForCGlyvwx9Hj09JcYn3nv7wiPVlz7YYwJrWVcXK/BmnVDxM+D2scQbITxI" crossorigin="anonymous"></script>
  <script type="module" src="../pollenboots/embed-api.js"></script>
  <script src="../pollenboots/codemirror.js"></script>
  <script src="../pollenboots/runmode.js"></script>
  <script src="../pollenboots/pyret.js"></script>
  <script src="../pollenboots/hilite.js"></script>
  <link rel="stylesheet" type="text/css" href="../pollenboots/codemirror.css" title="default"/>
  <link rel="stylesheet" type="text/css" href="../pollenboots/pyret.css" title="default"/>
  <link rel="stylesheet" type="text/css" href="../pollenboots/styles.css" title="default"/>
  <head>
    <title>RawArray</title>
  </head>
  <body>
    <div class="container">
    <root><div><h1 id="raw-arrays" toclevel="1" tocentry="yes">RawArray</h1><p><span></span>   </p><div><p><span><a name="RawArray"></a></span></p><pre class="pyret-display"><span><a href="../builtin/raw-arrays.html#RawArray">RawArray</a>&lt;a&gt;</span></pre><div align="center"><p><b>This is an internal library.</b></p><p><i>The <a href="../trove/arrays.html#arrays"></a> library provides the user-facing version of this library.</i></p><p>By default, Pyret users should use <a href="../trove/arrays.html#arrays"></a> instead. It is primarily designed to be user-facing. This library provides higher performance, but is instead primarily meant for internal use and for building other libaries. Only use this if <tt class="pyret-highlight">Array</tt>s are not sufficiently performant for your needs. This library may not provide all the same functionality as <a href="../trove/arrays.html#arrays"></a>, so you may need to modify your code to use it: i.e., you can’t simply replace an <tt class="pyret-highlight">array</tt> with a <tt class="pyret-highlight">RawArray</tt> and expect the program to continue to work.</p></div><p>   A <tt class="pyret-highlight">RawArray</tt> is a mutable, fixed-length collection indexed    by non-negative intgers. Accessing and mutating a <tt class="pyret-highlight">RawArray</tt> takes    constant time in the size of the array.</p></div><p>     </p><h2 id="RawArray-Functions" toclevel="2" tocentry="yes">RawArray Functions</h2><div><p><span><a name="raw-array"></a></span></p><pre class="pyret-display">[<a href="../builtin/raw-arrays.html#raw-array">raw-array</a><span></span>: <span class="pyret-content">value :: a</span>, ...] -&gt; <span><a href="../trove/globals.html#RawArray">RawArray</a>&lt;<span>a</span>&gt;</span></pre></div><p>Constructs a <a href="../builtin/raw-arrays.html#RawArray"><tt class="pyret-highlight">RawArray</tt></a> with the given elements.</p><p>Note that <a href="../builtin/raw-arrays.html#RawArray"><tt class="pyret-highlight">RawArray</tt></a>s are mutable, so comparisons using <a href="../lang/equality.html#eq-fun-equal-always">Equal Always</a> will only return <tt class="pyret-highlight">true</tt> on <a href="../builtin/raw-arrays.html#RawArray"><tt class="pyret-highlight">RawArray</tt></a>s when they are also <a href="../lang/equality.html#eq-fun-identical">Identical</a>, regardless of their contents. Usually, the most appropriate comparison is <a href="../lang/equality.html#eq-fun-equal-now">Equal Now</a>. Tests should correspondingly use <a href="../lang/testing.html#is=~"><tt class="pyret-highlight">is=~</tt></a>.</p><div><p><b>Examples:</b></p><pre class="pyret-highlight">check:
  ra = [raw-array: 1, 2, 3]

  ra is ra
  ra is== ra

  [raw-array: 1, 2, 3] is-not ra
  [raw-array: 1, 2, 3] is-not [raw-array: 1, 2, 3]
  [raw-array: 1, 2, 3] is-not== ra

  [raw-array: 1, 2, 3] is=~ ra
  [raw-array: 1, 2, 3] is=~ [raw-array: 1, 2, 3]
end</pre><p><a class="show-embed" code="check: 
    ra = [raw-array: 1, 2, 3] 

    ra is ra 
    ra is== ra 

    [raw-array: 1, 2, 3] is-not ra 
    [raw-array: 1, 2, 3] is-not [raw-array: 1, 2, 3] 
    [raw-array: 1, 2, 3] is-not== ra 

    [raw-array: 1, 2, 3] is=~ ra 
    [raw-array: 1, 2, 3] is=~ [raw-array: 1, 2, 3] 
 end">(Try it!)</a></p></div><p>  </p><div><p><span><a name="raw-array-of"></a></span></p><pre class="pyret-display"><a href="../builtin/raw-arrays.html#raw-array-of">raw-array-of</a> :: <span>(<span><span class="pyret-content">value :: a</span>, <span class="pyret-content">count :: <a href="../trove/globals.html#Number">Number</a></span></span>) -&gt; <span><a href="../trove/globals.html#RawArray">RawArray</a>&lt;<span>a</span>&gt;</span></span></pre></div><p>Constructs an <tt class="pyret-highlight">RawArray</tt> of length <tt>count</tt>, where every element is the value given as <tt class="pyret-highlight">value</tt>.</p><p>Note that <tt class="pyret-highlight">value</tt> is not <i>copied</i>, so, the elements of <tt class="pyret-highlight">RawArray</tt>s created with <a href="../builtin/raw-arrays.html#raw-array-of"><tt class="pyret-highlight">raw-array-of</tt></a> will always be <a href="../lang/equality.html#identical"><tt class="pyret-highlight">identical</tt></a> (with the usual caveats if the <tt class="pyret-highlight">value</tt> was a function or method).</p><div><p><b>Examples:</b></p><pre class="pyret-highlight">check:
  arr = raw-array-of(true, 2)
  arr is=~ [raw-array: true, true]
  arr is-not [raw-array: true, true]
  raw-array-get(arr, 0) is&lt;=&gt; raw-array-get(arr, 1)

  raw-array-set(arr, 1, false)
  arr is=~ [raw-array: true, false]

  arr-of-arrs = raw-array-of(arr, 3)
  arr-of-arrs is=~ [raw-array: [raw-array: true, false],
    [raw-array: true, false], [raw-array: true, false]]

  raw-array-set(arr, 0, false)
  arr-of-arrs is=~ [raw-array: [raw-array: false, false],
    [raw-array: false, false], [raw-array: false, false]]
end
</pre><p><a class="show-embed" code="check: 
    arr = raw-array-of(true, 2) 
    arr is=~ [raw-array: true, true] 
    arr is-not [raw-array: true, true] 
    raw-array-get(arr, 0) is&lt;=&gt; raw-array-get(arr, 1) 

    raw-array-set(arr, 1, false) 
    arr is=~ [raw-array: true, false] 

    arr-of-arrs = raw-array-of(arr, 3) 
    arr-of-arrs is=~ [raw-array: [raw-array: true, false], 
      [raw-array: true, false], [raw-array: true, false]] 

    raw-array-set(arr, 0, false) 
    arr-of-arrs is=~ [raw-array: [raw-array: false, false], 
      [raw-array: false, false], [raw-array: false, false]] 
 end 
">(Try it!)</a></p></div><p>  </p><div><p><span><a name="raw-array-get"></a></span></p><pre class="pyret-display"><a href="../builtin/raw-arrays.html#raw-array-get">raw-array-get</a> :: <span>(<span><span class="pyret-content">array :: <span><a href="../trove/globals.html#RawArray">RawArray</a>&lt;<span>a</span>&gt;</span></span>, <span class="pyret-content">index :: <a href="../trove/globals.html#Number">Number</a></span></span>) -&gt; a</span></pre></div><p>Returns the value at the given <tt>index</tt>.</p><p>Using an index too large, negative, or not a whole number raises an error.</p><div><p><b>Examples:</b></p><pre class="pyret-highlight">check:
  a = [raw-array: "a", "b", "c"]
  raw-array-get(a, 0) is "a"
  raw-array-get(a, 1) is "b"
  raw-array-get(a, 2) is "c"
end</pre><p><a class="show-embed" code="check: 
    a = [raw-array: &quot;a&quot;, &quot;b&quot;, &quot;c&quot;] 
    raw-array-get(a, 0) is &quot;a&quot; 
    raw-array-get(a, 1) is &quot;b&quot; 
    raw-array-get(a, 2) is &quot;c&quot; 
 end">(Try it!)</a></p></div><p>  </p><div><p><span><a name="raw-array-set"></a></span></p><pre class="pyret-display"><a href="../builtin/raw-arrays.html#raw-array-set">raw-array-set</a> :: <span>(<span><span class="pyret-content">array :: <span><a href="../trove/globals.html#RawArray">RawArray</a>&lt;<span>a</span>&gt;</span></span>, <span class="pyret-content">index :: <a href="../trove/globals.html#Number">Number</a></span>, <span class="pyret-content">new-value :: a</span></span>) -&gt; <span><a href="../trove/globals.html#RawArray">RawArray</a>&lt;<span>a</span>&gt;</span></span></pre></div><p>Updates the value at the given <tt>index</tt>, returning the new value.  The update is stateful, so all references to the <tt class="pyret-highlight">RawArray</tt> see the update.</p><p>Using an index too large, negative, or not a whole number raises an error.</p><div><p><b>Examples:</b></p><pre class="pyret-highlight">check:
  a = [raw-array: "a", "b", "c"]
  raw-array-get(a, 0) is "a"

  b = a
  raw-array-set(a, 0, "d")
  a is=~ [raw-array: "d", "b", "c"]
  b is=~ [raw-array: "d", "b", "c"]

  c = raw-array-set(a, 0, "z")
  c is=~ [raw-array: "z", "b", "c"]
end</pre><p><a class="show-embed" code="check: 
    a = [raw-array: &quot;a&quot;, &quot;b&quot;, &quot;c&quot;] 
    raw-array-get(a, 0) is &quot;a&quot; 

    b = a 
    raw-array-set(a, 0, &quot;d&quot;) 
    a is=~ [raw-array: &quot;d&quot;, &quot;b&quot;, &quot;c&quot;] 
    b is=~ [raw-array: &quot;d&quot;, &quot;b&quot;, &quot;c&quot;] 

    c = raw-array-set(a, 0, &quot;z&quot;) 
    c is=~ [raw-array: &quot;z&quot;, &quot;b&quot;, &quot;c&quot;] 
 end">(Try it!)</a></p></div><p>  </p><div><p><span><a name="raw-array-length"></a></span></p><pre class="pyret-display"><a href="../builtin/raw-arrays.html#raw-array-length">raw-array-length</a> :: <span>(<span><span class="pyret-content">array :: <span><a href="../trove/globals.html#RawArray">RawArray</a>&lt;<span>a</span>&gt;</span></span></span>) -&gt; <a href="../trove/globals.html#Number">Number</a></span></pre></div><div><p><b>Examples:</b></p><pre class="pyret-highlight">check:
  a = [raw-array: "a", "b"]
  raw-array-length(a) is 2
  b = [raw-array:]
  raw-array-length(b) is 0
end</pre><p><a class="show-embed" code="check: 
    a = [raw-array: &quot;a&quot;, &quot;b&quot;] 
    raw-array-length(a) is 2 
    b = [raw-array:] 
    raw-array-length(b) is 0 
 end">(Try it!)</a></p></div><p>  </p><div><p><span><a name="raw-array-to-list"></a></span></p><pre class="pyret-display"><a href="../builtin/raw-arrays.html#raw-array-to-list">raw-array-to-list</a> :: <span>(<span><span class="pyret-content">array :: <span><a href="../trove/globals.html#RawArray">RawArray</a>&lt;<span>a</span>&gt;</span></span></span>) -&gt; <span><a href="../trove/lists.html#List">List</a>&lt;<span>a</span>&gt;</span></span></pre></div><p>    Converts a <a href="../builtin/raw-arrays.html#RawArray"><tt class="pyret-highlight">RawArray</tt></a> to a <a href="../trove/lists.html#List"><tt class="pyret-highlight">List</tt></a> containing     the same elements in the same order.</p><p>    Note that it does <i>not</i> recursively convert <a href="../builtin/raw-arrays.html#RawArray"><tt class="pyret-highlight">RawArray</tt></a>s;     only the top-level is converted.</p><p>    </p><div><p><b>Examples:</b></p><pre class="pyret-highlight">check:
  a = [raw-array: 1, 2, 3]
  raw-array-to-list(a) is [list: 1, 2, 3]

  a2 = raw-array-of([raw-array:], 3)
  raw-array-to-list(a2) is=~ [list: [raw-array:], [raw-array:], [raw-array:]]
  raw-array-to-list(a2) is-not=~ [list: [list:], [list:], [list:]]
end</pre><p><a class="show-embed" code="check: 
    a = [raw-array: 1, 2, 3] 
    raw-array-to-list(a) is [list: 1, 2, 3] 

    a2 = raw-array-of([raw-array:], 3) 
    raw-array-to-list(a2) is=~ [list: [raw-array:], [raw-array:], [raw-array:]] 
    raw-array-to-list(a2) is-not=~ [list: [list:], [list:], [list:]] 
 end">(Try it!)</a></p></div><p>  </p><div><p><span><a name="raw-array-from-list"></a></span></p><pre class="pyret-display"><a href="../builtin/raw-arrays.html#raw-array-from-list">raw-array-from-list</a> :: <span>(<span><span class="pyret-content">lst :: <span><a href="../trove/lists.html#List">List</a>&lt;<span>a</span>&gt;</span></span></span>) -&gt; <span><a href="../trove/globals.html#RawArray">RawArray</a>&lt;<span>a</span>&gt;</span></span></pre></div><p>    Converts a <a href="../trove/lists.html#List"><tt class="pyret-highlight">List</tt></a> to a <a href="../builtin/raw-arrays.html#RawArray"><tt class="pyret-highlight">RawArray</tt></a> containing     the same elements in the same order.</p><div><p><b>Examples:</b></p><pre class="pyret-highlight">check:
  raw-array-from-list(empty) is=~ [raw-array: ]
  raw-array-from-list(empty) is-not [raw-array: ]

  raw-array-from-list([list: 1, 2, 3]) is=~ [raw-array: 1, 2, 3]
  raw-array-from-list([list: 1, 2, 3]) is-not [raw-array: 1, 2, 3]
end</pre><p><a class="show-embed" code="check: 
    raw-array-from-list(empty) is=~ [raw-array: ] 
    raw-array-from-list(empty) is-not [raw-array: ] 

    raw-array-from-list([list: 1, 2, 3]) is=~ [raw-array: 1, 2, 3] 
    raw-array-from-list([list: 1, 2, 3]) is-not [raw-array: 1, 2, 3] 
 end">(Try it!)</a></p></div><p>  </p><div><p><span><a name="raw-array-build"></a></span></p><pre class="pyret-display"><a href="../builtin/raw-arrays.html#raw-array-build">raw-array-build</a> :: <span>(<span><span class="pyret-content">f :: <span>(<span><a href="../trove/globals.html#Number">Number</a> -&gt; a</span>)</span></span>, <span class="pyret-content">size :: <a href="../trove/globals.html#Number">Number</a></span></span>) -&gt; <span><a href="../trove/globals.html#RawArray">RawArray</a>&lt;<span>a</span>&gt;</span></span></pre></div><p>    Constructs an array of length <tt class="pyret-highlight">size</tt>, and fills it with the result of     calling the function <tt class="pyret-highlight">f</tt> with each index from <tt class="pyret-highlight">0</tt> to <tt class="pyret-highlight">size - 1</tt>.</p><p>  </p><div><p><b>Examples:</b></p><pre class="pyret-highlight">check:
  fun sq(x): x * x end
  raw-array-build(sq, 4) is=~ [raw-array: sq(0), sq(1), sq(2), sq(3)]
end</pre><p><a class="show-embed" code="check: 
    fun sq(x): x * x end 
    raw-array-build(sq, 4) is=~ [raw-array: sq(0), sq(1), sq(2), sq(3)] 
 end">(Try it!)</a></p></div><p>  </p><div><p><span><a name="raw-array-build-opt"></a></span></p><pre class="pyret-display"><a href="../builtin/raw-arrays.html#raw-array-build-opt">raw-array-build-opt</a> :: <span>(<span><span class="pyret-content">f :: <span>(<span><a href="../trove/globals.html#Number">Number</a> -&gt; <span><a href="../trove/option.html#Option">Option</a>&lt;<span><a href="../trove/globals.html#Any">Any</a></span>&gt;</span></span>)</span></span>, <span class="pyret-content">size :: <a href="../trove/globals.html#Number">Number</a></span></span>) -&gt; <span><a href="../trove/globals.html#RawArray">RawArray</a>&lt;<span>a</span>&gt;</span></span></pre></div><p>    Constructs an array based on the results of     calling the function <tt class="pyret-highlight">f</tt> with each index from <tt class="pyret-highlight">0</tt> to <tt class="pyret-highlight">size - 1</tt>. For each index, if the result of <tt class="pyret-highlight">f</tt> is <tt class="pyret-highlight">some(value)</tt>,     then <tt class="pyret-highlight">value</tt> is included in the resulting array (it is not included     for <tt class="pyret-highlight">none</tt>). The size of the resulting array is equal to the number of     <tt class="pyret-highlight">some</tt> results.</p><p>    </p><div><p><b>Examples:</b></p><pre class="pyret-highlight">check:
  fun even(n):
    if num-modulo(n, 2) == 0: some(n)
    else: none
    end
  end
  raw-array-build-opt(even, 10) is=~ [raw-array: 0, 2, 4, 6, 8]
end</pre><p><a class="show-embed" code="check: 
    fun even(n): 
      if num-modulo(n, 2) == 0: some(n) 
      else: none 
      end 
    end 
    raw-array-build-opt(even, 10) is=~ [raw-array: 0, 2, 4, 6, 8] 
 end">(Try it!)</a></p></div><p>  </p><div><p><span><a name="raw-array-map"></a></span></p><pre class="pyret-display"><a href="../builtin/raw-arrays.html#raw-array-map">raw-array-map</a> :: <span>(<span><span class="pyret-content">f :: <span>(<span>a -&gt; b</span>)</span></span>, <span class="pyret-content">array :: <span><a href="../trove/globals.html#RawArray">RawArray</a>&lt;<span>a</span>&gt;</span></span></span>) -&gt; <span><a href="../trove/globals.html#RawArray">RawArray</a>&lt;<span>a</span>&gt;</span></span></pre></div><p>  Creates a new array by applying <tt class="pyret-highlight">f</tt> to each element of the array.   Similar to <a href="../trove/lists.html#map"><tt class="pyret-highlight">map</tt></a>. Has an argument order that works with   <tt class="pyret-highlight">for</tt>.</p><p>  </p><div><p><b>Examples:</b></p><pre class="pyret-highlight">check:
  a = [raw-array: "apple", "banana", "plum"]
  lengths = for raw-array-map(s from a):
    string-length(s)
  end
  lengths is=~ [raw-array: 5, 6, 4]
end</pre><p><a class="show-embed" code="check: 
    a = [raw-array: &quot;apple&quot;, &quot;banana&quot;, &quot;plum&quot;] 
    lengths = for raw-array-map(s from a): 
      string-length(s) 
    end 
    lengths is=~ [raw-array: 5, 6, 4] 
 end">(Try it!)</a></p></div><p>  Note that the test uses <a href="../lang/testing.html#is=~"><tt class="pyret-highlight">is=~</tt></a>, because raw arrays are   mutable and so the two values in the shown test are not   <a href="../lang/equality.html#equal-always"><tt class="pyret-highlight">equal-always</tt></a>, they are <a href="../lang/equality.html#equal-now"><tt class="pyret-highlight">equal-now</tt></a>.</p><p>  </p><div><p><span><a name="raw-array-filter"></a></span></p><pre class="pyret-display"><a href="../builtin/raw-arrays.html#raw-array-filter">raw-array-filter</a> :: <span>(<span><span class="pyret-content">f :: <span>(<span>a -&gt; <a href="../trove/globals.html#Boolean">Boolean</a></span>)</span></span>, <span class="pyret-content">array :: <span><a href="../trove/globals.html#RawArray">RawArray</a>&lt;<span>a</span>&gt;</span></span></span>) -&gt; <span><a href="../trove/globals.html#RawArray">RawArray</a>&lt;<span>a</span>&gt;</span></span></pre></div><p>  Applies function <tt class="pyret-highlight">f</tt> to each element of <tt class="pyret-highlight">array</tt> from left to right,   constructing a new <tt class="pyret-highlight">RawArray</tt> out of the elements for which <tt class="pyret-highlight">f</tt>   returned <tt class="pyret-highlight">true</tt>.   Similar to <a href="../trove/lists.html#filter"><tt class="pyret-highlight">filter</tt></a>. Has an argument order that works with   <tt class="pyret-highlight">for</tt>.</p><p>  </p><div><p><b>Examples:</b></p><pre class="pyret-highlight">check:
  a = [raw-array: "apple", "banana", "plum"]
  p-words = for raw-array-filter(s from a):
    string-contains(s, "p")
  end
  p-words is=~ [raw-array: "apple", "plum"]
end</pre><p><a class="show-embed" code="check: 
    a = [raw-array: &quot;apple&quot;, &quot;banana&quot;, &quot;plum&quot;] 
    p-words = for raw-array-filter(s from a): 
      string-contains(s, &quot;p&quot;) 
    end 
    p-words is=~ [raw-array: &quot;apple&quot;, &quot;plum&quot;] 
 end">(Try it!)</a></p></div><p>  </p><div><p><span><a name="raw-array-sort-nums"></a></span></p><pre class="pyret-display"><a href="../builtin/raw-arrays.html#raw-array-sort-nums">raw-array-sort-nums</a> :: <span>(<span><span class="pyret-content">array :: <span><a href="../trove/globals.html#RawArray">RawArray</a>&lt;<span><a href="../trove/globals.html#Number">Number</a></span>&gt;</span></span>, <span class="pyret-content">asc :: <a href="../trove/globals.html#Boolean">Boolean</a></span></span>) -&gt; <span><a href="../trove/globals.html#RawArray">RawArray</a>&lt;<span><a href="../trove/globals.html#Number">Number</a></span>&gt;</span></span></pre></div><p>  Sorts the given array <i>in-place</i> in ascending or descending order   according to the <tt class="pyret-highlight">asc</tt> parameter. Returns a reference to the   original array, which will have its contents mutably updated.</p><p>  </p><div><p><b>Examples:</b></p><pre class="pyret-highlight">check:
  a = [raw-array: 3, 1, 4, 1, 5, 9, 2]

  asc = raw-array-sort-nums(a, true)
  asc is&lt;=&gt; a
  a is=~ [raw-array: 1, 1, 2, 3, 4, 5, 9]

  raw-array-sort-nums(a, false)
  a is=~ [raw-array: 9, 5, 4, 3, 2, 1, 1]
end</pre><p><a class="show-embed" code="check: 
    a = [raw-array: 3, 1, 4, 1, 5, 9, 2] 

    asc = raw-array-sort-nums(a, true) 
    asc is&lt;=&gt; a 
    a is=~ [raw-array: 1, 1, 2, 3, 4, 5, 9] 

    raw-array-sort-nums(a, false) 
    a is=~ [raw-array: 9, 5, 4, 3, 2, 1, 1] 
 end">(Try it!)</a></p></div><p>  </p><div><p><span><a name="raw-array-sort-by"></a></span></p><pre class="pyret-display"><a href="../builtin/raw-arrays.html#raw-array-sort-by">raw-array-sort-by</a> :: <span>(<span><span class="pyret-content">array :: <span><a href="../trove/globals.html#RawArray">RawArray</a>&lt;<span>a</span>&gt;</span></span>, <span class="pyret-content">key :: <span>(<span>a -&gt; <a href="../trove/globals.html#Number">Number</a></span>)</span></span>, <span class="pyret-content">asc :: <a href="../trove/globals.html#Boolean">Boolean</a></span></span>) -&gt; <span><a href="../trove/globals.html#RawArray">RawArray</a>&lt;<span>a</span>&gt;</span></span></pre></div><p>  Creates a new array containing the sorted contents of the given array. The sort   order is determined by calling the <tt class="pyret-highlight">key</tt> function on each element to   get a number, and sorting the elements by their key value (in increasing key   order if <tt class="pyret-highlight">asc</tt> is <tt class="pyret-highlight">true</tt>, decreasing if <tt class="pyret-highlight">false</tt>). Ties are   broken by the order in which the element is present in the initial array.</p><p>  </p><div><p><b>Examples:</b></p><pre class="pyret-highlight">check:
  a = [raw-array: "let", "us", "go", "then", "you", "and", "i"]

  asc = raw-array-sort-by(a, string-length, true)
  asc is=~ [raw-array: "i", "us", "go", "let", "you", "and", "then"]
  asc is-not=~ a

  desc = raw-array-sort-by(a, string-length, false)
  desc is=~ [raw-array: "then", "let", "you", "and", "us", "go", "i"]

  a is=~ [raw-array: "let", "us", "go", "then", "you", "and", "i"]
end</pre><p><a class="show-embed" code="check: 
    a = [raw-array: &quot;let&quot;, &quot;us&quot;, &quot;go&quot;, &quot;then&quot;, &quot;you&quot;, &quot;and&quot;, &quot;i&quot;] 

    asc = raw-array-sort-by(a, string-length, true) 
    asc is=~ [raw-array: &quot;i&quot;, &quot;us&quot;, &quot;go&quot;, &quot;let&quot;, &quot;you&quot;, &quot;and&quot;, &quot;then&quot;] 
    asc is-not=~ a 

    desc = raw-array-sort-by(a, string-length, false) 
    desc is=~ [raw-array: &quot;then&quot;, &quot;let&quot;, &quot;you&quot;, &quot;and&quot;, &quot;us&quot;, &quot;go&quot;, &quot;i&quot;] 

    a is=~ [raw-array: &quot;let&quot;, &quot;us&quot;, &quot;go&quot;, &quot;then&quot;, &quot;you&quot;, &quot;and&quot;, &quot;i&quot;] 
 end">(Try it!)</a></p></div><p>  </p><div><p><span><a name="raw-array-fold"></a></span></p><pre class="pyret-display"><a href="../builtin/raw-arrays.html#raw-array-fold">raw-array-fold</a> :: <span>(<span><span class="pyret-content">f :: <span>(<span>b, a, <a href="../trove/globals.html#Number">Number</a> -&gt; b</span>)</span></span>, <span class="pyret-content">init :: b</span>, <span class="pyret-content">array :: <span><a href="../trove/globals.html#RawArray">RawArray</a>&lt;<span>a</span>&gt;</span></span>, <span class="pyret-content">start-index :: <a href="../trove/globals.html#Number">Number</a></span></span>) -&gt; b</span></pre></div><p>  Combines the elements in the array with a function that accumulates each   element with an intermediate result.   The numeric argument to   the accumulator is the index of the current element.</p><p>  Similar to <a href="../trove/lists.html#fold_n"><tt class="pyret-highlight">fold_n</tt></a>.</p><p>  </p><div><p><b>Examples:</b></p><pre class="pyret-highlight">check:
  a = [raw-array: "a", "b", "c"]
  str = for raw-array-fold(str from "", elt from a, i from 0):
    if i &lt; (raw-array-length(a) - 1):
      str + elt + ": " + tostring(i) + ", "
    else:
      str + elt + ": " + tostring(i)
    end
  end
  str is "a: 0, b: 1, c: 2"
end</pre><p><a class="show-embed" code="check: 
    a = [raw-array: &quot;a&quot;, &quot;b&quot;, &quot;c&quot;] 
    str = for raw-array-fold(str from &quot;&quot;, elt from a, i from 0): 
      if i &lt; (raw-array-length(a) - 1): 
        str + elt + &quot;: &quot; + tostring(i) + &quot;, &quot; 
      else: 
        str + elt + &quot;: &quot; + tostring(i) 
      end 
    end 
    str is &quot;a: 0, b: 1, c: 2&quot; 
 end">(Try it!)</a></p></div><p>  </p><div><p><span><a name="raw-array-concat"></a></span></p><pre class="pyret-display"><a href="../builtin/raw-arrays.html#raw-array-concat">raw-array-concat</a> :: <span>(<span><span class="pyret-content">array1 :: <span><a href="../trove/globals.html#RawArray">RawArray</a>&lt;<span>a</span>&gt;</span></span>, <span class="pyret-content">array2 :: <span><a href="../trove/globals.html#RawArray">RawArray</a>&lt;<span>a</span>&gt;</span></span></span>) -&gt; <span><a href="../trove/globals.html#RawArray">RawArray</a>&lt;<span>a</span>&gt;</span></span></pre></div><p>  Creates a new array with all the elements of <tt class="pyret-highlight">array1</tt> followed by all   the elements of <tt class="pyret-highlight">array2</tt>.</p><div><p><b>Examples:</b></p><pre class="pyret-highlight">check:
  a1 = [raw-array: 5, 6, 7]
  a2 = [raw-array: 0, 3, 99, -1, 7]

  c = raw-array-concat(a1, a2)
  c is=~ [raw-array: 5, 6, 7, 0, 3, 99, -1, 7]

  a1 is=~ [raw-array: 5, 6, 7]
  a2 is=~ [raw-array: 0, 3, 99, -1, 7]
end</pre><p><a class="show-embed" code="check: 
    a1 = [raw-array: 5, 6, 7] 
    a2 = [raw-array: 0, 3, 99, -1, 7] 

    c = raw-array-concat(a1, a2) 
    c is=~ [raw-array: 5, 6, 7, 0, 3, 99, -1, 7] 

    a1 is=~ [raw-array: 5, 6, 7] 
    a2 is=~ [raw-array: 0, 3, 99, -1, 7] 
 end">(Try it!)</a></p></div><p>  </p><div><p><span><a name="raw-array-duplicate"></a></span></p><pre class="pyret-display"><a href="../builtin/raw-arrays.html#raw-array-duplicate">raw-array-duplicate</a> :: <span>(<span><span class="pyret-content">array :: <span><a href="../trove/globals.html#RawArray">RawArray</a>&lt;<span>a</span>&gt;</span></span></span>) -&gt; <span><a href="../trove/globals.html#RawArray">RawArray</a>&lt;<span>a</span>&gt;</span></span></pre></div><p>  Returns a copy of the given array, such that corresponding elements in the   result are <a href="../lang/equality.html#eq-fun-identical">Identical</a> to those in the source array.</p><p>  </p><div><p><b>Examples:</b></p><pre class="pyret-highlight">check:
  a = [raw-array: 1, 2, 3]
  b = raw-array-duplicate(a)
  a is=~ b
  b is=~ a

  a is&lt;=&gt; a
  a is-not&lt;=&gt; b
  b is-not&lt;=&gt; a
  b is&lt;=&gt; b

  raw-array-set(a, 1, 1)

  raw-array-get(a, 1) is 1
  raw-array-get(b, 1) is 2

  c = [raw-array: {1; 2}, {3; 4}]
  d = raw-array-duplicate(c)

  c is-not&lt;=&gt; d
  raw-array-get(c, 0) is&lt;=&gt; raw-array-get(d, 0)
  raw-array-get(c, 1) is&lt;=&gt; raw-array-get(d, 1)
end</pre><p><a class="show-embed" code="check: 
    a = [raw-array: 1, 2, 3] 
    b = raw-array-duplicate(a) 
    a is=~ b 
    b is=~ a 

    a is&lt;=&gt; a 
    a is-not&lt;=&gt; b 
    b is-not&lt;=&gt; a 
    b is&lt;=&gt; b 

    raw-array-set(a, 1, 1) 

    raw-array-get(a, 1) is 1 
    raw-array-get(b, 1) is 2 

    c = [raw-array: {1; 2}, {3; 4}] 
    d = raw-array-duplicate(c) 

    c is-not&lt;=&gt; d 
    raw-array-get(c, 0) is&lt;=&gt; raw-array-get(d, 0) 
    raw-array-get(c, 1) is&lt;=&gt; raw-array-get(d, 1) 
 end">(Try it!)</a></p></div></div></root>
    <hr/>
    <!-- The current page is builtin/raw-arrays.html. -->
    <a class="floatleft" href="../libraries-internal.html">⏴⏴⏴</a>
    <a class="floatright" href="../trove/data-source.html">⏵⏵⏵</a>
    </div>
  </body>
</html>